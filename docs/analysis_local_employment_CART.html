<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Local Employment CART Analysis – Pathways taken after high school - Southern</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="site_libs/datatables-binding-0.33/datatables.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="site_libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="site_libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>
<link href="site_libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="site_libs/selectize-0.12.0/selectize.min.js"></script>
<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Pathways taken after high school - Southern</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Summary</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-data-prep-and-summaries" role="link" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-fa-gear" role="img">
</i> 
 <span class="menu-text">Data Prep and Summaries</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-data-prep-and-summaries">    
        <li>
    <a class="dropdown-item" href="./k12enrollment.html">
 <span class="dropdown-text">K12Enrollment</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./k12orgs.html">
 <span class="dropdown-text">K12Orgs</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./act.html">
 <span class="dropdown-text">ACT</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./ap.html">
 <span class="dropdown-text">AP</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./cteenrollment.html">
 <span class="dropdown-text">CTEEnrollment</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./ctedemographics.html">
 <span class="dropdown-text">CTEDemographics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./assessments.html">
 <span class="dropdown-text">Assessments</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./sat.html">
 <span class="dropdown-text">SAT</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./nscenrollment.html">
 <span class="dropdown-text">National Student Clearinghouse - Enrollment</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./nsccompletions.html">
 <span class="dropdown-text">National Student Clearinghouse - Completions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./employment.html">
 <span class="dropdown-text">Employment</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./emp_states_each_year.html">
 <span class="dropdown-text">Employment states each year</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./unemployment.html">
 <span class="dropdown-text">Unemployment</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./avgwages.html">
 <span class="dropdown-text">Average wages</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-analysis" role="link" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-fa-gear" role="img">
</i> 
 <span class="menu-text">Analysis</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-analysis">    
        <li>
    <a class="dropdown-item" href="./analysis_mca.html">
 <span class="dropdown-text">Multiple Correspondence Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./analysis_dep_var_states.html">
 <span class="dropdown-text">Dependent Variable States</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./analysis_local_employment_ct.html">
 <span class="dropdown-text">Local Employment Cross-tabs</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./analysis_post_secondary_pathways_ct.qmd">
 <span class="dropdown-text">Post-secondary pathways cross-tabs</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./analysis_local_employment_CART.html">
 <span class="dropdown-text">Local Employment CART Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./analysis_post_secondary_paths_CART.qmd">
 <span class="dropdown-text">Post-secondary pathways CART</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./analysis_non_post_secondary_graduates.qmd">
 <span class="dropdown-text">Non-college graduates</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#methodology" id="toc-methodology" class="nav-link" data-scroll-target="#methodology">Methodology</a>
  <ul class="collapse">
  <li><a href="#dependent-variables" id="toc-dependent-variables" class="nav-link" data-scroll-target="#dependent-variables">Dependent Variables</a></li>
  <li><a href="#independent-variables" id="toc-independent-variables" class="nav-link" data-scroll-target="#independent-variables">Independent Variables</a></li>
  <li><a href="#model-construction" id="toc-model-construction" class="nav-link" data-scroll-target="#model-construction">Model Construction</a></li>
  </ul></li>
  <li><a href="#analysis---meaningful-employment-mn" id="toc-analysis---meaningful-employment-mn" class="nav-link" data-scroll-target="#analysis---meaningful-employment-mn">Analysis - Meaningful employment MN</a>
  <ul class="collapse">
  <li><a href="#synthesis-meaningful-employment-in-region-vs.-meaningful-employment-elsewhere-in-minnesota" id="toc-synthesis-meaningful-employment-in-region-vs.-meaningful-employment-elsewhere-in-minnesota" class="nav-link" data-scroll-target="#synthesis-meaningful-employment-in-region-vs.-meaningful-employment-elsewhere-in-minnesota">Synthesis: Meaningful Employment in Region vs.&nbsp;Meaningful Employment Elsewhere in Minnesota</a>
  <ul class="collapse">
  <li><a href="#main-takeaway" id="toc-main-takeaway" class="nav-link" data-scroll-target="#main-takeaway"><strong>Main takeaway</strong></a></li>
  <li><a href="#year-1-after-graduation" id="toc-year-1-after-graduation" class="nav-link" data-scroll-target="#year-1-after-graduation"><strong>Year 1 after Graduation</strong></a></li>
  <li><a href="#year-5-after-graduation" id="toc-year-5-after-graduation" class="nav-link" data-scroll-target="#year-5-after-graduation"><strong>Year 5 after Graduation</strong></a></li>
  <li><a href="#year-10-after-graduation" id="toc-year-10-after-graduation" class="nav-link" data-scroll-target="#year-10-after-graduation"><strong>Year 10 after Graduation</strong></a></li>
  <li><a href="#overall-summary" id="toc-overall-summary" class="nav-link" data-scroll-target="#overall-summary"><strong>Overall Summary</strong></a></li>
  <li><a href="#policypractice-implications" id="toc-policypractice-implications" class="nav-link" data-scroll-target="#policypractice-implications"><strong>Policy/Practice Implications</strong></a></li>
  </ul></li>
  <li><a href="#one-year-after-graduation" id="toc-one-year-after-graduation" class="nav-link" data-scroll-target="#one-year-after-graduation">One year after graduation</a>
  <ul class="collapse">
  <li><a href="#base-model" id="toc-base-model" class="nav-link" data-scroll-target="#base-model">Base Model</a></li>
  <li><a href="#pre-pruning" id="toc-pre-pruning" class="nav-link" data-scroll-target="#pre-pruning">Pre-pruning</a></li>
  <li><a href="#post-pruning" id="toc-post-pruning" class="nav-link" data-scroll-target="#post-pruning">Post-pruning</a></li>
  <li><a href="#main-takeaway-1" id="toc-main-takeaway-1" class="nav-link" data-scroll-target="#main-takeaway-1"><strong>Main takeaway</strong></a></li>
  <li><a href="#key-findings" id="toc-key-findings" class="nav-link" data-scroll-target="#key-findings"><strong>Key Findings</strong></a></li>
  <li><a href="#interpretation" id="toc-interpretation" class="nav-link" data-scroll-target="#interpretation"><strong>Interpretation</strong></a></li>
  <li><a href="#decision-tree-interpretation" id="toc-decision-tree-interpretation" class="nav-link" data-scroll-target="#decision-tree-interpretation"><strong>Decision Tree Interpretation</strong></a></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary"><strong>Summary</strong></a></li>
  <li><a href="#policypractice-implications-1" id="toc-policypractice-implications-1" class="nav-link" data-scroll-target="#policypractice-implications-1"><strong>Policy/Practice Implications</strong></a></li>
  </ul></li>
  <li><a href="#five-years-after-graduation" id="toc-five-years-after-graduation" class="nav-link" data-scroll-target="#five-years-after-graduation">Five years after graduation</a>
  <ul class="collapse">
  <li><a href="#base-model-1" id="toc-base-model-1" class="nav-link" data-scroll-target="#base-model-1">Base Model</a></li>
  <li><a href="#pre-pruning-1" id="toc-pre-pruning-1" class="nav-link" data-scroll-target="#pre-pruning-1">Pre-pruning</a></li>
  <li><a href="#post-pruning-1" id="toc-post-pruning-1" class="nav-link" data-scroll-target="#post-pruning-1">Post-pruning</a></li>
  <li><a href="#main-takeaway-2" id="toc-main-takeaway-2" class="nav-link" data-scroll-target="#main-takeaway-2"><strong>Main takeaway</strong></a></li>
  <li><a href="#key-findings-1" id="toc-key-findings-1" class="nav-link" data-scroll-target="#key-findings-1"><strong>Key Findings</strong></a></li>
  <li><a href="#interpretation-1" id="toc-interpretation-1" class="nav-link" data-scroll-target="#interpretation-1"><strong>Interpretation</strong></a></li>
  <li><a href="#decision-tree-interpretation-1" id="toc-decision-tree-interpretation-1" class="nav-link" data-scroll-target="#decision-tree-interpretation-1"><strong>Decision Tree Interpretation</strong></a></li>
  <li><a href="#summary-1" id="toc-summary-1" class="nav-link" data-scroll-target="#summary-1"><strong>Summary</strong></a></li>
  <li><a href="#policypractice-implications-2" id="toc-policypractice-implications-2" class="nav-link" data-scroll-target="#policypractice-implications-2"><strong>Policy/Practice Implications</strong></a></li>
  </ul></li>
  <li><a href="#ten-years-after-graduation" id="toc-ten-years-after-graduation" class="nav-link" data-scroll-target="#ten-years-after-graduation">Ten years after graduation</a>
  <ul class="collapse">
  <li><a href="#base-model-2" id="toc-base-model-2" class="nav-link" data-scroll-target="#base-model-2">Base Model</a></li>
  <li><a href="#pre-pruning-2" id="toc-pre-pruning-2" class="nav-link" data-scroll-target="#pre-pruning-2">Pre-pruning</a></li>
  <li><a href="#post-pruning-2" id="toc-post-pruning-2" class="nav-link" data-scroll-target="#post-pruning-2">Post-pruning</a></li>
  <li><a href="#main-takeaway-3" id="toc-main-takeaway-3" class="nav-link" data-scroll-target="#main-takeaway-3"><strong>Main takeaway</strong></a></li>
  <li><a href="#key-findings-2" id="toc-key-findings-2" class="nav-link" data-scroll-target="#key-findings-2"><strong>Key Findings</strong></a></li>
  <li><a href="#interpretation-2" id="toc-interpretation-2" class="nav-link" data-scroll-target="#interpretation-2"><strong>Interpretation</strong></a></li>
  <li><a href="#decision-tree-interpretation-2" id="toc-decision-tree-interpretation-2" class="nav-link" data-scroll-target="#decision-tree-interpretation-2"><strong>Decision Tree Interpretation</strong></a></li>
  <li><a href="#summary-2" id="toc-summary-2" class="nav-link" data-scroll-target="#summary-2"><strong>Summary</strong></a></li>
  <li><a href="#policypractice-implications-3" id="toc-policypractice-implications-3" class="nav-link" data-scroll-target="#policypractice-implications-3"><strong>Policy/Practice Implications</strong></a></li>
  </ul></li>
  </ul></li>
  <li><a href="#analysis---meaningful-employment-region-vs.-not-meaningful-and-not-attending-post-secondary" id="toc-analysis---meaningful-employment-region-vs.-not-meaningful-and-not-attending-post-secondary" class="nav-link" data-scroll-target="#analysis---meaningful-employment-region-vs.-not-meaningful-and-not-attending-post-secondary">Analysis - Meaningful employment region vs.&nbsp;Not meaningful and not attending post-secondary</a>
  <ul class="collapse">
  <li><a href="#synthesis-meaningful-employment-in-region-vs.-not-meaningful-employment-not-attending-postsecondary" id="toc-synthesis-meaningful-employment-in-region-vs.-not-meaningful-employment-not-attending-postsecondary" class="nav-link" data-scroll-target="#synthesis-meaningful-employment-in-region-vs.-not-meaningful-employment-not-attending-postsecondary">Synthesis: Meaningful Employment in Region vs.&nbsp;Not Meaningful Employment, Not Attending Postsecondary</a>
  <ul class="collapse">
  <li><a href="#main-takeaway-4" id="toc-main-takeaway-4" class="nav-link" data-scroll-target="#main-takeaway-4"><strong>Main takeaway</strong></a></li>
  <li><a href="#year-1-after-graduation-1" id="toc-year-1-after-graduation-1" class="nav-link" data-scroll-target="#year-1-after-graduation-1"><strong>Year 1 after Graduation</strong></a></li>
  <li><a href="#year-5-after-graduation-1" id="toc-year-5-after-graduation-1" class="nav-link" data-scroll-target="#year-5-after-graduation-1"><strong>Year 5 after Graduation</strong></a></li>
  <li><a href="#year-10-after-graduation-1" id="toc-year-10-after-graduation-1" class="nav-link" data-scroll-target="#year-10-after-graduation-1"><strong>Year 10 after Graduation</strong></a></li>
  <li><a href="#overall-summary-1" id="toc-overall-summary-1" class="nav-link" data-scroll-target="#overall-summary-1"><strong>Overall Summary</strong></a></li>
  <li><a href="#policypractice-implications-4" id="toc-policypractice-implications-4" class="nav-link" data-scroll-target="#policypractice-implications-4"><strong>Policy/Practice Implications</strong></a></li>
  </ul></li>
  <li><a href="#one-year-after-graduation-1" id="toc-one-year-after-graduation-1" class="nav-link" data-scroll-target="#one-year-after-graduation-1">One year after graduation</a>
  <ul class="collapse">
  <li><a href="#base-model-3" id="toc-base-model-3" class="nav-link" data-scroll-target="#base-model-3">Base Model</a></li>
  <li><a href="#pre-pruning-3" id="toc-pre-pruning-3" class="nav-link" data-scroll-target="#pre-pruning-3">Pre-pruning</a></li>
  <li><a href="#post-pruning-3" id="toc-post-pruning-3" class="nav-link" data-scroll-target="#post-pruning-3">Post-pruning</a></li>
  <li><a href="#main-takeaway-5" id="toc-main-takeaway-5" class="nav-link" data-scroll-target="#main-takeaway-5"><strong>Main takeaway</strong></a></li>
  <li><a href="#key-findings-3" id="toc-key-findings-3" class="nav-link" data-scroll-target="#key-findings-3"><strong>Key Findings</strong></a></li>
  <li><a href="#interpretation-3" id="toc-interpretation-3" class="nav-link" data-scroll-target="#interpretation-3"><strong>Interpretation</strong></a></li>
  <li><a href="#decision-tree-interpretation-3" id="toc-decision-tree-interpretation-3" class="nav-link" data-scroll-target="#decision-tree-interpretation-3"><strong>Decision Tree Interpretation</strong></a></li>
  <li><a href="#summary-3" id="toc-summary-3" class="nav-link" data-scroll-target="#summary-3"><strong>Summary</strong></a></li>
  <li><a href="#policypractice-implications-5" id="toc-policypractice-implications-5" class="nav-link" data-scroll-target="#policypractice-implications-5"><strong>Policy/Practice Implications</strong></a></li>
  </ul></li>
  <li><a href="#five-years-after-high-school" id="toc-five-years-after-high-school" class="nav-link" data-scroll-target="#five-years-after-high-school">Five years after high school</a>
  <ul class="collapse">
  <li><a href="#base-model-4" id="toc-base-model-4" class="nav-link" data-scroll-target="#base-model-4">Base Model</a></li>
  <li><a href="#pre-pruning-4" id="toc-pre-pruning-4" class="nav-link" data-scroll-target="#pre-pruning-4">Pre-pruning</a></li>
  <li><a href="#post-pruning-4" id="toc-post-pruning-4" class="nav-link" data-scroll-target="#post-pruning-4">Post-pruning</a></li>
  <li><a href="#main-takeaway-6" id="toc-main-takeaway-6" class="nav-link" data-scroll-target="#main-takeaway-6"><strong>Main takeaway</strong></a></li>
  <li><a href="#key-findings-4" id="toc-key-findings-4" class="nav-link" data-scroll-target="#key-findings-4"><strong>Key Findings</strong></a></li>
  <li><a href="#interpretation-4" id="toc-interpretation-4" class="nav-link" data-scroll-target="#interpretation-4"><strong>Interpretation</strong></a></li>
  <li><a href="#decision-tree-interpretation-4" id="toc-decision-tree-interpretation-4" class="nav-link" data-scroll-target="#decision-tree-interpretation-4"><strong>Decision Tree Interpretation</strong></a></li>
  <li><a href="#summary-4" id="toc-summary-4" class="nav-link" data-scroll-target="#summary-4"><strong>Summary</strong></a></li>
  <li><a href="#policypractice-implications-6" id="toc-policypractice-implications-6" class="nav-link" data-scroll-target="#policypractice-implications-6"><strong>Policy/Practice Implications</strong></a></li>
  </ul></li>
  <li><a href="#ten-years-after-high-school" id="toc-ten-years-after-high-school" class="nav-link" data-scroll-target="#ten-years-after-high-school">Ten years after high school</a>
  <ul class="collapse">
  <li><a href="#base-model-5" id="toc-base-model-5" class="nav-link" data-scroll-target="#base-model-5">Base Model</a></li>
  <li><a href="#pre-pruning-5" id="toc-pre-pruning-5" class="nav-link" data-scroll-target="#pre-pruning-5">Pre-pruning</a></li>
  <li><a href="#post-pruning-5" id="toc-post-pruning-5" class="nav-link" data-scroll-target="#post-pruning-5">Post-pruning</a></li>
  <li><a href="#main-takeaway-7" id="toc-main-takeaway-7" class="nav-link" data-scroll-target="#main-takeaway-7"><strong>Main takeaway</strong></a></li>
  <li><a href="#key-findings-5" id="toc-key-findings-5" class="nav-link" data-scroll-target="#key-findings-5"><strong>Key Findings</strong></a></li>
  <li><a href="#interpretation-5" id="toc-interpretation-5" class="nav-link" data-scroll-target="#interpretation-5"><strong>Interpretation</strong></a></li>
  <li><a href="#decision-tree-interpretation-5" id="toc-decision-tree-interpretation-5" class="nav-link" data-scroll-target="#decision-tree-interpretation-5"><strong>Decision Tree Interpretation</strong></a></li>
  <li><a href="#summary-5" id="toc-summary-5" class="nav-link" data-scroll-target="#summary-5"><strong>Summary</strong></a></li>
  <li><a href="#policypractice-implications-7" id="toc-policypractice-implications-7" class="nav-link" data-scroll-target="#policypractice-implications-7"><strong>Policy/Practice Implications</strong></a></li>
  </ul></li>
  </ul></li>
  <li><a href="#analysis---meaningful-employment-region-vs.-no-mn-employment-record-and-not-attending-post-secondary" id="toc-analysis---meaningful-employment-region-vs.-no-mn-employment-record-and-not-attending-post-secondary" class="nav-link" data-scroll-target="#analysis---meaningful-employment-region-vs.-no-mn-employment-record-and-not-attending-post-secondary">Analysis - Meaningful employment region vs.&nbsp;No MN employment record and not attending post-secondary</a>
  <ul class="collapse">
  <li><a href="#synthesis-meaningful-employment-in-region-vs.-no-mn-employment-record-not-attending-postsecondary" id="toc-synthesis-meaningful-employment-in-region-vs.-no-mn-employment-record-not-attending-postsecondary" class="nav-link" data-scroll-target="#synthesis-meaningful-employment-in-region-vs.-no-mn-employment-record-not-attending-postsecondary">Synthesis: Meaningful Employment in Region vs.&nbsp;No MN Employment Record, Not Attending Postsecondary</a>
  <ul class="collapse">
  <li><a href="#main-takeaway-8" id="toc-main-takeaway-8" class="nav-link" data-scroll-target="#main-takeaway-8"><strong>Main takeaway</strong></a></li>
  <li><a href="#year-1-after-graduation-2" id="toc-year-1-after-graduation-2" class="nav-link" data-scroll-target="#year-1-after-graduation-2"><strong>Year 1 after Graduation</strong></a></li>
  <li><a href="#year-5-after-graduation-2" id="toc-year-5-after-graduation-2" class="nav-link" data-scroll-target="#year-5-after-graduation-2"><strong>Year 5 after Graduation</strong></a></li>
  <li><a href="#year-10-after-graduation-2" id="toc-year-10-after-graduation-2" class="nav-link" data-scroll-target="#year-10-after-graduation-2"><strong>Year 10 after Graduation</strong></a></li>
  <li><a href="#overall-summary-2" id="toc-overall-summary-2" class="nav-link" data-scroll-target="#overall-summary-2"><strong>Overall Summary</strong></a></li>
  <li><a href="#policypractice-implications-8" id="toc-policypractice-implications-8" class="nav-link" data-scroll-target="#policypractice-implications-8"><strong>Policy/Practice Implications</strong></a></li>
  </ul></li>
  <li><a href="#one-year-after-graduation-2" id="toc-one-year-after-graduation-2" class="nav-link" data-scroll-target="#one-year-after-graduation-2">One year after graduation</a>
  <ul class="collapse">
  <li><a href="#base-model-6" id="toc-base-model-6" class="nav-link" data-scroll-target="#base-model-6">Base Model</a></li>
  <li><a href="#pre-pruning-6" id="toc-pre-pruning-6" class="nav-link" data-scroll-target="#pre-pruning-6">Pre-pruning</a></li>
  <li><a href="#post-pruning-6" id="toc-post-pruning-6" class="nav-link" data-scroll-target="#post-pruning-6">Post-pruning</a></li>
  <li><a href="#main-takeaway-9" id="toc-main-takeaway-9" class="nav-link" data-scroll-target="#main-takeaway-9"><strong>Main takeaway</strong></a></li>
  <li><a href="#key-findings-6" id="toc-key-findings-6" class="nav-link" data-scroll-target="#key-findings-6"><strong>Key Findings</strong></a></li>
  <li><a href="#interpretation-6" id="toc-interpretation-6" class="nav-link" data-scroll-target="#interpretation-6"><strong>Interpretation</strong></a></li>
  <li><a href="#decision-tree-interpretation-6" id="toc-decision-tree-interpretation-6" class="nav-link" data-scroll-target="#decision-tree-interpretation-6"><strong>Decision Tree Interpretation</strong></a></li>
  <li><a href="#summary-6" id="toc-summary-6" class="nav-link" data-scroll-target="#summary-6"><strong>Summary</strong></a></li>
  <li><a href="#policypractice-implications-9" id="toc-policypractice-implications-9" class="nav-link" data-scroll-target="#policypractice-implications-9"><strong>Policy/Practice Implications</strong></a></li>
  </ul></li>
  <li><a href="#five-years-after-graduation-1" id="toc-five-years-after-graduation-1" class="nav-link" data-scroll-target="#five-years-after-graduation-1">Five years after graduation</a>
  <ul class="collapse">
  <li><a href="#base-model-7" id="toc-base-model-7" class="nav-link" data-scroll-target="#base-model-7">Base Model</a></li>
  <li><a href="#pre-pruning-7" id="toc-pre-pruning-7" class="nav-link" data-scroll-target="#pre-pruning-7">Pre-pruning</a></li>
  <li><a href="#post-pruning-7" id="toc-post-pruning-7" class="nav-link" data-scroll-target="#post-pruning-7">Post-pruning</a></li>
  <li><a href="#main-takeaway-10" id="toc-main-takeaway-10" class="nav-link" data-scroll-target="#main-takeaway-10"><strong>Main takeaway</strong></a></li>
  <li><a href="#key-findings-7" id="toc-key-findings-7" class="nav-link" data-scroll-target="#key-findings-7"><strong>Key Findings</strong></a></li>
  <li><a href="#interpretation-7" id="toc-interpretation-7" class="nav-link" data-scroll-target="#interpretation-7"><strong>Interpretation</strong></a></li>
  <li><a href="#decision-tree-interpretation-7" id="toc-decision-tree-interpretation-7" class="nav-link" data-scroll-target="#decision-tree-interpretation-7"><strong>Decision Tree Interpretation</strong></a></li>
  <li><a href="#summary-7" id="toc-summary-7" class="nav-link" data-scroll-target="#summary-7"><strong>Summary</strong></a></li>
  <li><a href="#policypractice-implications-10" id="toc-policypractice-implications-10" class="nav-link" data-scroll-target="#policypractice-implications-10"><strong>Policy/Practice Implications</strong></a></li>
  </ul></li>
  <li><a href="#ten-years-after-graduation-1" id="toc-ten-years-after-graduation-1" class="nav-link" data-scroll-target="#ten-years-after-graduation-1">Ten years after graduation</a>
  <ul class="collapse">
  <li><a href="#base-model-8" id="toc-base-model-8" class="nav-link" data-scroll-target="#base-model-8">Base Model</a></li>
  <li><a href="#pre-pruning-8" id="toc-pre-pruning-8" class="nav-link" data-scroll-target="#pre-pruning-8">Pre-pruning</a></li>
  <li><a href="#post-pruning-8" id="toc-post-pruning-8" class="nav-link" data-scroll-target="#post-pruning-8">Post-pruning</a></li>
  <li><a href="#main-takeaway-11" id="toc-main-takeaway-11" class="nav-link" data-scroll-target="#main-takeaway-11"><strong>Main takeaway</strong></a></li>
  <li><a href="#key-findings-8" id="toc-key-findings-8" class="nav-link" data-scroll-target="#key-findings-8"><strong>Key Findings</strong></a></li>
  <li><a href="#interpretation-8" id="toc-interpretation-8" class="nav-link" data-scroll-target="#interpretation-8"><strong>Interpretation</strong></a></li>
  <li><a href="#decision-tree-interpretation-8" id="toc-decision-tree-interpretation-8" class="nav-link" data-scroll-target="#decision-tree-interpretation-8"><strong>Decision Tree Interpretation</strong></a></li>
  <li><a href="#summary-8" id="toc-summary-8" class="nav-link" data-scroll-target="#summary-8"><strong>Summary</strong></a></li>
  <li><a href="#policypractice-implications-11" id="toc-policypractice-implications-11" class="nav-link" data-scroll-target="#policypractice-implications-11"><strong>Policy/Practice Implications</strong></a></li>
  </ul></li>
  </ul></li>
  <li><a href="#grand-synthesis-predictive-models-of-meaningful-employment-in-southern-minnesota" id="toc-grand-synthesis-predictive-models-of-meaningful-employment-in-southern-minnesota" class="nav-link" data-scroll-target="#grand-synthesis-predictive-models-of-meaningful-employment-in-southern-minnesota">Grand Synthesis: Predictive Models of Meaningful Employment in Southern Minnesota</a>
  <ul class="collapse">
  <li><a href="#main-takeaway-12" id="toc-main-takeaway-12" class="nav-link" data-scroll-target="#main-takeaway-12"><strong>Main takeaway</strong></a></li>
  <li><a href="#year-1-after-graduation-3" id="toc-year-1-after-graduation-3" class="nav-link" data-scroll-target="#year-1-after-graduation-3"><strong>Year 1 after Graduation</strong></a></li>
  <li><a href="#year-5-after-graduation-3" id="toc-year-5-after-graduation-3" class="nav-link" data-scroll-target="#year-5-after-graduation-3"><strong>Year 5 after Graduation</strong></a></li>
  <li><a href="#year-10-after-graduation-3" id="toc-year-10-after-graduation-3" class="nav-link" data-scroll-target="#year-10-after-graduation-3"><strong>Year 10 after Graduation</strong></a></li>
  <li><a href="#overall-summary-3" id="toc-overall-summary-3" class="nav-link" data-scroll-target="#overall-summary-3"><strong>Overall Summary</strong></a></li>
  <li><a href="#policypractice-implications-12" id="toc-policypractice-implications-12" class="nav-link" data-scroll-target="#policypractice-implications-12"><strong>Policy/Practice Implications</strong></a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Local Employment CART Analysis</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>master.original <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"Data/SLEDS/Masters/After analysis/Master-after-ct.csv"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ps.grad.InstitutionSector =</span> <span class="fu">ifelse</span>(ps.grad.InstitutionSector <span class="sc">==</span> <span class="st">"1"</span>, <span class="st">"Public, 4-year"</span>, <span class="fu">as.character</span>(ps.grad.InstitutionSector)),</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">ps.grad.InstitutionSector =</span> <span class="fu">ifelse</span>(ps.grad.InstitutionSector <span class="sc">==</span> <span class="st">"4"</span>, <span class="st">"Public, 2-year"</span>, <span class="fu">as.character</span>(ps.grad.InstitutionSector)),</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">ps.grad.InstitutionSector =</span> <span class="fu">ifelse</span>(ps.grad.InstitutionSector <span class="sc">==</span> <span class="st">"11"</span>, <span class="st">"Other"</span>, <span class="fu">as.character</span>(ps.grad.InstitutionSector)),</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">ps.grad.location =</span> <span class="fu">ifelse</span>(ps.grad.location <span class="sc">==</span> <span class="st">"PS grad EDR"</span>, <span class="st">"PS grad region"</span>, ps.grad.location),</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">highest.cred.level =</span> <span class="fu">as.factor</span>(highest.cred.level))</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">names</span>(master.original))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">x</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">PersonID</td>
</tr>
<tr class="even">
<td style="text-align: left;">Dem_Desc</td>
</tr>
<tr class="odd">
<td style="text-align: left;">edr</td>
</tr>
<tr class="even">
<td style="text-align: left;">grad.year.covid</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Gender</td>
</tr>
<tr class="even">
<td style="text-align: left;">economic.status</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pseo.participant</td>
</tr>
<tr class="even">
<td style="text-align: left;">SpecialEdStatus</td>
</tr>
<tr class="odd">
<td style="text-align: left;">RaceEthnicity</td>
</tr>
<tr class="even">
<td style="text-align: left;">cte.achievement</td>
</tr>
<tr class="odd">
<td style="text-align: left;">attended.ps</td>
</tr>
<tr class="even">
<td style="text-align: left;">ps.grad</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ps.grad.InstitutionSector</td>
</tr>
<tr class="even">
<td style="text-align: left;">highest.cred.level</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ps.grad.location</td>
</tr>
<tr class="even">
<td style="text-align: left;">ps.grad.in.same.ruca</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ps.grad.in.same.edr</td>
</tr>
<tr class="even">
<td style="text-align: left;">ps.grad.in.same.pr</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ps.grad.in.MN</td>
</tr>
<tr class="even">
<td style="text-align: left;">ACTCompositeScore</td>
</tr>
<tr class="odd">
<td style="text-align: left;">total.cte.courses.taken</td>
</tr>
<tr class="even">
<td style="text-align: left;">ACTE.SPED</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Agriculture..Food..and.Natural.Resources</td>
</tr>
<tr class="even">
<td style="text-align: left;">Architecture…Construction</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Arts..A.V.Technology…Communication</td>
</tr>
<tr class="even">
<td style="text-align: left;">Business..Management…Administrative</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Diversified</td>
</tr>
<tr class="even">
<td style="text-align: left;">Education…Training</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Finance</td>
</tr>
<tr class="even">
<td style="text-align: left;">Government…Public.Administration</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Health.Science</td>
</tr>
<tr class="even">
<td style="text-align: left;">Hospitality…Tourism</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Human.Services</td>
</tr>
<tr class="even">
<td style="text-align: left;">Information.Technology</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Law..Public.Safety…Security</td>
</tr>
<tr class="even">
<td style="text-align: left;">Manufacturing</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Marketing</td>
</tr>
<tr class="even">
<td style="text-align: left;">Program.Area..Diversified.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Science..Technology..Engineering….Mathematics</td>
</tr>
<tr class="even">
<td style="text-align: left;">STEM</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Transportation..Distribution…Logistics</td>
</tr>
<tr class="even">
<td style="text-align: left;">Work.Experience.Handicapped</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Work.Experience.Handicapped..16.20..on.IEP.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Work.Experience.Career.Exploration..age.14.15.on.I</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Work.Experience.Disadvantaged</td>
</tr>
<tr class="even">
<td style="text-align: left;">Youth.Apprenticeship</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MCA.M</td>
</tr>
<tr class="even">
<td style="text-align: left;">MCA.R</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MCA.S</td>
</tr>
<tr class="even">
<td style="text-align: left;">n.institutions</td>
</tr>
<tr class="odd">
<td style="text-align: left;">avg.unemp.rate</td>
</tr>
<tr class="even">
<td style="text-align: left;">wages.3year.avg</td>
</tr>
<tr class="odd">
<td style="text-align: left;">avg.wages.pct.state</td>
</tr>
<tr class="even">
<td style="text-align: left;">grad.year.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">grad.year.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">grad.year.10</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(master.original))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 0%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 0%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 0%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 0%">
<col style="width: 1%">
<col style="width: 0%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 0%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 0%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 4%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 1%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">PersonID</th>
<th style="text-align: left;">Dem_Desc</th>
<th style="text-align: left;">edr</th>
<th style="text-align: left;">grad.year.covid</th>
<th style="text-align: left;">Gender</th>
<th style="text-align: right;">economic.status</th>
<th style="text-align: right;">pseo.participant</th>
<th style="text-align: right;">SpecialEdStatus</th>
<th style="text-align: left;">RaceEthnicity</th>
<th style="text-align: left;">cte.achievement</th>
<th style="text-align: left;">attended.ps</th>
<th style="text-align: left;">ps.grad</th>
<th style="text-align: left;">ps.grad.InstitutionSector</th>
<th style="text-align: left;">highest.cred.level</th>
<th style="text-align: left;">ps.grad.location</th>
<th style="text-align: left;">ps.grad.in.same.ruca</th>
<th style="text-align: left;">ps.grad.in.same.edr</th>
<th style="text-align: left;">ps.grad.in.same.pr</th>
<th style="text-align: left;">ps.grad.in.MN</th>
<th style="text-align: right;">ACTCompositeScore</th>
<th style="text-align: right;">total.cte.courses.taken</th>
<th style="text-align: right;">ACTE.SPED</th>
<th style="text-align: right;">Agriculture..Food..and.Natural.Resources</th>
<th style="text-align: right;">Architecture…Construction</th>
<th style="text-align: right;">Arts..A.V.Technology…Communication</th>
<th style="text-align: right;">Business..Management…Administrative</th>
<th style="text-align: right;">Diversified</th>
<th style="text-align: right;">Education…Training</th>
<th style="text-align: right;">Finance</th>
<th style="text-align: right;">Government…Public.Administration</th>
<th style="text-align: right;">Health.Science</th>
<th style="text-align: right;">Hospitality…Tourism</th>
<th style="text-align: right;">Human.Services</th>
<th style="text-align: right;">Information.Technology</th>
<th style="text-align: right;">Law..Public.Safety…Security</th>
<th style="text-align: right;">Manufacturing</th>
<th style="text-align: right;">Marketing</th>
<th style="text-align: right;">Program.Area..Diversified.</th>
<th style="text-align: right;">Science..Technology..Engineering….Mathematics</th>
<th style="text-align: right;">STEM</th>
<th style="text-align: right;">Transportation..Distribution…Logistics</th>
<th style="text-align: right;">Work.Experience.Handicapped</th>
<th style="text-align: right;">Work.Experience.Handicapped..16.20..on.IEP.</th>
<th style="text-align: right;">Work.Experience.Career.Exploration..age.14.15.on.I</th>
<th style="text-align: right;">Work.Experience.Disadvantaged</th>
<th style="text-align: right;">Youth.Apprenticeship</th>
<th style="text-align: right;">MCA.M</th>
<th style="text-align: right;">MCA.R</th>
<th style="text-align: right;">MCA.S</th>
<th style="text-align: right;">n.institutions</th>
<th style="text-align: right;">avg.unemp.rate</th>
<th style="text-align: right;">wages.3year.avg</th>
<th style="text-align: right;">avg.wages.pct.state</th>
<th style="text-align: left;">grad.year.1</th>
<th style="text-align: left;">grad.year.5</th>
<th style="text-align: left;">grad.year.10</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">7699638</td>
<td style="text-align: left;">Urban/town/rural mix</td>
<td style="text-align: left;">EDR 10 - Southeast</td>
<td style="text-align: left;">Pre-covid grad</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">White</td>
<td style="text-align: left;">CTE Participant</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">Did not grad</td>
<td style="text-align: left;">Some college</td>
<td style="text-align: left;">Did not graduate ps</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">4.600000</td>
<td style="text-align: right;">42296.67</td>
<td style="text-align: right;">0.8566529</td>
<td style="text-align: left;">Attending ps</td>
<td style="text-align: left;">Attending ps</td>
<td style="text-align: left;">After 2023</td>
</tr>
<tr class="even">
<td style="text-align: right;">2225025</td>
<td style="text-align: left;">Entirely urban</td>
<td style="text-align: left;">EDR 10 - Southeast</td>
<td style="text-align: left;">Pre-covid grad</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">White</td>
<td style="text-align: left;">No CTE</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">Did not grad</td>
<td style="text-align: left;">Some college</td>
<td style="text-align: left;">Did not graduate ps</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">29</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.900000</td>
<td style="text-align: right;">52341.33</td>
<td style="text-align: right;">0.9991283</td>
<td style="text-align: left;">Attending ps</td>
<td style="text-align: left;">Not meaningful, not attending ps</td>
<td style="text-align: left;">After 2023</td>
</tr>
<tr class="odd">
<td style="text-align: right;">10400093</td>
<td style="text-align: left;">Urban/town/rural mix</td>
<td style="text-align: left;">EDR 10 - Southeast</td>
<td style="text-align: left;">Pre-covid grad</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">White</td>
<td style="text-align: left;">CTE Participant</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Y</td>
<td style="text-align: left;">Other</td>
<td style="text-align: left;">Bachelor degree or higher</td>
<td style="text-align: left;">PS grad MN</td>
<td style="text-align: left;">In same RUCA</td>
<td style="text-align: left;">Outside EDR</td>
<td style="text-align: left;">Outside PR</td>
<td style="text-align: left;">In MN</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">4.666667</td>
<td style="text-align: right;">45356.67</td>
<td style="text-align: right;">0.9438229</td>
<td style="text-align: left;">Attending ps</td>
<td style="text-align: left;">Meaningful emp region</td>
<td style="text-align: left;">After 2023</td>
</tr>
<tr class="even">
<td style="text-align: right;">8786746</td>
<td style="text-align: left;">Urban/town/rural mix</td>
<td style="text-align: left;">EDR 10 - Southeast</td>
<td style="text-align: left;">Pre-covid grad</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">White</td>
<td style="text-align: left;">CTE Participant</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Y</td>
<td style="text-align: left;">Other</td>
<td style="text-align: left;">Less than Associate Degree</td>
<td style="text-align: left;">PS grad region</td>
<td style="text-align: left;">In same RUCA</td>
<td style="text-align: left;">Outside EDR</td>
<td style="text-align: left;">In same PR</td>
<td style="text-align: left;">In MN</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4.666667</td>
<td style="text-align: right;">42372.67</td>
<td style="text-align: right;">0.8817291</td>
<td style="text-align: left;">Attending ps</td>
<td style="text-align: left;">Meaningful emp region</td>
<td style="text-align: left;">After 2023</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11122574</td>
<td style="text-align: left;">Urban/town/rural mix</td>
<td style="text-align: left;">EDR 10 - Southeast</td>
<td style="text-align: left;">Pre-covid grad</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">White</td>
<td style="text-align: left;">No CTE</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Y</td>
<td style="text-align: left;">Other</td>
<td style="text-align: left;">Bachelor degree or higher</td>
<td style="text-align: left;">PS grad region</td>
<td style="text-align: left;">In same RUCA</td>
<td style="text-align: left;">Inside and outside same EDR</td>
<td style="text-align: left;">Inside and outside same PR</td>
<td style="text-align: left;">In MN</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">6.000000</td>
<td style="text-align: right;">37203.33</td>
<td style="text-align: right;">0.8676488</td>
<td style="text-align: left;">Attending ps</td>
<td style="text-align: left;">Meaningful emp MN</td>
<td style="text-align: left;">Meaningful emp MN</td>
</tr>
<tr class="even">
<td style="text-align: right;">10181573</td>
<td style="text-align: left;">Entirely urban</td>
<td style="text-align: left;">EDR 10 - Southeast</td>
<td style="text-align: left;">Pre-covid grad</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">White</td>
<td style="text-align: left;">CTE Participant</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Y</td>
<td style="text-align: left;">Other</td>
<td style="text-align: left;">Bachelor degree or higher</td>
<td style="text-align: left;">PS grad MN</td>
<td style="text-align: left;">Inside and outside same RUCA</td>
<td style="text-align: left;">Outside EDR</td>
<td style="text-align: left;">Outside PR</td>
<td style="text-align: left;">In MN</td>
<td style="text-align: right;">33</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">5.466667</td>
<td style="text-align: right;">43477.33</td>
<td style="text-align: right;">1.0312134</td>
<td style="text-align: left;">Not meaningful, not attending ps</td>
<td style="text-align: left;">Attending ps</td>
<td style="text-align: left;">Meaningful emp MN</td>
</tr>
</tbody>
</table>
</div>
</div>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>This analysis explores the use of Classification and Regression Trees (CART) to model the predictors of postsecondary employment outcomes for high school graduates in Southern Minnesota. While previous work has focused on bivariate associations between demographic, high school, and postsecondary characteristics with employment outcomes, this study extends the analysis by constructing predictive models. The primary goal is to identify the variables and decision rules that best distinguish between students who achieve meaningful employment in the Southern Minnesota region and those whose outcomes differ.</p>
<p>To capture the dynamics of post-graduation pathways, the CART models are developed separately for three points in time: one year after graduation, five years after graduation, and ten years after graduation. For each time horizon, three versions of the model are constructed: a base model (full tree grown without constraints), a pre-pruned model (tree growth limited by tuning parameters to prevent overfitting), and a post-pruned model (full tree grown and subsequently pruned for parsimony).</p>
</section>
<section id="methodology" class="level1">
<h1>Methodology</h1>
<section id="dependent-variables" class="level2">
<h2 class="anchored" data-anchor-id="dependent-variables">Dependent Variables</h2>
<p>Three sets of binary employment outcomes are used as dependent variables. Each set compares meaningful employment in the Southern Minnesota region to an alternative outcome:</p>
<ol type="1">
<li><strong>Regional vs.&nbsp;Non-Regional Employment in Minnesota</strong>
<ul>
<li>Group 1: Meaningful employment in the Southern Minnesota region.</li>
<li>Group 2: Meaningful employment elsewhere in Minnesota, outside the region.</li>
</ul></li>
<li><strong>Regional Employment vs.&nbsp;No Meaningful Employment in Minnesota (and not attending postsecondary)</strong>
<ul>
<li>Group 1: Meaningful employment in the Southern Minnesota region.</li>
<li>Group 2: Individuals without meaningful employment anywhere in Minnesota and not attending postsecondary.</li>
</ul></li>
<li><strong>Regional Employment vs.&nbsp;No Minnesota Employment Record (and not attending postsecondary)</strong>
<ul>
<li>Group 1: Meaningful employment in the Southern Minnesota region.</li>
<li>Group 2: Individuals with no Minnesota employment record and not attending postsecondary.</li>
</ul></li>
</ol>
<p>Each dependent variable set is modeled separately for graduates at 1, 5, and 10 years post–high school.</p>
</section>
<section id="independent-variables" class="level2">
<h2 class="anchored" data-anchor-id="independent-variables">Independent Variables</h2>
<p>Independent variables are drawn from those identified as <strong>strong</strong> or <strong>moderate predictors</strong> of regional employment and disconnection in the prior employment relationship analysis. These include a mix of postsecondary, demographic, high school, and accomplishment factors.</p>
<ul>
<li><strong>Postsecondary Factors</strong>
<ul>
<li><strong>ps.grad.location</strong>: Location of postsecondary graduation (Southern MN, other MN, outside MN).</li>
<li><strong>ps.grad</strong>: Whether the individual graduated from postsecondary.</li>
<li><strong>highest.cred.level</strong>: Highest credential level earned.</li>
<li><strong>ps.grad.InstitutionSector</strong>: Sector of postsecondary institution (Public 2-year, Public 4-year, Other).</li>
</ul></li>
<li><strong>Demographic Factors</strong>
<ul>
<li><strong>economic.status</strong>: Low-income status (low-income vs.&nbsp;non-low-income).</li>
<li><strong>SpecialEdStatus</strong>: Whether the student received special education services.</li>
<li><strong>RaceEthnicity</strong>: Persistent disparities across racial/ethnic groups.</li>
<li><strong>Gender</strong>: Gender differences in early postsecondary and employment pathways.</li>
</ul></li>
<li><strong>High School Factors</strong>
<ul>
<li><strong>Dem_Desc</strong>: Rural vs.&nbsp;metro classification of high school origin.</li>
<li><strong>avg.unemp.rate</strong>: Average unemployment rate in the local labor market.</li>
<li><strong>avg.wage.pct.state</strong>: Average local wage levels relative to statewide wages.</li>
</ul></li>
<li><strong>High School Accomplishments</strong>
<ul>
<li><strong>CTE achievement</strong>: Concentrator/completer status in Career and Technical Education.</li>
<li><strong>total.cte.courses.taken</strong>: Number of CTE courses taken.</li>
<li><strong>ACTCompositeScore</strong>: Composite ACT score.</li>
<li><strong>MCA Math, Reading, Science</strong>: Minnesota Comprehensive Assessment scores.</li>
</ul></li>
</ul>
<p>These predictors reflect the strongest and most consistent signals from prior analyses. Collectively, they capture the dual pipeline identified: CTE engagement and 2-year credentials strongly anchor graduates to the regional workforce, while higher academic achievement and 4-year+ credentials are linked to statewide mobility. Disadvantage markers such as low-income and special education status persist as risk factors for disconnection, making them critical to include in predictive modeling.</p>
</section>
<section id="model-construction" class="level2">
<h2 class="anchored" data-anchor-id="model-construction">Model Construction</h2>
<p>For each dependent variable set and time horizon (grad.year.1, grad.year.5, grad.year.10), three CART models are built:</p>
<ol type="1">
<li><strong>Base Model</strong>: A fully grown tree without constraints, designed to maximize classification accuracy on the training data.</li>
<li><strong>Pre-Pruned Model</strong>: A tree grown with restrictions on depth, minimum splits, or complexity parameters to limit overfitting during construction.</li>
<li><strong>Post-Pruned Model</strong>: A fully grown tree subsequently pruned based on cross-validation or complexity parameter criteria to improve interpretability and generalization.</li>
</ol>
<p>This approach allows for direct comparison between unconstrained and optimized models, highlighting both predictive accuracy and interpretability in understanding pathways to meaningful employment in the region.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> master.original <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(economic.status, SpecialEdStatus, RaceEthnicity, Gender, Dem_Desc, avg.unemp.rate, avg.wages.pct.state, cte.achievement, total.cte.courses.taken, ACTCompositeScore, MCA.M, MCA.R, MCA.S, ps.grad, ps.grad.location, ps.grad.InstitutionSector, highest.cred.level, grad.year<span class="fl">.1</span>, grad.year<span class="fl">.5</span>, grad.year<span class="fl">.10</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>data.grad.year<span class="fl">.1</span> <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>ps.grad.location, <span class="sc">-</span>ps.grad, <span class="sc">-</span>highest.cred.level, <span class="sc">-</span>ps.grad.InstitutionSector) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
</section>
</section>
<section id="analysis---meaningful-employment-mn" class="level1">
<h1>Analysis - Meaningful employment MN</h1>
<section id="synthesis-meaningful-employment-in-region-vs.-meaningful-employment-elsewhere-in-minnesota" class="level2">
<h2 class="anchored" data-anchor-id="synthesis-meaningful-employment-in-region-vs.-meaningful-employment-elsewhere-in-minnesota">Synthesis: Meaningful Employment in Region vs.&nbsp;Meaningful Employment Elsewhere in Minnesota</h2>
<section id="main-takeaway" class="level3">
<h3 class="anchored" data-anchor-id="main-takeaway"><strong>Main takeaway</strong></h3>
<p>Across one, five, and ten years after graduation, the models consistently show that <strong>CTE engagement, sub-baccalaureate pathways, and favorable local economic conditions</strong> are the strongest anchors for regional employment in Southern Minnesota. In contrast, <strong>Bachelor’s degree attainment, higher academic achievement, and graduation from outside the region</strong> predict statewide mobility. The split between regional and statewide employment becomes sharper over time, with early CTE anchors persisting and academic pathways leading outward.</p>
<hr>
</section>
<section id="year-1-after-graduation" class="level3">
<h3 class="anchored" data-anchor-id="year-1-after-graduation"><strong>Year 1 after Graduation</strong></h3>
<ul>
<li><strong>Accuracy:</strong> 75.5% (pre-pruned model).</li>
<li><strong>Anchors:</strong> At least one CTE course, favorable local wage environments, and rural/metro differences.</li>
<li><strong>Barriers:</strong> Lack of CTE, weaker wage contexts, and certain racial/ethnic groups showing weaker anchoring.</li>
<li><strong>Interpretation:</strong> In the short term, <strong>CTE exposure and local labor market conditions</strong> are decisive for anchoring students regionally. Academic factors play a smaller role at this stage.</li>
</ul>
<hr>
</section>
<section id="year-5-after-graduation" class="level3">
<h3 class="anchored" data-anchor-id="year-5-after-graduation"><strong>Year 5 after Graduation</strong></h3>
<ul>
<li><strong>Accuracy:</strong> 67.8% (post-pruned model).</li>
<li><strong>Anchors:</strong> CTE concentrator/completer status, sub-baccalaureate credentials, and Minnesota postsecondary graduation within the region.</li>
<li><strong>Barriers:</strong> Bachelor’s degree attainment, very high ACT scores, and graduation from institutions outside Southern MN.</li>
<li><strong>Interpretation:</strong> By year five, <strong>postsecondary pathways and credential type become decisive</strong>. CTE depth and 2-year completions hold students regionally, while 4-year degrees and higher academic achievement increase mobility across the state.</li>
</ul>
<hr>
</section>
<section id="year-10-after-graduation" class="level3">
<h3 class="anchored" data-anchor-id="year-10-after-graduation"><strong>Year 10 after Graduation</strong></h3>
<ul>
<li><strong>Accuracy:</strong> 64.4% (post-pruned model).</li>
<li><strong>Anchors:</strong> Regional postsecondary graduation, sub-baccalaureate credentials, higher local wage environments.</li>
<li><strong>Barriers:</strong> Bachelor’s degrees, high ACT and MCA Reading scores, and low-wage regions.</li>
<li><strong>Interpretation:</strong> At year ten, <strong>regional anchoring depends on local graduation, sub-baccalaureate training, and wage competitiveness</strong>. Academic high achievers and 4-year graduates are firmly pulled into statewide employment markets.</li>
</ul>
<hr>
</section>
<section id="overall-summary" class="level3">
<h3 class="anchored" data-anchor-id="overall-summary"><strong>Overall Summary</strong></h3>
<p>The CART models show a clear dual pipeline:</p>
<ul>
<li><strong>Regional Anchors:</strong> CTE engagement, 2-year/sub-baccalaureate pathways, and favorable local economic conditions consistently increase the likelihood of meaningful employment in Southern Minnesota.</li>
<li><strong>Statewide Mobility:</strong> Bachelor’s degrees, high ACT/MCA scores, and graduation from outside the region push students into broader Minnesota employment markets.</li>
</ul>
<p>The balance between anchors and mobility factors shifts over time: <strong>local CTE and economic conditions matter most early on, while credential level and academic achievement dominate longer-term trajectories.</strong></p>
<hr>
</section>
<section id="policypractice-implications" class="level3">
<h3 class="anchored" data-anchor-id="policypractice-implications"><strong>Policy/Practice Implications</strong></h3>
<ul>
<li><strong>Strengthen CTE pipelines and sub-baccalaureate opportunities</strong> to maintain a strong anchor for the regional workforce.</li>
<li><strong>Support students of color and low-income groups</strong> by connecting CTE pathways to local employers, reducing disparities in regional retention.</li>
<li><strong>Develop regional strategies to retain Bachelor’s degree holders and high academic achievers</strong>, such as internships, competitive wage offerings, and professional pathways tied to local industries.</li>
<li><strong>Sustain competitive local wages</strong> to prevent outward mobility, particularly among graduates who might otherwise seek higher-paying opportunities elsewhere in Minnesota.</li>
</ul>
<p><br></p>
</section>
</section>
<section id="one-year-after-graduation" class="level2">
<h2 class="anchored" data-anchor-id="one-year-after-graduation">One year after graduation</h2>
<p>First I’m going to filter out the data so only individuals that had meaningful employment in the region or Minnesota are in the dataset. In addition, I’m going to remove all the post-secondary variables from the model since those are variables that take place in the future. In addition, I’m going to remove individuals that are currently attending college one year after graduation. This should keep the model clean.</p>
<p>The table below shows that 75% of the individuals have meaningful employment in their high school region compared to 25% that have meaningful employment in Minnesota, but not their region.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>meaningful.emp.mn.grad.year<span class="fl">.1</span> <span class="ot">&lt;-</span> data.grad.year<span class="fl">.1</span> <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>grad.year<span class="fl">.5</span>, <span class="sc">-</span>grad.year<span class="fl">.10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(grad.year<span class="fl">.1</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Meaningful emp region"</span>, <span class="st">"Meaningful emp MN"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">grad.year.1 =</span> <span class="fu">as.factor</span>(grad.year<span class="fl">.1</span>))</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">comma</span>(<span class="fu">nrow</span>(meaningful.emp.mn.grad.year<span class="fl">.1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "21,470"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(<span class="at">data =</span> meaningful.emp.mn.grad.year<span class="fl">.1</span> <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>            <span class="fu">group_by</span>(grad.year<span class="fl">.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>            <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mutate</span>(<span class="at">pct =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>            <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>),</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">class =</span> <span class="st">"cell-border stripe"</span>, </span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">filter =</span> <span class="st">"top"</span>, </span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">rownames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>          <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">columnDefs =</span> <span class="fu">list</span>(<span class="fu">list</span>(<span class="at">className =</span> <span class="st">"dt-center"</span>, <span class="at">targets =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)))) <span class="sc">%&gt;%</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatCurrency</span>(<span class="dv">2</span>, <span class="st">""</span>, <span class="at">digits =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatPercentage</span>(<span class="dv">3</span>, <span class="at">digits =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-a1957b4c498fa295790e" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-a1957b4c498fa295790e">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Meaningful emp MN&quot;,&quot;Meaningful emp region&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"5332\" data-max=\"16138\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0.248346530041918\" data-max=\"0.751653469958081\" data-scale=\"15\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["Meaningful emp MN","Meaningful emp region"],[5332,16138],[0.248346530041919,0.751653469958081]],"container":"<table class=\"cell-border stripe\">\n  <thead>\n    <tr>\n      <th>grad.year.1<\/th>\n      <th>n<\/th>\n      <th>pct<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"targets":2,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatPercentage(data, 1, 3, \",\", \".\", null);\n  }"},{"targets":1,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatCurrency(data, \"\", 0, 3, \",\", \".\", true, null);\n  }"},{"className":"dt-center","targets":[1,2]},{"name":"grad.year.1","targets":0},{"name":"n","targets":1},{"name":"pct","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":["options.columnDefs.0.render","options.columnDefs.1.render"],"jsHooks":[]}</script>
</div>
</div>
<p><br></p>
<section id="base-model" class="level3">
<h3 class="anchored" data-anchor-id="base-model">Base Model</h3>
<p>I know the base model is going to overfit and provide an overly complex tree due to having a cost penalty of 0. So I’m just going to print the complexity plot in order to see what the appropriate CP would be to minimize xerror.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>sample_ind <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">nrow</span>(meaningful.emp.mn.grad.year<span class="fl">.1</span>), <span class="fu">nrow</span>(meaningful.emp.mn.grad.year<span class="fl">.1</span>) <span class="sc">*</span>.<span class="dv">7</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> meaningful.emp.mn.grad.year<span class="fl">.1</span>[sample_ind,]</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> meaningful.emp.mn.grad.year<span class="fl">.1</span>[<span class="sc">-</span>sample_ind,]</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Base model</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>meaningful.emp.mn.grad.year.<span class="fl">1.</span>model <span class="ot">&lt;-</span> <span class="fu">rpart</span>(grad.year<span class="fl">.1</span> <span class="sc">~</span> ., <span class="at">data =</span> train, <span class="at">method =</span> <span class="st">"class"</span>, <span class="at">control =</span> <span class="fu">rpart.control</span>(<span class="at">cp =</span> <span class="dv">0</span>))</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Accuracy</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(meaningful.emp.mn.grad.year.<span class="fl">1.</span>model, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>accuracy_base <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.1</span>)</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="fu">percent</span>(accuracy_base, <span class="at">accuracy =</span> .<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "71.5%"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(meaningful.emp.mn.grad.year.<span class="fl">1.</span>model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.1 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0))

Variables actually used in tree construction:
 [1] ACTCompositeScore       avg.unemp.rate          avg.wages.pct.state    
 [4] cte.achievement         Dem_Desc                economic.status        
 [7] Gender                  MCA.M                   MCA.R                  
[10] MCA.S                   RaceEthnicity           SpecialEdStatus        
[13] total.cte.courses.taken

Root node error: 3737/15028 = 0.24867

n= 15028 

           CP nsplit rel error  xerror     xstd
1  4.3261e-03      0   1.00000 1.00000 0.014179
2  2.1408e-03      6   0.97404 0.97725 0.014070
3  1.6056e-03      7   0.97190 0.98047 0.014085
4  1.1596e-03      9   0.96869 0.98020 0.014084
5  1.0704e-03     13   0.96387 0.98047 0.014085
6  8.0278e-04     15   0.96173 0.98261 0.014096
7  6.4223e-04     17   0.96013 0.98769 0.014120
8  5.3519e-04     26   0.95237 0.99438 0.014153
9  4.8167e-04     29   0.95076 1.00615 0.014208
10 4.6829e-04     61   0.92909 1.00803 0.014217
11 4.4599e-04     65   0.92721 1.00803 0.014217
12 4.0139e-04     68   0.92588 1.01846 0.014266
13 3.5679e-04    137   0.89430 1.03184 0.014327
14 3.3449e-04    158   0.88681 1.04950 0.014407
15 3.2111e-04    194   0.87129 1.05860 0.014447
16 2.6759e-04    217   0.86246 1.08081 0.014543
17 2.4083e-04    274   0.84533 1.09125 0.014587
18 2.2937e-04    286   0.84212 1.09874 0.014618
19 2.1408e-04    293   0.84051 1.11025 0.014665
20 2.0070e-04    303   0.83837 1.11667 0.014691
21 1.7840e-04    307   0.83757 1.13166 0.014752
22 1.6056e-04    324   0.83409 1.14209 0.014793
23 1.3380e-04    349   0.83008 1.15842 0.014856
24 1.1893e-04    390   0.82312 1.15895 0.014858
25 1.1468e-04    399   0.82205 1.16323 0.014874
26 1.0704e-04    406   0.82125 1.16537 0.014882
27 8.9198e-05    411   0.82071 1.17608 0.014922
28 6.6899e-05    430   0.81830 1.18036 0.014938
29 5.9465e-05    453   0.81670 1.18571 0.014958
30 5.3519e-05    462   0.81616 1.18758 0.014965
31 4.4599e-05    472   0.81563 1.18919 0.014971
32 3.3449e-05    478   0.81536 1.18919 0.014971
33 0.0000e+00    486   0.81509 1.19106 0.014977</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(meaningful.emp.mn.grad.year.<span class="fl">1.</span>model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Key takeaways from base tree results</strong></p>
<ul>
<li>Accuracy: 71.5%</li>
<li>The tree is using <strong>13 variables</strong> from demographics, high school characteristics, and high school accomplishments
<ul>
<li>Demographics: 4/4</li>
<li>HS Characteristics: 3/3</li>
<li>HS Accomplishments: 6/6</li>
</ul></li>
<li>The lowest cross-validation error (xerror)
<ul>
<li>Step: 2</li>
<li>xerror: 0.97725</li>
<li>cp: 2.1408e-03</li>
<li>splits: 6</li>
</ul></li>
<li>Total splits: 486</li>
</ul>
<p><br></p>
</section>
<section id="pre-pruning" class="level3">
<h3 class="anchored" data-anchor-id="pre-pruning">Pre-pruning</h3>
<p>Next, we need to prune. We can either pre-prune or post-prune. We will start with pre-pruning and use each method - max depth, min depth, and min bucket. It’s recommended that I start with the following parameters;</p>
<ul>
<li>maxdepth: 5</li>
<li>minsplit: round(2% of nrow(train)).</li>
<li>minbucket: round(minsplit / 3).</li>
<li>cp = 0</li>
</ul>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>maxdepth <span class="ot">=</span> <span class="dv">5</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>minsplit <span class="ot">=</span> <span class="fu">round</span>(.<span class="dv">02</span><span class="sc">*</span><span class="fu">nrow</span>(train))</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>minbucket <span class="ot">=</span> <span class="fu">round</span>(minsplit <span class="sc">/</span> <span class="dv">3</span>)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>meaningful.emp.mn.grad.year.<span class="fl">1.</span>model.preprune <span class="ot">&lt;-</span> <span class="fu">rpart</span>(grad.year<span class="fl">.1</span> <span class="sc">~</span> ., <span class="at">data =</span> train, <span class="at">method =</span> <span class="st">"class"</span>, </span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>                   <span class="at">control =</span> <span class="fu">rpart.control</span>(<span class="at">cp =</span> <span class="dv">0</span>, <span class="at">maxdepth =</span> maxdepth, <span class="at">minsplit =</span> minsplit, <span class="at">minbucket =</span> minbucket))</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Accuracy</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(meaningful.emp.mn.grad.year.<span class="fl">1.</span>model.preprune, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>accuracy_preprun <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.1</span>)</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="fu">percent</span>(accuracy_preprun, <span class="at">accuracy =</span> .<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "75.5%"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(meaningful.emp.mn.grad.year.<span class="fl">1.</span>model.preprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.1 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0, maxdepth = maxdepth, minsplit = minsplit, 
        minbucket = minbucket))

Variables actually used in tree construction:
[1] avg.unemp.rate          avg.wages.pct.state     RaceEthnicity          
[4] total.cte.courses.taken

Root node error: 3737/15028 = 0.24867

n= 15028 

         CP nsplit rel error  xerror     xstd
1 0.0038534      0   1.00000 1.00000 0.014179
2 0.0000000      5   0.98073 0.98448 0.014105</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(meaningful.emp.mn.grad.year.<span class="fl">1.</span>model.preprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Accuracy: 71.5% -&gt; 75.5%</li>
<li>The tree is using <strong>4 variables</strong>
<ul>
<li>Demographics: 1/4 - Race and ethnicity</li>
<li>HS characteristics: 2/3 - unemployment, wages</li>
<li>HS accomplishments: 1 - CTE</li>
</ul></li>
<li>The lowest cross-validation error (xerror)
<ul>
<li>Step: 2</li>
<li>xerror: 0.98448</li>
<li>cp: 0</li>
<li>splits: 5</li>
</ul></li>
<li>Total splits: 5</li>
</ul>
<p><br></p>
</section>
<section id="post-pruning" class="level3">
<h3 class="anchored" data-anchor-id="post-pruning">Post-pruning</h3>
<p>The idea here is to allow the decision tree to grow fully and observe the CP value. There are two methods for identifying the CP code;</p>
<ol type="1">
<li>Use the cp value with the lowest xerror from the base model.</li>
<li>Use the cp value with the next lowest xerror that is within the standard error.</li>
</ol>
<p>Since the lowest xerror had a CP = 0, we will use the 1-SE rule.</p>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>cp_table <span class="ot">&lt;-</span> meaningful.emp.mn.grad.year.<span class="fl">1.</span>model.preprune<span class="sc">$</span>cptable</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>min_xerror <span class="ot">&lt;-</span> <span class="fu">min</span>(cp_table[, <span class="st">"xerror"</span>])</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>min_xerror_se <span class="ot">&lt;-</span> cp_table[<span class="fu">which.min</span>(cp_table[,<span class="st">"xerror"</span>]), <span class="st">"xstd"</span>]</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>threshold <span class="ot">&lt;-</span> min_xerror <span class="sc">+</span> min_xerror_se</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>one_se_index <span class="ot">&lt;-</span> <span class="fu">which</span>(cp_table[, <span class="st">"xerror"</span>] <span class="sc">&lt;=</span> threshold)[<span class="dv">1</span>] </span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>cp_1se <span class="ot">&lt;-</span> cp_table[one_se_index, <span class="st">"CP"</span>]</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>optimal_cp <span class="ot">&lt;-</span> meaningful.emp.mn.grad.year.<span class="fl">1.</span>model.preprune<span class="sc">$</span>cptable[<span class="fu">which.min</span>(meaningful.emp.mn.grad.year.<span class="fl">1.</span>model.preprune<span class="sc">$</span>cptable[, <span class="st">"xerror"</span>]), <span class="st">"CP"</span>]</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Prune the hr_base_model based on the optimal cp value</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>meaningful.emp.mn.grad.year.<span class="fl">1.</span>model.postprune <span class="ot">&lt;-</span> rpart<span class="sc">::</span><span class="fu">prune</span>(meaningful.emp.mn.grad.year.<span class="fl">1.</span>model.preprune, <span class="at">cp =</span> cp_1se)</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute the accuracy of the pruned tree</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(meaningful.emp.mn.grad.year.<span class="fl">1.</span>model.postprune, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>accuracy_postprun <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.1</span>)</span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a><span class="fu">percent</span>(accuracy_postprun, <span class="at">accuracy =</span> .<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "75.5%"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(meaningful.emp.mn.grad.year.<span class="fl">1.</span>model.postprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.1 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0, maxdepth = maxdepth, minsplit = minsplit, 
        minbucket = minbucket))

Variables actually used in tree construction:
[1] avg.unemp.rate          avg.wages.pct.state     RaceEthnicity          
[4] total.cte.courses.taken

Root node error: 3737/15028 = 0.24867

n= 15028 

         CP nsplit rel error  xerror     xstd
1 0.0038534      0   1.00000 1.00000 0.014179
2 0.0000000      5   0.98073 0.98448 0.014105</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(meaningful.emp.mn.grad.year.<span class="fl">1.</span>model.postprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Accuracy: 75.5% -&gt; 75.5%</li>
<li>The tree is using <strong>4 variables</strong>
<ul>
<li>Demographics: 1/4 - Race and ethnicity</li>
<li>HS characteristics: 2/3 - unemployment, wages</li>
<li>HS accomplishments: 1 - CTE</li>
</ul></li>
<li>The lowest cross-validation error (xerror)
<ul>
<li>Step: 2</li>
<li>xerror: 0.98448</li>
<li>cp: 0</li>
<li>splits: 5</li>
</ul></li>
<li>Total splits: 5</li>
</ul>
<p>So, the accuracy of these are;</p>
<ul>
<li>Base model: 71.5%</li>
<li>Pre-pruned model: 75.5%</li>
<li>Post-pruned model: 75.5%</li>
</ul>
<p>The post-pruned model and the pre-pruned model are the same. So I will just use the pre-pruned model.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot tree</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rpart.plot</span>(meaningful.emp.mn.grad.year.<span class="fl">1.</span>model.preprune, <span class="at">nn =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="main-takeaway-1" class="level3">
<h3 class="anchored" data-anchor-id="main-takeaway-1"><strong>Main takeaway</strong></h3>
<p>At one year after graduation, <strong>regional employment is strongly anchored by CTE course-taking, local labor market conditions (unemployment, wages), and race/ethnicity</strong>. Students with some CTE exposure, in stronger local economies, are much more likely to remain in Southern Minnesota for meaningful employment.</p>
</section>
<section id="key-findings" class="level3">
<h3 class="anchored" data-anchor-id="key-findings"><strong>Key Findings</strong></h3>
<ul>
<li><strong>Model accuracy:</strong> 75.5% (pre-pruned model, 5 splits).</li>
<li><strong>Most important predictors:</strong> <em>Race/Ethnicity</em>, <em>total CTE courses taken</em>, <em>local unemployment rate (avg.unemp.rate)</em>, and <em>local wage levels relative to the state (avg.wages.pct.state)</em>.</li>
<li><strong>Overall pattern:</strong> Anchors for regional employment emerge from a combination of <strong>CTE engagement</strong> and <strong>favorable economic conditions</strong>.</li>
</ul>
</section>
<section id="interpretation" class="level3">
<h3 class="anchored" data-anchor-id="interpretation"><strong>Interpretation</strong></h3>
<ul>
<li><strong>Race/Ethnicity:</strong> For American Indian, Asian/Pacific Islander, and Black students, regional employment rates were lower overall, though still above 50%. White and Hispanic students showed stronger anchoring in the region.</li>
<li><strong>CTE course-taking:</strong> Students with at least one CTE course were more likely to remain regionally employed; lack of CTE exposure combined with weaker local wage environments increased the chance of statewide mobility.</li>
<li><strong>Local economic context:</strong>
<ul>
<li>Low local unemployment (&lt;3%) combined with certain race/ethnicity groups increased the likelihood of statewide rather than regional employment.</li>
<li>Higher local wages (≥0.92 of the state average) anchored students more securely in the region.</li>
<li>Moderate wages and no CTE exposure increased risk of statewide mobility.</li>
</ul></li>
</ul>
</section>
<section id="decision-tree-interpretation" class="level3">
<h3 class="anchored" data-anchor-id="decision-tree-interpretation"><strong>Decision Tree Interpretation</strong></h3>
<ul>
<li><strong>Root split:</strong> Race/Ethnicity. Students of color (AI, Asian/PI, Black) were somewhat less likely to be anchored regionally, with stronger effects in low-unemployment areas.</li>
<li><strong>Second layer:</strong> For White/Hispanic students, <em>CTE exposure</em> was decisive. Having at least one CTE course strongly pushed students toward regional employment.</li>
<li><strong>Economic context:</strong> Among students without CTE exposure, <em>wage levels</em> differentiated outcomes. Moderate-to-high wages anchored them regionally, while weaker wages tipped some toward statewide employment.</li>
</ul>
</section>
<section id="summary" class="level3">
<h3 class="anchored" data-anchor-id="summary"><strong>Summary</strong></h3>
<p>At one year after graduation, <strong>CTE course-taking and favorable local economic conditions (low unemployment, higher relative wages) are the strongest anchors for meaningful regional employment</strong>. Race/ethnicity plays a role, with students of color showing somewhat weaker regional retention, especially in stronger job markets. The lack of CTE exposure, particularly when combined with weaker wages, increases the likelihood of graduates finding employment elsewhere in Minnesota.</p>
</section>
<section id="policypractice-implications-1" class="level3">
<h3 class="anchored" data-anchor-id="policypractice-implications-1"><strong>Policy/Practice Implications</strong></h3>
<p>This suggests that <strong>expanding CTE access and depth</strong> can help strengthen early regional workforce attachment. Additionally, <strong>supporting students of color with pathways that connect CTE engagement to regional employers</strong> may reduce disparities in retention. Local wage and employment conditions clearly shape outcomes, meaning that <strong>partnerships with regional industries to maintain competitive wages</strong> could further anchor graduates in Southern Minnesota.</p>
<p><br></p>
</section>
</section>
<section id="five-years-after-graduation" class="level2">
<h2 class="anchored" data-anchor-id="five-years-after-graduation">Five years after graduation</h2>
<p>I’m going to follow the same process as the one year after graduation process, but I’m going to add in the post-secondary variables now.</p>
<p>The table below shows a bit more balanced classifications with 63% of the individuals having meaningful employment in their high school region compared to 38% that have meaningful employment in Minnesota, but not their region.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>meaningful.emp.mn.grad.year<span class="fl">.5</span> <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>grad.year<span class="fl">.1</span>, <span class="sc">-</span>grad.year<span class="fl">.10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(grad.year<span class="fl">.5</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Meaningful emp region"</span>, <span class="st">"Meaningful emp MN"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">grad.year.5 =</span> <span class="fu">as.factor</span>(grad.year<span class="fl">.5</span>))</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="fu">comma</span>(<span class="fu">nrow</span>(meaningful.emp.mn.grad.year<span class="fl">.5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "36,492"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(<span class="at">data =</span> meaningful.emp.mn.grad.year<span class="fl">.5</span> <span class="sc">%&gt;%</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>            <span class="fu">group_by</span>(grad.year<span class="fl">.5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>            <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mutate</span>(<span class="at">pct =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>            <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>),</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">class =</span> <span class="st">"cell-border stripe"</span>, </span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">filter =</span> <span class="st">"top"</span>, </span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">rownames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>          <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">columnDefs =</span> <span class="fu">list</span>(<span class="fu">list</span>(<span class="at">className =</span> <span class="st">"dt-center"</span>, <span class="at">targets =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)))) <span class="sc">%&gt;%</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatCurrency</span>(<span class="dv">2</span>, <span class="st">""</span>, <span class="at">digits =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatPercentage</span>(<span class="dv">3</span>, <span class="at">digits =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-f0cf9679aead359f7a75" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-f0cf9679aead359f7a75">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Meaningful emp MN&quot;,&quot;Meaningful emp region&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"13692\" data-max=\"22800\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0.37520552449852\" data-max=\"0.62479447550148\" data-scale=\"15\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["Meaningful emp MN","Meaningful emp region"],[13692,22800],[0.3752055244985202,0.6247944755014798]],"container":"<table class=\"cell-border stripe\">\n  <thead>\n    <tr>\n      <th>grad.year.5<\/th>\n      <th>n<\/th>\n      <th>pct<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"targets":2,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatPercentage(data, 1, 3, \",\", \".\", null);\n  }"},{"targets":1,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatCurrency(data, \"\", 0, 3, \",\", \".\", true, null);\n  }"},{"className":"dt-center","targets":[1,2]},{"name":"grad.year.5","targets":0},{"name":"n","targets":1},{"name":"pct","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":["options.columnDefs.0.render","options.columnDefs.1.render"],"jsHooks":[]}</script>
</div>
</div>
<p><br></p>
<section id="base-model-1" class="level3">
<h3 class="anchored" data-anchor-id="base-model-1">Base Model</h3>
<p>I know the base model is going to overfit and provide an overly complex tree due to having a cost penalty of 0. So I’m just going to print the complexity plot in order to see what the appropriate CP would be to minimize xerror.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>sample_ind <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">nrow</span>(meaningful.emp.mn.grad.year<span class="fl">.5</span>), <span class="fu">nrow</span>(meaningful.emp.mn.grad.year<span class="fl">.5</span>) <span class="sc">*</span>.<span class="dv">7</span>)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> meaningful.emp.mn.grad.year<span class="fl">.5</span>[sample_ind,]</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> meaningful.emp.mn.grad.year<span class="fl">.5</span>[<span class="sc">-</span>sample_ind,]</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Base model</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>meaningful.emp.mn.grad.year.<span class="fl">5.</span>model <span class="ot">&lt;-</span> <span class="fu">rpart</span>(grad.year<span class="fl">.5</span> <span class="sc">~</span> ., <span class="at">data =</span> train, <span class="at">method =</span> <span class="st">"class"</span>, <span class="at">control =</span> <span class="fu">rpart.control</span>(<span class="at">cp =</span> <span class="dv">0</span>))</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Accuracy</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(meaningful.emp.mn.grad.year.<span class="fl">5.</span>model, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>accuracy_base <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.5</span>)</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a><span class="fu">percent</span>(accuracy_base, <span class="at">accuracy =</span> .<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "62.4%"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(meaningful.emp.mn.grad.year.<span class="fl">5.</span>model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.5 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0))

Variables actually used in tree construction:
 [1] ACTCompositeScore         avg.unemp.rate           
 [3] avg.wages.pct.state       cte.achievement          
 [5] Dem_Desc                  economic.status          
 [7] Gender                    highest.cred.level       
 [9] MCA.M                     MCA.R                    
[11] MCA.S                     ps.grad                  
[13] ps.grad.InstitutionSector ps.grad.location         
[15] RaceEthnicity             SpecialEdStatus          
[17] total.cte.courses.taken  

Root node error: 9507/25544 = 0.37218

n= 25544 

           CP nsplit rel error  xerror      xstd
1  1.3106e-01      0   1.00000 1.00000 0.0081263
2  6.1008e-03      1   0.86894 0.86894 0.0078639
3  4.9437e-03      2   0.86284 0.86999 0.0078664
4  4.5931e-03      3   0.85789 0.86547 0.0078557
5  3.7867e-03      6   0.84411 0.85895 0.0078400
6  3.0504e-03      7   0.84033 0.85316 0.0078259
7  2.4193e-03      8   0.83728 0.84843 0.0078142
8  1.9985e-03      9   0.83486 0.84496 0.0078056
9  1.4726e-03     14   0.82487 0.84285 0.0078003
10 1.3674e-03     15   0.82339 0.83886 0.0077902
11 9.9926e-04     17   0.82066 0.83507 0.0077806
12 9.4667e-04     19   0.81866 0.83128 0.0077709
13 6.8371e-04     20   0.81771 0.83297 0.0077752
14 6.3111e-04     24   0.81498 0.83707 0.0077857
15 5.7852e-04     26   0.81372 0.84001 0.0077932
16 5.2593e-04     30   0.81140 0.84085 0.0077953
17 4.7918e-04     35   0.80867 0.84317 0.0078011
18 4.5580e-04     62   0.79226 0.84327 0.0078014
19 4.2074e-04     69   0.78889 0.84411 0.0078035
20 3.9445e-04     96   0.77638 0.84695 0.0078106
21 3.7867e-04    100   0.77480 0.84727 0.0078114
22 3.6815e-04    112   0.77017 0.84906 0.0078158
23 3.5062e-04    120   0.76722 0.85085 0.0078202
24 3.1556e-04    134   0.76207 0.85127 0.0078213
25 2.8926e-04    158   0.75429 0.85327 0.0078262
26 2.8050e-04    175   0.74840 0.85674 0.0078347
27 2.7348e-04    189   0.74377 0.85726 0.0078359
28 2.6296e-04    194   0.74240 0.85758 0.0078367
29 2.5245e-04    219   0.73483 0.85937 0.0078410
30 2.4543e-04    224   0.73356 0.85926 0.0078408
31 2.3141e-04    227   0.73283 0.85989 0.0078423
32 2.1037e-04    251   0.72315 0.87083 0.0078684
33 1.9284e-04    386   0.69191 0.87609 0.0078806
34 1.8933e-04    398   0.68907 0.88146 0.0078930
35 1.8700e-04    404   0.68791 0.88146 0.0078930
36 1.8407e-04    419   0.68497 0.88261 0.0078957
37 1.8032e-04    431   0.68276 0.88303 0.0078966
38 1.7531e-04    438   0.68150 0.88303 0.0078966
39 1.6830e-04    452   0.67897 0.88745 0.0079067
40 1.5778e-04    457   0.67813 0.88871 0.0079095
41 1.4726e-04    528   0.66551 0.89492 0.0079234
42 1.4025e-04    533   0.66477 0.90018 0.0079349
43 1.3148e-04    557   0.66130 0.90302 0.0079411
44 1.2622e-04    571   0.65920 0.90523 0.0079459
45 1.0519e-04    625   0.65078 0.92427 0.0079860
46 9.3498e-05    800   0.63101 0.93131 0.0080004
47 8.7655e-05    817   0.62922 0.93363 0.0080050
48 8.4149e-05    830   0.62806 0.93678 0.0080113
49 7.8889e-05    867   0.62417 0.93762 0.0080130
50 7.3630e-05    896   0.62175 0.94425 0.0080260
51 7.0124e-05    909   0.62070 0.94415 0.0080258
52 6.3111e-05    956   0.61712 0.94688 0.0080311
53 6.0106e-05    986   0.61470 0.94699 0.0080313
54 5.2593e-05    993   0.61428 0.95877 0.0080537
55 4.8547e-05   1058   0.61081 0.95877 0.0080537
56 4.5080e-05   1074   0.60976 0.96035 0.0080567
57 4.2074e-05   1084   0.60924 0.96192 0.0080596
58 3.9445e-05   1094   0.60881 0.96213 0.0080600
59 3.5062e-05   1102   0.60850 0.96634 0.0080677
60 2.6296e-05   1129   0.60755 0.96718 0.0080693
61 2.1037e-05   1155   0.60682 0.97202 0.0080780
62 1.7531e-05   1165   0.60661 0.97318 0.0080801
63 0.0000e+00   1173   0.60640 0.97370 0.0080810</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(meaningful.emp.mn.grad.year.<span class="fl">5.</span>model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Key takeaways from base tree results</strong></p>
<ul>
<li>Accuracy: 62.4%</li>
<li>The tree is using <strong>17/17 variables</strong>
<ul>
<li>Demographics: 4/4</li>
<li>HS characteristics: 3/3</li>
<li>HS accomplishments: 6/6</li>
<li>Post-secondary: 4/4</li>
</ul></li>
<li>The lowest cross-validation error (xerror)
<ul>
<li>Step: 12</li>
<li>xerror: 0.83128</li>
<li>cp: 9.4667e-04</li>
<li>splits: 19</li>
</ul></li>
<li>Total splits: 1,173</li>
</ul>
<p><br></p>
</section>
<section id="pre-pruning-1" class="level3">
<h3 class="anchored" data-anchor-id="pre-pruning-1">Pre-pruning</h3>
<p>Next, we need to prune. We can either pre-prune or post-prune. We will start with pre-pruning and use each method - max depth, min depth, and min bucket. It’s recommended that I start with the following parameters;</p>
<ul>
<li>maxdepth: 5</li>
<li>minsplit: round(2% of nrow(train)) which is 371.</li>
<li>minbucket: round(minsplit / 3) which is 124</li>
<li>cp = 0</li>
</ul>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>maxdepth <span class="ot">=</span> <span class="dv">5</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>minsplit <span class="ot">=</span> <span class="fu">round</span>(.<span class="dv">02</span><span class="sc">*</span><span class="fu">nrow</span>(train))</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>minbucket <span class="ot">=</span> <span class="fu">round</span>(minsplit <span class="sc">/</span> <span class="dv">3</span>)</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>meaningful.emp.mn.grad.year.<span class="fl">5.</span>model.preprune <span class="ot">&lt;-</span> <span class="fu">rpart</span>(grad.year<span class="fl">.5</span> <span class="sc">~</span> ., <span class="at">data =</span> train, <span class="at">method =</span> <span class="st">"class"</span>, </span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>                   <span class="at">control =</span> <span class="fu">rpart.control</span>(<span class="at">cp =</span> <span class="dv">0</span>, <span class="at">maxdepth =</span> maxdepth, <span class="at">minsplit =</span> minsplit, <span class="at">minbucket =</span> minbucket))</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Accuracy</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(meaningful.emp.mn.grad.year.<span class="fl">5.</span>model.preprune, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>accuracy_preprun <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.5</span>)</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a><span class="fu">percent</span>(accuracy_preprun, <span class="at">accuracy =</span> .<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "67.8%"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(meaningful.emp.mn.grad.year.<span class="fl">5.</span>model.preprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.5 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0, maxdepth = maxdepth, minsplit = minsplit, 
        minbucket = minbucket))

Variables actually used in tree construction:
[1] ACTCompositeScore         cte.achievement          
[3] Dem_Desc                  highest.cred.level       
[5] ps.grad.InstitutionSector ps.grad.location         
[7] total.cte.courses.taken  

Root node error: 9507/25544 = 0.37218

n= 25544 

         CP nsplit rel error  xerror      xstd
1 0.1310613      0   1.00000 1.00000 0.0081263
2 0.0061008      1   0.86894 0.86894 0.0078639
3 0.0049437      2   0.86284 0.86747 0.0078604
4 0.0045931      3   0.85789 0.86126 0.0078456
5 0.0037867      6   0.84411 0.85295 0.0078254
6 0.0011570      7   0.84033 0.84790 0.0078129
7 0.0000000      8   0.83917 0.84759 0.0078122</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(meaningful.emp.mn.grad.year.<span class="fl">5.</span>model.preprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Takeaways</strong></p>
<ul>
<li>Accuracy: 62.4% -&gt; 67.8%</li>
<li>The tree is using <strong>7/17 variables</strong>
<ul>
<li>Demographics: 0/4</li>
<li>HS characteristics: 1/3 - rural-ness</li>
<li>HS accomplishments: 3/6 - ACT &amp; CTE</li>
<li>Post-secondary: 3/4 - highest credential, grad location, graduated</li>
</ul></li>
<li>The lowest cross-validation error (xerror)
<ul>
<li>Step: 7</li>
<li>xerror: 0.84759</li>
<li>cp: 0</li>
<li>splits: 8</li>
</ul></li>
<li>Total splits: 8</li>
</ul>
<p><br></p>
</section>
<section id="post-pruning-1" class="level3">
<h3 class="anchored" data-anchor-id="post-pruning-1">Post-pruning</h3>
<p>The idea here is to allow the decision tree to grow fully and observe the CP value. There are two methods for identifying the CP code;</p>
<ol type="1">
<li><p>Use the cp value with the lowest xerror from the base model.</p></li>
<li><p>Use the cp value with the next lowest xerror that is within the standard error.</p></li>
</ol>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>cp_table <span class="ot">&lt;-</span> meaningful.emp.mn.grad.year.<span class="fl">5.</span>model.preprune<span class="sc">$</span>cptable</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>min_xerror <span class="ot">&lt;-</span> <span class="fu">min</span>(cp_table[, <span class="st">"xerror"</span>])</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>min_xerror_se <span class="ot">&lt;-</span> cp_table[<span class="fu">which.min</span>(cp_table[,<span class="st">"xerror"</span>]), <span class="st">"xstd"</span>]</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>threshold <span class="ot">&lt;-</span> min_xerror <span class="sc">+</span> min_xerror_se</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>one_se_index <span class="ot">&lt;-</span> <span class="fu">which</span>(cp_table[, <span class="st">"xerror"</span>] <span class="sc">&lt;=</span> threshold)[<span class="dv">1</span>] </span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>cp_1se <span class="ot">&lt;-</span> cp_table[one_se_index, <span class="st">"CP"</span>]</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>optimal_cp <span class="ot">&lt;-</span> meaningful.emp.mn.grad.year.<span class="fl">5.</span>model.preprune<span class="sc">$</span>cptable[<span class="fu">which.min</span>(meaningful.emp.mn.grad.year.<span class="fl">5.</span>model.preprune<span class="sc">$</span>cptable[, <span class="st">"xerror"</span>]), <span class="st">"CP"</span>]</span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Prune the hr_base_model based on the optimal cp value</span></span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>meaningful.emp.mn.grad.year.<span class="fl">5.</span>model.postprune <span class="ot">&lt;-</span> rpart<span class="sc">::</span><span class="fu">prune</span>(meaningful.emp.mn.grad.year.<span class="fl">5.</span>model.preprune, <span class="at">cp =</span> cp_1se)</span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute the accuracy of the pruned tree</span></span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(meaningful.emp.mn.grad.year.<span class="fl">5.</span>model.postprune, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a>accuracy_postprun <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.5</span>)</span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-24"><a href="#cb36-24" aria-hidden="true" tabindex="-1"></a><span class="fu">percent</span>(accuracy_postprun, <span class="at">accuracy =</span> .<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "67.8%"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(meaningful.emp.mn.grad.year.<span class="fl">5.</span>model.postprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.5 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0, maxdepth = maxdepth, minsplit = minsplit, 
        minbucket = minbucket))

Variables actually used in tree construction:
[1] ACTCompositeScore         cte.achievement          
[3] highest.cred.level        ps.grad.InstitutionSector
[5] ps.grad.location          total.cte.courses.taken  

Root node error: 9507/25544 = 0.37218

n= 25544 

         CP nsplit rel error  xerror      xstd
1 0.1310613      0   1.00000 1.00000 0.0081263
2 0.0061008      1   0.86894 0.86894 0.0078639
3 0.0049437      2   0.86284 0.86747 0.0078604
4 0.0045931      3   0.85789 0.86126 0.0078456
5 0.0037867      6   0.84411 0.85295 0.0078254</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(meaningful.emp.mn.grad.year.<span class="fl">5.</span>model.postprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Accuracy: 67.8% -&gt; 67.8%</li>
<li>The tree is using <strong>6/17 variables</strong>
<ul>
<li>Demographics: 0/4</li>
<li>HS characteristics: 0/3 -</li>
<li>HS accomplishments: 3/6 - ACT &amp; CTE</li>
<li>Post-secondary: 3/4 - highest credential, grad location, graduated</li>
</ul></li>
<li>The lowest cross-validation error (xerror)
<ul>
<li>Step: 5</li>
<li>xerror: 0.85295</li>
<li>cp: 0.0037867</li>
<li>splits: 6</li>
</ul></li>
<li>Total splits: 6</li>
</ul>
<p>So, the accuracy of these are;</p>
<ul>
<li>Base model: 62.4%</li>
<li>Pre-pruned model: 67.8%</li>
<li>Post-pruned model: 67.8%</li>
</ul>
<p>The post-pruned model simplifies the model and the accuracy stays the same.. So I’m going to use the post-pruned model here.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot tree</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rpart.plot</span>(meaningful.emp.mn.grad.year.<span class="fl">5.</span>model.postprune, <span class="at">nn =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="main-takeaway-2" class="level3">
<h3 class="anchored" data-anchor-id="main-takeaway-2"><strong>Main takeaway</strong></h3>
<p>At five years after graduation, <strong>postsecondary completion patterns, credential level, and CTE engagement</strong> become decisive in shaping whether students remain anchored in the region. Graduates with sub-baccalaureate or 2-year credentials, paired with CTE engagement, are most likely to hold meaningful employment in Southern Minnesota. In contrast, <strong>Bachelor’s degree earners and high ACT scorers are more likely to find meaningful work elsewhere in Minnesota</strong>, reflecting mobility tied to higher academic pathways.</p>
</section>
<section id="key-findings-1" class="level3">
<h3 class="anchored" data-anchor-id="key-findings-1"><strong>Key Findings</strong></h3>
<ul>
<li><strong>Model accuracy:</strong> 67.8% (post-pruned model, 6 splits).</li>
<li><strong>Most important predictors:</strong> <em>Postsecondary graduation location</em>, <em>Institution sector</em>, <em>Highest credential level</em>, <em>CTE achievement</em>, <em>Total CTE courses taken</em>, and <em>ACT Composite Score</em>.</li>
<li><strong>Overall pattern:</strong> Regional employment is strongly anchored by <strong>CTE depth</strong> and <strong>sub-baccalaureate completion in local institutions</strong>, while higher academic attainment pushes graduates outward into broader Minnesota labor markets.</li>
</ul>
</section>
<section id="interpretation-1" class="level3">
<h3 class="anchored" data-anchor-id="interpretation-1"><strong>Interpretation</strong></h3>
<ul>
<li><strong>Postsecondary location and sector:</strong>
<ul>
<li>Graduating from a Minnesota postsecondary institution outside the region strongly predicted statewide (non-regional) employment.</li>
<li>Public 2-year and other sub-baccalaureate pathways anchored students more securely in the region.</li>
</ul></li>
<li><strong>Highest credential level:</strong> Bachelor’s degree holders were less likely to be employed regionally, reflecting mobility to statewide opportunities.</li>
<li><strong>CTE engagement:</strong>
<ul>
<li>CTE concentrators/completors remained more likely to work regionally.</li>
<li>Even modest CTE course-taking (≥2 courses) raised the probability of anchoring in the region.</li>
</ul></li>
<li><strong>Academic achievement (ACT):</strong> Very high ACT scores (≥28) aligned with statewide mobility, even among students without deep CTE exposure.</li>
</ul>
</section>
<section id="decision-tree-interpretation-1" class="level3">
<h3 class="anchored" data-anchor-id="decision-tree-interpretation-1"><strong>Decision Tree Interpretation</strong></h3>
<ul>
<li><strong>Root split:</strong> Postsecondary graduation location. Graduates from Minnesota institutions outside the region were much more likely to work elsewhere in the state.</li>
<li><strong>Credential level branch:</strong> Among regional PS graduates, Bachelor’s degree attainment shifted outcomes away from the region, especially without CTE depth.</li>
<li><strong>CTE engagement branch:</strong> For those without high academic scores, CTE course-taking provided a strong anchor, tipping probabilities toward regional employment.</li>
<li><strong>Academic branch:</strong> High ACT scorers (≥28) without CTE depth were less likely to remain in regional employment.</li>
</ul>
</section>
<section id="summary-1" class="level3">
<h3 class="anchored" data-anchor-id="summary-1"><strong>Summary</strong></h3>
<p>At five years post-graduation, <strong>regional employment is anchored by CTE engagement and sub-baccalaureate completion</strong>, particularly in 2-year institutions. In contrast, <strong>Bachelor’s degree earners and academically high-achieving students are more mobile</strong>, often securing meaningful work elsewhere in Minnesota. This reflects a dual pathway: regional workforce attachment through CTE and 2-year programs versus statewide mobility through 4-year pathways and higher academic achievement.</p>
</section>
<section id="policypractice-implications-2" class="level3">
<h3 class="anchored" data-anchor-id="policypractice-implications-2"><strong>Policy/Practice Implications</strong></h3>
<p>Strengthening <strong>CTE pipelines and sub-baccalaureate pathways</strong> remains critical for anchoring graduates in the regional workforce. Programs that connect CTE concentrators and completers to local employers could bolster retention. Meanwhile, for academically strong students pursuing Bachelor’s degrees, <strong>strategies to attract and retain them regionally—such as internships, research partnerships, and competitive regional opportunities—will be essential to counter the mobility trend</strong>.</p>
</section>
</section>
<section id="ten-years-after-graduation" class="level2">
<h2 class="anchored" data-anchor-id="ten-years-after-graduation">Ten years after graduation</h2>
<p>I’m going to follow the same process as the one year after graduation process, but I’m going to add in the post-secondary variables now.</p>
<p>The table below a much more balanced classifications with 58% of the individuals having meaningful employment in their high school region compared to 42% that have meaningful employment in Minnesota, but not their region.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>meaningful.emp.mn.grad.year<span class="fl">.10</span> <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>grad.year<span class="fl">.1</span>, <span class="sc">-</span>grad.year<span class="fl">.5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(grad.year<span class="fl">.10</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Meaningful emp region"</span>, <span class="st">"Meaningful emp MN"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">grad.year.10 =</span> <span class="fu">as.factor</span>(grad.year<span class="fl">.10</span>))</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="fu">comma</span>(<span class="fu">nrow</span>(meaningful.emp.mn.grad.year<span class="fl">.10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "23,822"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(<span class="at">data =</span> meaningful.emp.mn.grad.year<span class="fl">.10</span> <span class="sc">%&gt;%</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>            <span class="fu">group_by</span>(grad.year<span class="fl">.10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>            <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mutate</span>(<span class="at">pct =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>            <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>),</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">class =</span> <span class="st">"cell-border stripe"</span>, </span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">filter =</span> <span class="st">"top"</span>, </span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">rownames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>          <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">columnDefs =</span> <span class="fu">list</span>(<span class="fu">list</span>(<span class="at">className =</span> <span class="st">"dt-center"</span>, <span class="at">targets =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)))) <span class="sc">%&gt;%</span></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatCurrency</span>(<span class="dv">2</span>, <span class="st">""</span>, <span class="at">digits =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatPercentage</span>(<span class="dv">3</span>, <span class="at">digits =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-a48fe944c4d8adf77fa3" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-a48fe944c4d8adf77fa3">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Meaningful emp MN&quot;,&quot;Meaningful emp region&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"9909\" data-max=\"13913\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0.415960036940643\" data-max=\"0.584039963059357\" data-scale=\"15\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["Meaningful emp MN","Meaningful emp region"],[9909,13913],[0.4159600369406431,0.5840399630593569]],"container":"<table class=\"cell-border stripe\">\n  <thead>\n    <tr>\n      <th>grad.year.10<\/th>\n      <th>n<\/th>\n      <th>pct<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"targets":2,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatPercentage(data, 1, 3, \",\", \".\", null);\n  }"},{"targets":1,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatCurrency(data, \"\", 0, 3, \",\", \".\", true, null);\n  }"},{"className":"dt-center","targets":[1,2]},{"name":"grad.year.10","targets":0},{"name":"n","targets":1},{"name":"pct","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":["options.columnDefs.0.render","options.columnDefs.1.render"],"jsHooks":[]}</script>
</div>
</div>
<p><br></p>
<section id="base-model-2" class="level3">
<h3 class="anchored" data-anchor-id="base-model-2">Base Model</h3>
<p>I know the base model is going to overfit and provide an overly complex tree due to having a cost penalty of 0. So I’m just going to print the complexity plot in order to see what the appropriate CP would be to minimize xerror.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>sample_ind <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">nrow</span>(meaningful.emp.mn.grad.year<span class="fl">.10</span>), <span class="fu">nrow</span>(meaningful.emp.mn.grad.year<span class="fl">.10</span>) <span class="sc">*</span>.<span class="dv">7</span>)</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> meaningful.emp.mn.grad.year<span class="fl">.10</span>[sample_ind,]</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> meaningful.emp.mn.grad.year<span class="fl">.10</span>[<span class="sc">-</span>sample_ind,]</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Base model</span></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>meaningful.emp.mn.grad.year.<span class="fl">10.</span>model <span class="ot">&lt;-</span> <span class="fu">rpart</span>(grad.year<span class="fl">.10</span> <span class="sc">~</span> ., <span class="at">data =</span> train, <span class="at">method =</span> <span class="st">"class"</span>, <span class="at">control =</span> <span class="fu">rpart.control</span>(<span class="at">cp =</span> <span class="dv">0</span>))</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Accuracy</span></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(meaningful.emp.mn.grad.year.<span class="fl">10.</span>model, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>accuracy_base <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.10</span>)</span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a><span class="fu">percent</span>(accuracy_base, <span class="at">accuracy =</span> .<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "60.5%"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(meaningful.emp.mn.grad.year.<span class="fl">10.</span>model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.10 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0))

Variables actually used in tree construction:
 [1] ACTCompositeScore         avg.unemp.rate           
 [3] avg.wages.pct.state       cte.achievement          
 [5] Dem_Desc                  economic.status          
 [7] Gender                    highest.cred.level       
 [9] MCA.M                     MCA.R                    
[11] MCA.S                     ps.grad                  
[13] ps.grad.InstitutionSector ps.grad.location         
[15] RaceEthnicity             SpecialEdStatus          
[17] total.cte.courses.taken  

Root node error: 6949/16675 = 0.41673

n= 16675 

           CP nsplit rel error  xerror      xstd
1  1.2376e-01      0   1.00000 1.00000 0.0091616
2  1.5542e-02      1   0.87624 0.87624 0.0089471
3  4.4611e-03      2   0.86070 0.86804 0.0089291
4  3.6456e-03      7   0.83796 0.86099 0.0089132
5  2.8781e-03     10   0.82703 0.84919 0.0088858
6  2.7342e-03     12   0.82127 0.84487 0.0088755
7  2.1586e-03     13   0.81854 0.84012 0.0088640
8  1.6117e-03     14   0.81638 0.83825 0.0088595
9  1.4391e-03     19   0.80832 0.83753 0.0088577
10 1.2952e-03     23   0.80256 0.83724 0.0088570
11 1.1512e-03     29   0.79479 0.83868 0.0088605
12 1.0073e-03     31   0.79249 0.83854 0.0088602
13 8.6343e-04     33   0.79047 0.83652 0.0088552
14 7.9148e-04     37   0.78702 0.83580 0.0088535
15 7.1953e-04     45   0.78026 0.83998 0.0088637
16 6.8755e-04     57   0.77162 0.84214 0.0088689
17 6.4758e-04     72   0.75925 0.84127 0.0088668
18 5.7562e-04     80   0.75407 0.84098 0.0088661
19 5.3965e-04     86   0.75061 0.84530 0.0088765
20 5.2765e-04     92   0.74730 0.84703 0.0088807
21 5.0367e-04     96   0.74514 0.84717 0.0088810
22 4.3172e-04    112   0.73708 0.84804 0.0088831
23 4.1373e-04    176   0.70543 0.85005 0.0088878
24 3.9574e-04    190   0.69809 0.85019 0.0088882
25 3.8375e-04    194   0.69650 0.85451 0.0088983
26 3.5976e-04    197   0.69535 0.85912 0.0089089
27 3.4537e-04    222   0.68614 0.85811 0.0089066
28 3.3578e-04    229   0.68341 0.85883 0.0089083
29 3.2379e-04    243   0.67837 0.85883 0.0089083
30 2.8781e-04    247   0.67708 0.86646 0.0089256
31 2.5183e-04    338   0.64916 0.86847 0.0089301
32 2.3984e-04    349   0.64513 0.87120 0.0089361
33 2.3385e-04    384   0.63606 0.87408 0.0089424
34 2.1586e-04    392   0.63419 0.87437 0.0089431
35 1.9787e-04    445   0.62196 0.87883 0.0089527
36 1.9187e-04    453   0.62038 0.88286 0.0089613
37 1.7988e-04    468   0.61750 0.88401 0.0089638
38 1.4391e-04    477   0.61577 0.88660 0.0089692
39 1.1992e-04    610   0.59548 0.90675 0.0090100
40 1.1193e-04    616   0.59476 0.91020 0.0090166
41 1.0793e-04    627   0.59332 0.91006 0.0090164
42 9.5937e-05    656   0.58987 0.91538 0.0090265
43 8.6343e-05    682   0.58713 0.91769 0.0090309
44 7.7488e-05    687   0.58670 0.91769 0.0090309
45 7.1953e-05    700   0.58570 0.92718 0.0090483
46 6.1674e-05    764   0.58080 0.92704 0.0090481
47 5.7562e-05    771   0.58037 0.92733 0.0090486
48 4.7969e-05    781   0.57980 0.93222 0.0090574
49 4.1116e-05    807   0.57850 0.93380 0.0090602
50 3.5976e-05    814   0.57821 0.93380 0.0090602
51 2.8781e-05    820   0.57792 0.93380 0.0090602
52 2.3984e-05    825   0.57778 0.93467 0.0090617
53 2.0558e-05    831   0.57764 0.93495 0.0090622
54 0.0000e+00    838   0.57749 0.93495 0.0090622</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(meaningful.emp.mn.grad.year.<span class="fl">10.</span>model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Key takeaways from base tree results</strong></p>
<ul>
<li>Accuracy: 60.5%</li>
<li>The tree is using <strong>17/17 variables</strong>
<ul>
<li>Demographics: 4/4</li>
<li>HS characteristics: 3/3</li>
<li>HS accomplishments: 6/6</li>
<li>Post-secondary: 4/4</li>
</ul></li>
<li>The lowest cross-validation error (xerror)
<ul>
<li>Step: 14</li>
<li>xerror: 0.83580</li>
<li>cp: 7.9148e-04</li>
<li>splits: 37</li>
</ul></li>
<li>Total splits: 838</li>
</ul>
<p><br></p>
</section>
<section id="pre-pruning-2" class="level3">
<h3 class="anchored" data-anchor-id="pre-pruning-2">Pre-pruning</h3>
<p>Next, we need to prune. We can either pre-prune or post-prune. We will start with pre-pruning and use each method - max depth, min depth, and min bucket. It’s recommended that I start with the following parameters;</p>
<ul>
<li>maxdepth: 5</li>
<li>minsplit: round(2% of nrow(train)).</li>
<li>minbucket: round(minsplit / 3)</li>
<li>cp = 0</li>
</ul>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>maxdepth <span class="ot">=</span> <span class="dv">5</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>minsplit <span class="ot">=</span> <span class="fu">round</span>(.<span class="dv">02</span><span class="sc">*</span><span class="fu">nrow</span>(train))</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>minbucket <span class="ot">=</span> <span class="fu">round</span>(minsplit <span class="sc">/</span> <span class="dv">3</span>)</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>meaningful.emp.mn.grad.year.<span class="fl">10.</span>model.preprune <span class="ot">&lt;-</span> <span class="fu">rpart</span>(grad.year<span class="fl">.10</span> <span class="sc">~</span> ., <span class="at">data =</span> train, <span class="at">method =</span> <span class="st">"class"</span>, </span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>                   <span class="at">control =</span> <span class="fu">rpart.control</span>(<span class="at">cp =</span> <span class="dv">0</span>, <span class="at">maxdepth =</span> maxdepth, <span class="at">minsplit =</span> minsplit, <span class="at">minbucket =</span> minbucket))</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Accuracy</span></span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(meaningful.emp.mn.grad.year.<span class="fl">10.</span>model.preprune, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>accuracy_preprun <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.10</span>)</span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a><span class="fu">percent</span>(accuracy_preprun, <span class="at">accuracy =</span> .<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "64.7%"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(meaningful.emp.mn.grad.year.<span class="fl">10.</span>model.preprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.10 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0, maxdepth = maxdepth, minsplit = minsplit, 
        minbucket = minbucket))

Variables actually used in tree construction:
[1] ACTCompositeScore         avg.wages.pct.state      
[3] cte.achievement           highest.cred.level       
[5] MCA.R                     ps.grad.InstitutionSector
[7] ps.grad.location         

Root node error: 6949/16675 = 0.41673

n= 16675 

         CP nsplit rel error  xerror      xstd
1 0.1237588      0   1.00000 1.00000 0.0091616
2 0.0155418      1   0.87624 0.87624 0.0089471
3 0.0044611      2   0.86070 0.86876 0.0089307
4 0.0036456      5   0.84732 0.85178 0.0088919
5 0.0028781      8   0.83638 0.84976 0.0088872
6 0.0021586     10   0.83062 0.84257 0.0088700
7 0.0000000     11   0.82846 0.84185 0.0088682</code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(meaningful.emp.mn.grad.year.<span class="fl">10.</span>model.preprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Takeaways</strong></p>
<ul>
<li>Accuracy: 60.5% -&gt; 64.7%</li>
<li>The tree is using <strong>7/17 variables</strong>
<ul>
<li>Demographics: 0/4</li>
<li>HS characteristics: 1/3 - wages</li>
<li>HS accomplishments: 3/6 - ACT, CTE, MCA reading</li>
<li>Post-secondary: 3/4 - location, institution sector, highest credential</li>
</ul></li>
<li>The lowest cross-validation error (xerror)
<ul>
<li>Step: 7</li>
<li>xerror: 0.84185</li>
<li>cp: 0</li>
<li>splits: 11</li>
</ul></li>
<li>Total splits: 11</li>
</ul>
<p><br></p>
</section>
<section id="post-pruning-2" class="level3">
<h3 class="anchored" data-anchor-id="post-pruning-2">Post-pruning</h3>
<p>The idea here is to allow the decision tree to grow fully and observe the CP value. There are two methods for identifying the CP code;</p>
<ol type="1">
<li><p>Use the cp value with the lowest xerror from the base model.</p></li>
<li><p>Use the cp value with the next lowest xerror that is within the standard error.</p></li>
</ol>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>cp_table <span class="ot">&lt;-</span> meaningful.emp.mn.grad.year.<span class="fl">10.</span>model.preprune<span class="sc">$</span>cptable</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>min_xerror <span class="ot">&lt;-</span> <span class="fu">min</span>(cp_table[, <span class="st">"xerror"</span>])</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>min_xerror_se <span class="ot">&lt;-</span> cp_table[<span class="fu">which.min</span>(cp_table[,<span class="st">"xerror"</span>]), <span class="st">"xstd"</span>]</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>threshold <span class="ot">&lt;-</span> min_xerror <span class="sc">+</span> min_xerror_se</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>one_se_index <span class="ot">&lt;-</span> <span class="fu">which</span>(cp_table[, <span class="st">"xerror"</span>] <span class="sc">&lt;=</span> threshold)[<span class="dv">1</span>] </span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>cp_1se <span class="ot">&lt;-</span> cp_table[one_se_index, <span class="st">"CP"</span>]</span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>optimal_cp <span class="ot">&lt;-</span> meaningful.emp.mn.grad.year.<span class="fl">10.</span>model.preprune<span class="sc">$</span>cptable[<span class="fu">which.min</span>(meaningful.emp.mn.grad.year.<span class="fl">10.</span>model.preprune<span class="sc">$</span>cptable[, <span class="st">"xerror"</span>]), <span class="st">"CP"</span>]</span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Prune the hr_base_model based on the optimal cp value</span></span>
<span id="cb55-16"><a href="#cb55-16" aria-hidden="true" tabindex="-1"></a>meaningful.emp.mn.grad.year.<span class="fl">10.</span>model.postprune <span class="ot">&lt;-</span> rpart<span class="sc">::</span><span class="fu">prune</span>(meaningful.emp.mn.grad.year.<span class="fl">10.</span>model.preprune, <span class="at">cp =</span> cp_1se)</span>
<span id="cb55-17"><a href="#cb55-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-18"><a href="#cb55-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute the accuracy of the pruned tree</span></span>
<span id="cb55-19"><a href="#cb55-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-20"><a href="#cb55-20" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(meaningful.emp.mn.grad.year.<span class="fl">10.</span>model.postprune, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb55-21"><a href="#cb55-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-22"><a href="#cb55-22" aria-hidden="true" tabindex="-1"></a>accuracy_postprun <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.10</span>)</span>
<span id="cb55-23"><a href="#cb55-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-24"><a href="#cb55-24" aria-hidden="true" tabindex="-1"></a><span class="fu">percent</span>(accuracy_postprun, <span class="at">accuracy =</span> .<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "64.4%"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(meaningful.emp.mn.grad.year.<span class="fl">10.</span>model.postprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.10 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0, maxdepth = maxdepth, minsplit = minsplit, 
        minbucket = minbucket))

Variables actually used in tree construction:
[1] ACTCompositeScore         avg.wages.pct.state      
[3] highest.cred.level        MCA.R                    
[5] ps.grad.InstitutionSector ps.grad.location         

Root node error: 6949/16675 = 0.41673

n= 16675 

         CP nsplit rel error  xerror      xstd
1 0.1237588      0   1.00000 1.00000 0.0091616
2 0.0155418      1   0.87624 0.87624 0.0089471
3 0.0044611      2   0.86070 0.86876 0.0089307
4 0.0036456      5   0.84732 0.85178 0.0088919
5 0.0028781      8   0.83638 0.84976 0.0088872</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(meaningful.emp.mn.grad.year.<span class="fl">10.</span>model.postprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Accuracy: 64.7% -&gt; 64.4%</li>
<li>The tree is using <strong>6/17 variables</strong>
<ul>
<li>Demographics: 0/4</li>
<li>HS characteristics: 1/3 - wages</li>
<li>HS accomplishments: 2/6 - ACT, MCA reading</li>
<li>Post-secondary: 3/4 - location, institution sector, highest credential</li>
</ul></li>
<li>The lowest cross-validation error (xerror)
<ul>
<li>Step: 4</li>
<li>xerror: 0.84976</li>
<li>cp: 0.0028781</li>
<li>splits: 8</li>
</ul></li>
<li>Total splits: 8</li>
</ul>
<p>So, the accuracy of these are;</p>
<ul>
<li>Base model: 60.5%</li>
<li>Pre-pruned model: 64.7%</li>
<li>Post-pruned model: 64.4%</li>
</ul>
<p>The post-pruned model does simplify the model and has basically the same accuracy.. I’m going to use the post-pruned model here.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot tree</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rpart.plot</span>(meaningful.emp.mn.grad.year.<span class="fl">10.</span>model.postprune, <span class="at">nn =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="main-takeaway-3" class="level3">
<h3 class="anchored" data-anchor-id="main-takeaway-3"><strong>Main takeaway</strong></h3>
<p>At ten years after graduation, <strong>regional employment is shaped primarily by postsecondary location, credential level, academic performance, and local economic context</strong>. Graduates with sub-baccalaureate or in-region postsecondary experiences remain more anchored to Southern Minnesota, while <strong>Bachelor’s degree earners and higher academic achievers (ACT, MCA)</strong> are much more likely to be employed elsewhere in Minnesota.</p>
</section>
<section id="key-findings-2" class="level3">
<h3 class="anchored" data-anchor-id="key-findings-2"><strong>Key Findings</strong></h3>
<ul>
<li><strong>Model accuracy:</strong> 64.4% (post-pruned model, 8 splits).</li>
<li><strong>Most important predictors:</strong> <em>Postsecondary graduation location</em>, <em>Highest credential level</em>, <em>Institution sector</em>, <em>ACT Composite Score</em>, <em>MCA Reading scores</em>, and <em>Local wage levels (avg.wages.pct.state)</em>.</li>
<li><strong>Overall pattern:</strong> Long-term anchoring to the region is tied to <strong>credential type (especially sub-baccalaureate), regional graduation, and moderate academic performance</strong>, while higher academic achievers and Bachelor’s degree holders show greater outward mobility within Minnesota.</li>
</ul>
</section>
<section id="interpretation-2" class="level3">
<h3 class="anchored" data-anchor-id="interpretation-2"><strong>Interpretation</strong></h3>
<ul>
<li><strong>Postsecondary location and credential:</strong>
<ul>
<li>Graduating in Southern Minnesota with a sub-baccalaureate credential is one of the strongest anchors for regional employment.</li>
<li>Postsecondary graduates outside the region and Bachelor’s degree holders are much more likely to be employed statewide rather than regionally.</li>
</ul></li>
<li><strong>Academic achievement:</strong>
<ul>
<li>High ACT scores (≥26) are associated with statewide mobility.</li>
<li>High MCA Reading scores (≥4) similarly point toward statewide opportunities, unless paired with favorable economic conditions and sub-baccalaureate pathways.</li>
</ul></li>
<li><strong>Economic context:</strong>
<ul>
<li>Low relative local wages (&lt;0.79 of state average) increased the likelihood of graduates leaving the region for statewide employment.</li>
<li>Higher relative wages anchored graduates more strongly in the region, even among higher academic performers.</li>
</ul></li>
</ul>
</section>
<section id="decision-tree-interpretation-2" class="level3">
<h3 class="anchored" data-anchor-id="decision-tree-interpretation-2"><strong>Decision Tree Interpretation</strong></h3>
<ul>
<li><strong>Root split:</strong> Postsecondary graduation location. Graduates from outside the region or from MN more broadly tended to work outside Southern Minnesota.</li>
<li><strong>Credential level branch:</strong> Among in-region graduates, earning a Bachelor’s degree shifted employment away from the region.</li>
<li><strong>Academic performance branch:</strong> High ACT and MCA Reading scores without regional/CTE anchors predicted statewide mobility.<br>
</li>
<li><strong>Economic branch:</strong> Low local wage environments weakened regional attachment, even for those with moderate credentials, while higher wage environments strengthened regional retention.</li>
</ul>
</section>
<section id="summary-2" class="level3">
<h3 class="anchored" data-anchor-id="summary-2"><strong>Summary</strong></h3>
<p>By year ten, <strong>regional employment is anchored by local postsecondary graduation, sub-baccalaureate credentials, and competitive local wages</strong>. In contrast, <strong>Bachelor’s degrees, higher academic achievement, and weaker wage environments lead to statewide mobility</strong>. The split between regional and statewide employment solidifies: students on 2-year or CTE-aligned pathways remain tied to the region, while 4-year graduates and high scorers are drawn outward.</p>
</section>
<section id="policypractice-implications-3" class="level3">
<h3 class="anchored" data-anchor-id="policypractice-implications-3"><strong>Policy/Practice Implications</strong></h3>
<p>To strengthen the long-term regional workforce, policy should emphasize:</p>
<ul>
<li><strong>Expanding and sustaining CTE and 2-year pipelines</strong> to continue anchoring graduates locally.</li>
<li><strong>Creating attractive local opportunities for Bachelor’s degree holders and academically high-achieving students</strong>, such as internships, research partnerships, or competitive professional roles, to mitigate outward mobility.</li>
<li><strong>Supporting wage competitiveness in regional industries</strong> to retain graduates who might otherwise seek higher-paying roles elsewhere in Minnesota.</li>
</ul>
<p><br></p>
</section>
</section>
</section>
<section id="analysis---meaningful-employment-region-vs.-not-meaningful-and-not-attending-post-secondary" class="level1">
<h1>Analysis - Meaningful employment region vs.&nbsp;Not meaningful and not attending post-secondary</h1>
<section id="synthesis-meaningful-employment-in-region-vs.-not-meaningful-employment-not-attending-postsecondary" class="level2">
<h2 class="anchored" data-anchor-id="synthesis-meaningful-employment-in-region-vs.-not-meaningful-employment-not-attending-postsecondary">Synthesis: Meaningful Employment in Region vs.&nbsp;Not Meaningful Employment, Not Attending Postsecondary</h2>
<section id="main-takeaway-4" class="level3">
<h3 class="anchored" data-anchor-id="main-takeaway-4"><strong>Main takeaway</strong></h3>
<p>Across one, five, and ten years after graduation, the CART models consistently show that <strong>CTE engagement, regional postsecondary pathways, and stronger local economic conditions</strong> are the strongest anchors for meaningful employment in Southern Minnesota. Barriers to regional employment include <strong>lack of CTE involvement, SpecialEd status, low-income status, and weaker wage environments</strong>. Over time, postsecondary ties and economic conditions grow more important, while early-stage anchoring is most dependent on CTE completion and academic preparation.</p>
<hr>
</section>
<section id="year-1-after-graduation-1" class="level3">
<h3 class="anchored" data-anchor-id="year-1-after-graduation-1"><strong>Year 1 after Graduation</strong></h3>
<ul>
<li><strong>Accuracy:</strong> 58.6% (post-pruned model).</li>
<li><strong>Anchors:</strong> CTE concentrator/completor status, stronger MCA Math scores.</li>
<li><strong>Barriers:</strong> Lack of CTE engagement, SpecialEd involvement, weak math skills, and subgroup gaps (male students in certain racial/ethnic groups).</li>
<li><strong>Interpretation:</strong> Early anchoring depends heavily on <strong>CTE completion and basic academic preparation</strong>, which provide protection against disconnection from both work and postsecondary education.</li>
</ul>
<hr>
</section>
<section id="year-5-after-graduation-1" class="level3">
<h3 class="anchored" data-anchor-id="year-5-after-graduation-1"><strong>Year 5 after Graduation</strong></h3>
<ul>
<li><strong>Accuracy:</strong> 62.7% (post-pruned model).</li>
<li><strong>Anchors:</strong> Postsecondary attendance/graduation in Southern MN, CTE completion or participation, and at least one CTE course.</li>
<li><strong>Barriers:</strong> SpecialEd status, lack of CTE involvement, and subgroup disparities by gender and race/ethnicity.</li>
<li><strong>Interpretation:</strong> By mid-career, <strong>regional postsecondary ties and CTE pathways</strong> are the strongest predictors of meaningful regional employment. Demographic gaps persist, especially for SpecialEd students and males without CTE depth.</li>
</ul>
<hr>
</section>
<section id="year-10-after-graduation-1" class="level3">
<h3 class="anchored" data-anchor-id="year-10-after-graduation-1"><strong>Year 10 after Graduation</strong></h3>
<ul>
<li><strong>Accuracy:</strong> 65.9% (pre-pruned model).</li>
<li><strong>Anchors:</strong> Regional postsecondary graduation, ≥2 CTE courses, higher local wages.</li>
<li><strong>Barriers:</strong> Low-income status, weaker wage contexts, and subgroup disparities (AI, Hispanic, some White students more vulnerable to disconnection).</li>
<li><strong>Interpretation:</strong> Long-term anchoring is sustained by <strong>regional PS credentials, CTE depth, and competitive wage environments</strong>, while structural disadvantages and weaker economies elevate disconnection risk.</li>
</ul>
<hr>
</section>
<section id="overall-summary-1" class="level3">
<h3 class="anchored" data-anchor-id="overall-summary-1"><strong>Overall Summary</strong></h3>
<p>The models reveal a clear progression:</p>
<ul>
<li><strong>Year 1:</strong> Anchoring depends on <strong>early CTE completion and academic readiness (MCA Math)</strong>.</li>
<li><strong>Year 5:</strong> <strong>Regional postsecondary engagement and CTE depth</strong> take over as decisive anchors, while SpecialEd and subgroup disparities persist as barriers.</li>
<li><strong>Year 10:</strong> Long-term retention depends on <strong>regional PS graduation, sustained CTE involvement, and wage competitiveness</strong>, with income and racial disparities shaping outcomes.</li>
</ul>
<p>In short, <strong>CTE and regional postsecondary pathways consistently serve as anchors across all timeframes</strong>, while <strong>economic disadvantage and structural inequities weaken anchoring over time</strong>.</p>
<hr>
</section>
<section id="policypractice-implications-4" class="level3">
<h3 class="anchored" data-anchor-id="policypractice-implications-4"><strong>Policy/Practice Implications</strong></h3>
<ul>
<li><strong>Expand CTE programs and ensure concentrator/completor completion</strong>, as these remain the strongest early and mid-term anchors.</li>
<li><strong>Strengthen connections to regional postsecondary institutions</strong>, ensuring graduates who attend/complete locally remain tied to the regional labor market.</li>
<li><strong>Target SpecialEd and low-income students with tailored supports</strong> to improve retention and reduce early disconnection.</li>
<li><strong>Address racial/ethnic disparities</strong> by ensuring equitable access to CTE, PS, and local employment pipelines.</li>
<li><strong>Support wage competitiveness in the region</strong>, especially in industries most likely to retain CTE graduates, to reduce long-term disconnection.</li>
</ul>
<p><br></p>
</section>
</section>
<section id="one-year-after-graduation-1" class="level2">
<h2 class="anchored" data-anchor-id="one-year-after-graduation-1">One year after graduation</h2>
<p>First I’m going to filter out the data so only individuals that had meaningful employment in the region or do not have meaningful employment in Minnesota or the region and are not attending post-secondary are in the dataset. In addition, I’m going to remove all the post-secondary variables from the model since those are variables that take place in the future.</p>
<p>The table below shows that 46% of the individuals have meaningful employment in their high school region compared to 55% that do not have meaningful employment in Minnesota or their region and are not attending post-secondary.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>not.meaningful.grad.year<span class="fl">.1</span> <span class="ot">&lt;-</span> data.grad.year<span class="fl">.1</span> <span class="sc">%&gt;%</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>grad.year<span class="fl">.5</span>, <span class="sc">-</span>grad.year<span class="fl">.10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(grad.year<span class="fl">.1</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Meaningful emp region"</span>, <span class="st">"Not meaningful, not attending ps"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">grad.year.1 =</span> <span class="fu">as.factor</span>(grad.year<span class="fl">.1</span>))</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="fu">comma</span>(<span class="fu">nrow</span>(not.meaningful.grad.year<span class="fl">.1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "35,439"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(<span class="at">data =</span> not.meaningful.grad.year<span class="fl">.1</span> <span class="sc">%&gt;%</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>            <span class="fu">group_by</span>(grad.year<span class="fl">.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>            <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mutate</span>(<span class="at">pct =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>            <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>),</span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">class =</span> <span class="st">"cell-border stripe"</span>, </span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">filter =</span> <span class="st">"top"</span>, </span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">rownames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a>          <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">columnDefs =</span> <span class="fu">list</span>(<span class="fu">list</span>(<span class="at">className =</span> <span class="st">"dt-center"</span>, <span class="at">targets =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)))) <span class="sc">%&gt;%</span></span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatCurrency</span>(<span class="dv">2</span>, <span class="st">""</span>, <span class="at">digits =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb63-14"><a href="#cb63-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatPercentage</span>(<span class="dv">3</span>, <span class="at">digits =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-b4ad54c5d4a012795c05" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-b4ad54c5d4a012795c05">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Meaningful emp region&quot;,&quot;Not meaningful, not attending ps&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"16138\" data-max=\"19301\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0.455374022969045\" data-max=\"0.544625977030955\" data-scale=\"15\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["Meaningful emp region","Not meaningful, not attending ps"],[16138,19301],[0.4553740229690454,0.5446259770309546]],"container":"<table class=\"cell-border stripe\">\n  <thead>\n    <tr>\n      <th>grad.year.1<\/th>\n      <th>n<\/th>\n      <th>pct<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"targets":2,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatPercentage(data, 1, 3, \",\", \".\", null);\n  }"},{"targets":1,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatCurrency(data, \"\", 0, 3, \",\", \".\", true, null);\n  }"},{"className":"dt-center","targets":[1,2]},{"name":"grad.year.1","targets":0},{"name":"n","targets":1},{"name":"pct","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":["options.columnDefs.0.render","options.columnDefs.1.render"],"jsHooks":[]}</script>
</div>
</div>
<p><br></p>
<section id="base-model-3" class="level3">
<h3 class="anchored" data-anchor-id="base-model-3">Base Model</h3>
<p>I know the base model is going to overfit and provide an overly complex tree due to having a cost penalty of 0. So I’m just going to print the complexity plot in order to see what the appropriate CP would be to minimize xerror.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>sample_ind <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">nrow</span>(not.meaningful.grad.year<span class="fl">.1</span>), <span class="fu">nrow</span>(not.meaningful.grad.year<span class="fl">.1</span>) <span class="sc">*</span>.<span class="dv">7</span>)</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> not.meaningful.grad.year<span class="fl">.1</span>[sample_ind,]</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> not.meaningful.grad.year<span class="fl">.1</span>[<span class="sc">-</span>sample_ind,]</span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Base model</span></span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a>not.meaningful.grad.year.<span class="fl">1.</span>model <span class="ot">&lt;-</span> <span class="fu">rpart</span>(grad.year<span class="fl">.1</span> <span class="sc">~</span> ., <span class="at">data =</span> train, <span class="at">method =</span> <span class="st">"class"</span>, <span class="at">control =</span> <span class="fu">rpart.control</span>(<span class="at">cp =</span> <span class="dv">0</span>))</span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Accuracy</span></span>
<span id="cb64-14"><a href="#cb64-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-15"><a href="#cb64-15" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(not.meaningful.grad.year.<span class="fl">1.</span>model, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb64-16"><a href="#cb64-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-17"><a href="#cb64-17" aria-hidden="true" tabindex="-1"></a>accuracy_base <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.1</span>)</span>
<span id="cb64-18"><a href="#cb64-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-19"><a href="#cb64-19" aria-hidden="true" tabindex="-1"></a><span class="fu">percent</span>(accuracy_base, <span class="at">accuracy =</span> .<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "54.6%"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(not.meaningful.grad.year.<span class="fl">1.</span>model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.1 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0))

Variables actually used in tree construction:
 [1] ACTCompositeScore       avg.unemp.rate          avg.wages.pct.state    
 [4] cte.achievement         Dem_Desc                economic.status        
 [7] Gender                  MCA.M                   MCA.R                  
[10] MCA.S                   RaceEthnicity           SpecialEdStatus        
[13] total.cte.courses.taken

Root node error: 11368/24807 = 0.45826

n= 24807 

           CP nsplit rel error  xerror      xstd
1  3.0744e-02      0   1.00000 1.00000 0.0069033
2  6.2456e-03      2   0.93851 0.93790 0.0068588
3  5.3659e-03      4   0.92602 0.93183 0.0068532
4  2.3311e-03      6   0.91529 0.92417 0.0068459
5  1.4954e-03      8   0.91063 0.92189 0.0068436
6  1.2315e-03      9   0.90913 0.92391 0.0068456
7  1.1875e-03     10   0.90790 0.92277 0.0068445
8  1.1142e-03     12   0.90552 0.92215 0.0068439
9  1.0409e-03     16   0.90104 0.92180 0.0068436
10 8.7966e-04     32   0.87702 0.91907 0.0068408
11 8.3568e-04     35   0.87438 0.91608 0.0068378
12 8.2688e-04     37   0.87271 0.91573 0.0068374
13 7.9170e-04     47   0.86321 0.91379 0.0068354
14 7.0373e-04     49   0.86163 0.91239 0.0068339
15 6.4509e-04     51   0.86022 0.91511 0.0068367
16 6.1576e-04     55   0.85749 0.91538 0.0068370
17 5.4979e-04     61   0.85380 0.91810 0.0068398
18 5.2780e-04     74   0.84544 0.91854 0.0068403
19 4.8381e-04     87   0.83858 0.91898 0.0068407
20 4.6915e-04     98   0.83260 0.91590 0.0068376
21 4.3983e-04    102   0.83058 0.91696 0.0068387
22 4.1051e-04    116   0.82407 0.91626 0.0068379
23 4.0464e-04    126   0.81949 0.91626 0.0068379
24 3.9585e-04    133   0.81659 0.91626 0.0068379
25 3.8119e-04    139   0.81395 0.92039 0.0068421
26 3.6286e-04    148   0.81043 0.92083 0.0068426
27 3.5186e-04    164   0.80313 0.92127 0.0068430
28 3.3427e-04    212   0.78589 0.92189 0.0068436
29 3.2987e-04    218   0.78387 0.92628 0.0068480
30 3.2254e-04    222   0.78255 0.92628 0.0068480
31 3.0788e-04    244   0.77410 0.92971 0.0068513
32 3.0160e-04    271   0.76548 0.93033 0.0068518
33 2.9322e-04    288   0.75941 0.93033 0.0068518
34 2.8589e-04    325   0.74578 0.93438 0.0068556
35 2.8149e-04    331   0.74402 0.93438 0.0068556
36 2.6390e-04    339   0.74164 0.93420 0.0068555
37 2.4191e-04    409   0.72273 0.93464 0.0068559
38 2.3458e-04    413   0.72176 0.93913 0.0068599
39 2.2871e-04    426   0.71816 0.93886 0.0068597
40 2.1992e-04    434   0.71587 0.93948 0.0068602
41 2.0525e-04    480   0.70540 0.94036 0.0068610
42 1.9792e-04    502   0.69995 0.94194 0.0068624
43 1.9353e-04    523   0.69405 0.94194 0.0068624
44 1.7593e-04    533   0.69177 0.94652 0.0068664
45 1.6127e-04    679   0.66371 0.95030 0.0068695
46 1.5834e-04    686   0.66247 0.95276 0.0068715
47 1.5394e-04    717   0.65535 0.95382 0.0068724
48 1.4661e-04    731   0.65245 0.95435 0.0068728
49 1.4075e-04    792   0.64110 0.96147 0.0068784
50 1.3195e-04    800   0.63987 0.96226 0.0068790
51 1.1729e-04    921   0.62315 0.97036 0.0068849
52 1.1310e-04   1011   0.60987 0.97326 0.0068869
53 1.0996e-04   1031   0.60653 0.97379 0.0068873
54 1.0556e-04   1059   0.60257 0.97414 0.0068875
55 8.7966e-05   1070   0.60063 0.98381 0.0068939
56 7.3305e-05   1241   0.58524 0.98469 0.0068944
57 7.0373e-05   1248   0.58454 0.98540 0.0068949
58 6.5975e-05   1253   0.58418 0.98531 0.0068948
59 5.8644e-05   1266   0.58330 0.98707 0.0068959
60 4.3983e-05   1278   0.58260 0.98795 0.0068964
61 2.9322e-05   1352   0.57935 0.99208 0.0068989
62 2.1992e-05   1373   0.57873 0.99551 0.0069008
63 1.2567e-05   1397   0.57820 0.99710 0.0069017
64 0.0000e+00   1411   0.57803 0.99727 0.0069018</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(not.meaningful.grad.year.<span class="fl">1.</span>model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Key takeaways</strong></p>
<ul>
<li>Accuracy: 54.6%</li>
<li>Predictors: 13/13
<ul>
<li>Demographics: 4/4</li>
<li>HS characteristics: 3/3</li>
<li>HS Accomplishments: 6/6</li>
</ul></li>
<li>Lowest xerror
<ul>
<li>Step: 14</li>
<li>xerror: 0.91239</li>
<li>cp: 7.0373e-04</li>
<li>Splits: 49</li>
</ul></li>
<li>Total splits: 1,411</li>
</ul>
<p><br></p>
</section>
<section id="pre-pruning-3" class="level3">
<h3 class="anchored" data-anchor-id="pre-pruning-3">Pre-pruning</h3>
<p>Next, we need to prune. We can either pre-prune or post-prune. We will start with pre-pruning and use each method - max depth, min depth, and min bucket. It’s recommended that I start with the following parameters;</p>
<ul>
<li>maxdepth: 5</li>
<li>minsplit: round(2% of nrow(train)).</li>
<li>minbucket: round(minsplit / 3)</li>
<li>cp = 0</li>
</ul>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>maxdepth <span class="ot">=</span> <span class="dv">5</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>minsplit <span class="ot">=</span> <span class="fu">round</span>(.<span class="dv">02</span><span class="sc">*</span><span class="fu">nrow</span>(train))</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>minbucket <span class="ot">=</span> <span class="fu">round</span>(minsplit <span class="sc">/</span> <span class="dv">3</span>)</span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>not.meaningful.grad.year.<span class="fl">1.</span>model.preprune <span class="ot">&lt;-</span> <span class="fu">rpart</span>(grad.year<span class="fl">.1</span> <span class="sc">~</span> ., <span class="at">data =</span> train, <span class="at">method =</span> <span class="st">"class"</span>, </span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>                   <span class="at">control =</span> <span class="fu">rpart.control</span>(<span class="at">cp =</span> <span class="dv">0</span>, <span class="at">maxdepth =</span> maxdepth, <span class="at">minsplit =</span> minsplit, <span class="at">minbucket =</span> minbucket))</span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Accuracy</span></span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-12"><a href="#cb69-12" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(not.meaningful.grad.year.<span class="fl">1.</span>model.preprune, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb69-13"><a href="#cb69-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-14"><a href="#cb69-14" aria-hidden="true" tabindex="-1"></a>accuracy_preprun <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.1</span>)</span>
<span id="cb69-15"><a href="#cb69-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-16"><a href="#cb69-16" aria-hidden="true" tabindex="-1"></a><span class="fu">percent</span>(accuracy_preprun, <span class="at">accuracy =</span> .<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "58.8%"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(not.meaningful.grad.year.<span class="fl">1.</span>model.preprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.1 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0, maxdepth = maxdepth, minsplit = minsplit, 
        minbucket = minbucket))

Variables actually used in tree construction:
[1] ACTCompositeScore   avg.wages.pct.state cte.achievement    
[4] economic.status     Gender              MCA.M              
[7] RaceEthnicity       SpecialEdStatus    

Root node error: 11368/24807 = 0.45826

n= 24807 

          CP nsplit rel error  xerror      xstd
1 0.03074419      0   1.00000 1.00000 0.0069033
2 0.00662679      2   0.93851 0.93754 0.0068585
3 0.00422238      5   0.91863 0.92171 0.0068435
4 0.00137814      6   0.91441 0.92021 0.0068420
5 0.00035186      9   0.91027 0.91863 0.0068404
6 0.00000000     10   0.90992 0.92109 0.0068428</code></pre>
</div>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(not.meaningful.grad.year.<span class="fl">1.</span>model.preprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(train<span class="sc">$</span>grad.year<span class="fl">.1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           Meaningful emp region Not meaningful, not attending ps 
                           11368                            13439 </code></pre>
</div>
</div>
<ul>
<li>Accuracy: 54.6% - &gt; 58.8%</li>
<li>Predictors: 8/13
<ul>
<li>Demographics: 4/4</li>
<li>HS characteristics: 1/3 - wages</li>
<li>HS Accomplishments: 3/6 - ACT, CTE, MCA math</li>
</ul></li>
<li>Lowest xerror
<ul>
<li>Step: 5</li>
<li>xerror: 0.91863</li>
<li>cp: 0.00035186</li>
<li>Splits: 9</li>
</ul></li>
<li>Total splits: 10</li>
</ul>
<p><br></p>
</section>
<section id="post-pruning-3" class="level3">
<h3 class="anchored" data-anchor-id="post-pruning-3">Post-pruning</h3>
<p>The idea here is to allow the decision tree to grow fully and observe the CP value. There are two methods for identifying the CP code;</p>
<ol type="1">
<li>Use the cp value with the lowest xerror from the base model.</li>
<li>Use the cp value with the next lowest xerror that is within the standard error.</li>
</ol>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>cp_table <span class="ot">&lt;-</span> not.meaningful.grad.year.<span class="fl">1.</span>model.preprune<span class="sc">$</span>cptable</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>min_xerror <span class="ot">&lt;-</span> <span class="fu">min</span>(cp_table[, <span class="st">"xerror"</span>])</span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>min_xerror_se <span class="ot">&lt;-</span> cp_table[<span class="fu">which.min</span>(cp_table[,<span class="st">"xerror"</span>]), <span class="st">"xstd"</span>]</span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>threshold <span class="ot">&lt;-</span> min_xerror <span class="sc">+</span> min_xerror_se</span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>one_se_index <span class="ot">&lt;-</span> <span class="fu">which</span>(cp_table[, <span class="st">"xerror"</span>] <span class="sc">&lt;=</span> threshold)[<span class="dv">1</span>] </span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a>cp_1se <span class="ot">&lt;-</span> cp_table[one_se_index, <span class="st">"CP"</span>]</span>
<span id="cb76-11"><a href="#cb76-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-12"><a href="#cb76-12" aria-hidden="true" tabindex="-1"></a>optimal_cp <span class="ot">&lt;-</span> not.meaningful.grad.year.<span class="fl">1.</span>model.preprune<span class="sc">$</span>cptable[<span class="fu">which.min</span>(not.meaningful.grad.year.<span class="fl">1.</span>model.preprune<span class="sc">$</span>cptable[, <span class="st">"xerror"</span>]), <span class="st">"CP"</span>]</span>
<span id="cb76-13"><a href="#cb76-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-14"><a href="#cb76-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-15"><a href="#cb76-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Prune the hr_base_model based on the optimal cp value</span></span>
<span id="cb76-16"><a href="#cb76-16" aria-hidden="true" tabindex="-1"></a>not.meaningful.grad.year.<span class="fl">1.</span>model.postprune <span class="ot">&lt;-</span> rpart<span class="sc">::</span><span class="fu">prune</span>(not.meaningful.grad.year.<span class="fl">1.</span>model.preprune, <span class="at">cp =</span> cp_1se)</span>
<span id="cb76-17"><a href="#cb76-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-18"><a href="#cb76-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute the accuracy of the pruned tree</span></span>
<span id="cb76-19"><a href="#cb76-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-20"><a href="#cb76-20" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(not.meaningful.grad.year.<span class="fl">1.</span>model.postprune, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb76-21"><a href="#cb76-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-22"><a href="#cb76-22" aria-hidden="true" tabindex="-1"></a>accuracy_postprun <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.1</span>)</span>
<span id="cb76-23"><a href="#cb76-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-24"><a href="#cb76-24" aria-hidden="true" tabindex="-1"></a><span class="fu">percent</span>(accuracy_postprun, <span class="at">accuracy =</span> .<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "58.6%"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(not.meaningful.grad.year.<span class="fl">1.</span>model.postprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.1 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0, maxdepth = maxdepth, minsplit = minsplit, 
        minbucket = minbucket))

Variables actually used in tree construction:
[1] cte.achievement Gender          MCA.M           RaceEthnicity  
[5] SpecialEdStatus

Root node error: 11368/24807 = 0.45826

n= 24807 

         CP nsplit rel error  xerror      xstd
1 0.0307442      0   1.00000 1.00000 0.0069033
2 0.0066268      2   0.93851 0.93754 0.0068585
3 0.0042224      5   0.91863 0.92171 0.0068435</code></pre>
</div>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(not.meaningful.grad.year.<span class="fl">1.</span>model.postprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Accuracy: 58.8% -&gt; 58.6%</li>
<li>Predictors: 5/13
<ul>
<li>Demographics: 3/4 - Gender, Race, Special education</li>
<li>HS characteristics: 0/3</li>
<li>HS Accomplishments: 2/6 - CTE, MCA math</li>
</ul></li>
<li>Lowest xerror
<ul>
<li>Step: 3</li>
<li>xerror: 0.92171</li>
<li>cp: 0.0042224</li>
<li>Splits: 5</li>
</ul></li>
<li>Total splits: 5</li>
</ul>
<p>So, the accuracy of these are;</p>
<ul>
<li>Base model: 54.6%</li>
<li>Pre-pruned model: 58.8%</li>
<li>Post-pruned model: 58.6%</li>
</ul>
<p>The post-pruned model provides a much simpler model while also retaining the same accuracy. I will use that model.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot tree</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rpart.plot</span>(not.meaningful.grad.year.<span class="fl">1.</span>model.postprune, <span class="at">nn =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="main-takeaway-5" class="level3">
<h3 class="anchored" data-anchor-id="main-takeaway-5"><strong>Main takeaway</strong></h3>
<p>At one year after graduation, <strong>CTE concentrator/completor status and academic preparation (MCA Math)</strong> are the strongest anchors for meaningful employment in the region. In contrast, lack of CTE engagement, special education status, and weaker math preparation increase the likelihood of being neither meaningfully employed nor attending postsecondary.</p>
</section>
<section id="key-findings-3" class="level3">
<h3 class="anchored" data-anchor-id="key-findings-3"><strong>Key Findings</strong></h3>
<ul>
<li><strong>Model accuracy:</strong> 58.6% (post-pruned model, 5 splits).</li>
<li><strong>Most important predictors:</strong> <em>CTE achievement</em>, <em>SpecialEdStatus</em>, <em>Gender</em>, <em>MCA Math scores</em>, and <em>Race/Ethnicity</em>.</li>
<li><strong>Overall pattern:</strong> Early anchoring is strongly tied to <strong>CTE completion</strong> and <strong>basic academic preparation</strong>, with demographic factors adding nuance to regional outcomes.</li>
</ul>
</section>
<section id="interpretation-3" class="level3">
<h3 class="anchored" data-anchor-id="interpretation-3"><strong>Interpretation</strong></h3>
<ul>
<li><strong>CTE achievement:</strong> Students who completed a CTE program (concentrators/completors) were more likely to be regionally employed. Lack of CTE achievement was the strongest predictor of being in the “not meaningful, not attending PS” group.</li>
<li><strong>SpecialEdStatus:</strong> Among CTE concentrators/completors, students without SpecialEd status were more often anchored regionally; those with SpecialEd involvement faced higher risk of disconnection.</li>
<li><strong>Gender and Race/Ethnicity:</strong> Male students, particularly White/Hispanic/Unknown groups, showed higher disconnection risk when combined with low academic performance.</li>
<li><strong>MCA Math:</strong> Scores ≥3 increased the probability of meaningful regional employment, while weaker math performance tilted outcomes toward disconnection.</li>
</ul>
</section>
<section id="decision-tree-interpretation-3" class="level3">
<h3 class="anchored" data-anchor-id="decision-tree-interpretation-3"><strong>Decision Tree Interpretation</strong></h3>
<ul>
<li><strong>Root split:</strong> CTE achievement is the most decisive factor. Without CTE completion, students were substantially more likely to be disconnected.</li>
<li><strong>SpecialEd branch:</strong> Even among CTE concentrators, SpecialEd status created a barrier to regional employment.</li>
<li><strong>Gender/Race branch:</strong> Male students in certain racial/ethnic groups were less likely to hold meaningful regional employment, especially with low MCA Math scores.</li>
<li><strong>Academic branch:</strong> Stronger MCA Math scores offset some of the demographic barriers, anchoring students regionally.</li>
</ul>
</section>
<section id="summary-3" class="level3">
<h3 class="anchored" data-anchor-id="summary-3"><strong>Summary</strong></h3>
<p>At one year, <strong>CTE concentrator/completor status is the key anchor for meaningful regional employment</strong>, especially when combined with moderate academic preparation. The main barriers are <strong>lack of CTE engagement, SpecialEd involvement, weaker math skills, and certain gender/racial subgroups</strong>. This points to the importance of early academic and career engagement pathways in preventing disconnection.</p>
</section>
<section id="policypractice-implications-5" class="level3">
<h3 class="anchored" data-anchor-id="policypractice-implications-5"><strong>Policy/Practice Implications</strong></h3>
<ul>
<li><strong>Expand access to and completion of CTE pathways</strong>, as CTE concentrators show the strongest early anchoring to the regional workforce.</li>
<li><strong>Provide targeted supports for SpecialEd students</strong> to strengthen their transition into meaningful work.</li>
<li><strong>Address gender and racial disparities</strong> through mentorship, advising, and employer partnerships focused on retention in regional employment.</li>
<li><strong>Ensure students achieve basic academic preparation (e.g., math proficiency)</strong> to bolster the anchoring effect of CTE pathways.</li>
</ul>
<p><br></p>
</section>
</section>
<section id="five-years-after-high-school" class="level2">
<h2 class="anchored" data-anchor-id="five-years-after-high-school">Five years after high school</h2>
<p>First I’m going to filter out the data so only individuals that had meaningful employment in the region or do not have meaningful employment in Minnesota or the region and are not attending post-secondary are in the dataset. This time I’m going to leave in the post-secondary variables.</p>
<p>The table below shows that 61% of the individuals have meaningful employment in their high school region compared to 39% that do not have meaningful employment in Minnesota or their region and are not attending post-secondary.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>not.meaningful.grad.year<span class="fl">.5</span> <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>grad.year<span class="fl">.1</span>, <span class="sc">-</span>grad.year<span class="fl">.10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(grad.year<span class="fl">.5</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Meaningful emp region"</span>, <span class="st">"Not meaningful, not attending ps"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">grad.year.5 =</span> <span class="fu">as.factor</span>(grad.year<span class="fl">.5</span>))</span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a><span class="fu">comma</span>(<span class="fu">nrow</span>(not.meaningful.grad.year<span class="fl">.5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "37,639"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(<span class="at">data =</span> not.meaningful.grad.year<span class="fl">.5</span> <span class="sc">%&gt;%</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>            <span class="fu">group_by</span>(grad.year<span class="fl">.5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>            <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mutate</span>(<span class="at">pct =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>            <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>),</span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">class =</span> <span class="st">"cell-border stripe"</span>, </span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">filter =</span> <span class="st">"top"</span>, </span>
<span id="cb84-10"><a href="#cb84-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">rownames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb84-11"><a href="#cb84-11" aria-hidden="true" tabindex="-1"></a>          <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb84-12"><a href="#cb84-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">columnDefs =</span> <span class="fu">list</span>(<span class="fu">list</span>(<span class="at">className =</span> <span class="st">"dt-center"</span>, <span class="at">targets =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)))) <span class="sc">%&gt;%</span></span>
<span id="cb84-13"><a href="#cb84-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatCurrency</span>(<span class="dv">2</span>, <span class="st">""</span>, <span class="at">digits =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb84-14"><a href="#cb84-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatPercentage</span>(<span class="dv">3</span>, <span class="at">digits =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-49c1708236f3af3f2f78" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-49c1708236f3af3f2f78">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Meaningful emp region&quot;,&quot;Not meaningful, not attending ps&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"14839\" data-max=\"22800\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0.39424533064109\" data-max=\"0.60575466935891\" data-scale=\"15\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["Meaningful emp region","Not meaningful, not attending ps"],[22800,14839],[0.6057546693589096,0.3942453306410904]],"container":"<table class=\"cell-border stripe\">\n  <thead>\n    <tr>\n      <th>grad.year.5<\/th>\n      <th>n<\/th>\n      <th>pct<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"targets":2,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatPercentage(data, 1, 3, \",\", \".\", null);\n  }"},{"targets":1,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatCurrency(data, \"\", 0, 3, \",\", \".\", true, null);\n  }"},{"className":"dt-center","targets":[1,2]},{"name":"grad.year.5","targets":0},{"name":"n","targets":1},{"name":"pct","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":["options.columnDefs.0.render","options.columnDefs.1.render"],"jsHooks":[]}</script>
</div>
</div>
<p><br></p>
<section id="base-model-4" class="level3">
<h3 class="anchored" data-anchor-id="base-model-4">Base Model</h3>
<p>I know the base model is going to overfit and provide an overly complex tree due to having a cost penalty of 0. So I’m just going to print the complexity plot in order to see what the appropriate CP would be to minimize xerror.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>sample_ind <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">nrow</span>(not.meaningful.grad.year<span class="fl">.5</span>), <span class="fu">nrow</span>(not.meaningful.grad.year<span class="fl">.5</span>) <span class="sc">*</span>.<span class="dv">7</span>)</span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> not.meaningful.grad.year<span class="fl">.5</span>[sample_ind,]</span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> not.meaningful.grad.year<span class="fl">.5</span>[<span class="sc">-</span>sample_ind,]</span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-9"><a href="#cb85-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Base model</span></span>
<span id="cb85-10"><a href="#cb85-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-11"><a href="#cb85-11" aria-hidden="true" tabindex="-1"></a>not.meaningful.grad.year.<span class="fl">5.</span>model <span class="ot">&lt;-</span> <span class="fu">rpart</span>(grad.year<span class="fl">.5</span> <span class="sc">~</span> ., <span class="at">data =</span> train, <span class="at">method =</span> <span class="st">"class"</span>, <span class="at">control =</span> <span class="fu">rpart.control</span>(<span class="at">cp =</span> <span class="dv">0</span>))</span>
<span id="cb85-12"><a href="#cb85-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-13"><a href="#cb85-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Accuracy</span></span>
<span id="cb85-14"><a href="#cb85-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-15"><a href="#cb85-15" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(not.meaningful.grad.year.<span class="fl">5.</span>model, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb85-16"><a href="#cb85-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-17"><a href="#cb85-17" aria-hidden="true" tabindex="-1"></a>accuracy_base <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.5</span>)</span>
<span id="cb85-18"><a href="#cb85-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-19"><a href="#cb85-19" aria-hidden="true" tabindex="-1"></a><span class="fu">percent</span>(accuracy_base, <span class="at">accuracy =</span> .<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "57.8%"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(not.meaningful.grad.year.<span class="fl">5.</span>model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.5 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0))

Variables actually used in tree construction:
 [1] ACTCompositeScore         avg.unemp.rate           
 [3] avg.wages.pct.state       cte.achievement          
 [5] Dem_Desc                  economic.status          
 [7] Gender                    highest.cred.level       
 [9] MCA.M                     MCA.R                    
[11] MCA.S                     ps.grad                  
[13] ps.grad.InstitutionSector ps.grad.location         
[15] RaceEthnicity             SpecialEdStatus          
[17] total.cte.courses.taken  

Root node error: 10317/26347 = 0.39158

n= 26347 

           CP nsplit rel error  xerror      xstd
1  1.0904e-02      0   1.00000 1.00000 0.0076793
2  6.9788e-03      3   0.96443 0.97383 0.0076418
3  5.3310e-03      6   0.94233 0.95667 0.0076152
4  3.1986e-03      8   0.93167 0.94029 0.0075883
5  1.6155e-03      9   0.92847 0.93826 0.0075849
6  1.3570e-03     13   0.92197 0.93574 0.0075806
7  1.2116e-03     14   0.92062 0.93477 0.0075789
8  9.6927e-04     16   0.91819 0.93719 0.0075830
9  9.3696e-04     24   0.90966 0.93700 0.0075827
10 8.7235e-04     33   0.90123 0.93835 0.0075850
11 8.2388e-04     35   0.89949 0.93971 0.0075873
12 7.7542e-04     37   0.89784 0.94126 0.0075899
13 6.7849e-04     44   0.89241 0.94194 0.0075911
14 6.4618e-04     47   0.89038 0.94349 0.0075937
15 6.3003e-04     50   0.88844 0.94465 0.0075956
16 5.8156e-04     54   0.88524 0.94427 0.0075949
17 5.3310e-04     64   0.87874 0.95066 0.0076055
18 4.8464e-04     67   0.87671 0.95221 0.0076080
19 4.3617e-04     73   0.87380 0.95047 0.0076052
20 3.8771e-04     84   0.86876 0.95357 0.0076102
21 3.6832e-04    102   0.86110 0.95473 0.0076120
22 3.5540e-04    123   0.85189 0.95503 0.0076125
23 3.3925e-04    127   0.85034 0.95793 0.0076172
24 3.2309e-04    159   0.83755 0.95764 0.0076167
25 3.1501e-04    171   0.83367 0.96016 0.0076207
26 2.9078e-04    181   0.83028 0.96336 0.0076257
27 2.5847e-04    287   0.79393 0.96704 0.0076314
28 2.4770e-04    329   0.78240 0.97480 0.0076432
29 2.4232e-04    348   0.77649 0.97771 0.0076475
30 2.3263e-04    422   0.75623 0.97877 0.0076491
31 2.2616e-04    427   0.75506 0.98003 0.0076510
32 2.1809e-04    460   0.74741 0.98091 0.0076523
33 1.9385e-04    478   0.74275 0.99331 0.0076701
34 1.6155e-04    618   0.71261 1.00320 0.0076837
35 1.5508e-04    660   0.70534 1.01347 0.0076973
36 1.5231e-04    694   0.69759 1.01338 0.0076972
37 1.4539e-04    701   0.69652 1.01551 0.0077000
38 1.3570e-04    793   0.68256 1.01909 0.0077045
39 1.2924e-04    798   0.68188 1.02200 0.0077082
40 1.2462e-04    844   0.67520 1.02578 0.0077129
41 1.2116e-04    886   0.66764 1.02840 0.0077161
42 9.6927e-05    912   0.66405 1.03073 0.0077190
43 8.6158e-05   1119   0.64282 1.04740 0.0077384
44 7.2696e-05   1138   0.64117 1.05176 0.0077433
45 6.4618e-05   1161   0.63924 1.05757 0.0077496
46 4.8464e-05   1191   0.63730 1.06097 0.0077532
47 3.8771e-05   1286   0.63255 1.06959 0.0077622
48 3.2309e-05   1315   0.63129 1.07415 0.0077667
49 2.9078e-05   1359   0.62974 1.07415 0.0077667
50 2.4232e-05   1369   0.62945 1.07628 0.0077688
51 1.9385e-05   1392   0.62886 1.07648 0.0077690
52 1.6155e-05   1402   0.62867 1.07812 0.0077706
53 9.6927e-06   1408   0.62857 1.07822 0.0077707
54 0.0000e+00   1418   0.62848 1.07822 0.0077707</code></pre>
</div>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(not.meaningful.grad.year.<span class="fl">5.</span>model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Key takeaways</strong></p>
<ul>
<li>Accuracy: 57.8%</li>
<li>Predictors: 17/17
<ul>
<li>Demographics: 4/4</li>
<li>HS characteristics: 3/3</li>
<li>HS Accomplishments: 6/6</li>
<li>Post-secondary: 4/4</li>
</ul></li>
<li>Lowest xerror
<ul>
<li>Step: 7</li>
<li>xerror: 0.93477</li>
<li>cp: 1.2116e-03</li>
<li>Splits: 14</li>
</ul></li>
<li>Total splits: 1,418</li>
</ul>
<p><br></p>
</section>
<section id="pre-pruning-4" class="level3">
<h3 class="anchored" data-anchor-id="pre-pruning-4">Pre-pruning</h3>
<p>Next, we need to prune. We can either pre-prune or post-prune. We will start with pre-pruning and use each method - max depth, min depth, and min bucket. It’s recommended that I start with the following parameters;</p>
<ul>
<li>maxdepth: 5</li>
<li>minsplit: round(2% of nrow(train)).</li>
<li>minbucket: round(minsplit / 3).</li>
<li>cp = 0</li>
</ul>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>maxdepth <span class="ot">=</span> <span class="dv">5</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>minsplit <span class="ot">=</span> <span class="fu">round</span>(.<span class="dv">02</span><span class="sc">*</span><span class="fu">nrow</span>(train))</span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>minbucket <span class="ot">=</span> <span class="fu">round</span>(minsplit <span class="sc">/</span> <span class="dv">3</span>)</span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a>not.meaningful.grad.year.<span class="fl">5.</span>model.preprune <span class="ot">&lt;-</span> <span class="fu">rpart</span>(grad.year<span class="fl">.5</span> <span class="sc">~</span> ., <span class="at">data =</span> train, <span class="at">method =</span> <span class="st">"class"</span>, </span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a>                   <span class="at">control =</span> <span class="fu">rpart.control</span>(<span class="at">cp =</span> <span class="dv">0</span>, <span class="at">maxdepth =</span> maxdepth, <span class="at">minsplit =</span> minsplit, <span class="at">minbucket =</span> minbucket))</span>
<span id="cb90-9"><a href="#cb90-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-10"><a href="#cb90-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Accuracy</span></span>
<span id="cb90-11"><a href="#cb90-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-12"><a href="#cb90-12" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(not.meaningful.grad.year.<span class="fl">5.</span>model.preprune, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb90-13"><a href="#cb90-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-14"><a href="#cb90-14" aria-hidden="true" tabindex="-1"></a>accuracy_preprun <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.5</span>)</span>
<span id="cb90-15"><a href="#cb90-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-16"><a href="#cb90-16" aria-hidden="true" tabindex="-1"></a><span class="fu">percent</span>(accuracy_preprun, <span class="at">accuracy =</span> .<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "62.8%"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(not.meaningful.grad.year.<span class="fl">5.</span>model.preprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.5 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0, maxdepth = maxdepth, minsplit = minsplit, 
        minbucket = minbucket))

Variables actually used in tree construction:
[1] cte.achievement         Gender                  highest.cred.level     
[4] ps.grad.location        RaceEthnicity           SpecialEdStatus        
[7] total.cte.courses.taken

Root node error: 10317/26347 = 0.39158

n= 26347 

         CP nsplit rel error  xerror      xstd
1 0.0109043      0   1.00000 1.00000 0.0076793
2 0.0069788      3   0.96443 0.96472 0.0076278
3 0.0053310      6   0.94233 0.95784 0.0076170
4 0.0013570      8   0.93167 0.93961 0.0075872
5 0.0000000      9   0.93031 0.94000 0.0075878</code></pre>
</div>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(not.meaningful.grad.year.<span class="fl">5.</span>model.preprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Key takeaways</strong></p>
<ul>
<li>Accuracy: 57.8% -&gt; 62.8%</li>
<li>Predictors: 7/17
<ul>
<li>Demographics: 3/4 - Gender, Race, Special Education</li>
<li>HS characteristics: 0/3</li>
<li>HS Accomplishments: 2/6 - CTE</li>
<li>Post-secondary: 2/4 - highest credential, grad location</li>
</ul></li>
<li>Lowest xerror
<ul>
<li>Step: 4</li>
<li>xerror: 0.93961</li>
<li>cp: 0.0013570</li>
<li>Splits: 8</li>
</ul></li>
<li>Total splits: 9</li>
</ul>
<p><br></p>
</section>
<section id="post-pruning-4" class="level3">
<h3 class="anchored" data-anchor-id="post-pruning-4">Post-pruning</h3>
<p>The idea here is to allow the decision tree to grow fully and observe the CP value. There are two methods for identifying the CP code;</p>
<ol type="1">
<li>Use the cp value with the lowest xerror from the base model.</li>
<li>Use the cp value with the next lowest xerror that is within the standard error.</li>
</ol>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>cp_table <span class="ot">&lt;-</span> not.meaningful.grad.year.<span class="fl">5.</span>model.preprune<span class="sc">$</span>cptable</span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>min_xerror <span class="ot">&lt;-</span> <span class="fu">min</span>(cp_table[, <span class="st">"xerror"</span>])</span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>min_xerror_se <span class="ot">&lt;-</span> cp_table[<span class="fu">which.min</span>(cp_table[,<span class="st">"xerror"</span>]), <span class="st">"xstd"</span>]</span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a>threshold <span class="ot">&lt;-</span> min_xerror <span class="sc">+</span> min_xerror_se</span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-8"><a href="#cb95-8" aria-hidden="true" tabindex="-1"></a>one_se_index <span class="ot">&lt;-</span> <span class="fu">which</span>(cp_table[, <span class="st">"xerror"</span>] <span class="sc">&lt;=</span> threshold)[<span class="dv">1</span>] </span>
<span id="cb95-9"><a href="#cb95-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-10"><a href="#cb95-10" aria-hidden="true" tabindex="-1"></a>cp_1se <span class="ot">&lt;-</span> cp_table[one_se_index, <span class="st">"CP"</span>]</span>
<span id="cb95-11"><a href="#cb95-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-12"><a href="#cb95-12" aria-hidden="true" tabindex="-1"></a>optimal_cp <span class="ot">&lt;-</span> not.meaningful.grad.year.<span class="fl">5.</span>model.preprune<span class="sc">$</span>cptable[<span class="fu">which.min</span>(not.meaningful.grad.year.<span class="fl">5.</span>model.preprune<span class="sc">$</span>cptable[, <span class="st">"xerror"</span>]), <span class="st">"CP"</span>]</span>
<span id="cb95-13"><a href="#cb95-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-14"><a href="#cb95-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-15"><a href="#cb95-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Prune the hr_base_model based on the optimal cp value</span></span>
<span id="cb95-16"><a href="#cb95-16" aria-hidden="true" tabindex="-1"></a>not.meaningful.grad.year.<span class="fl">5.</span>model.postprune <span class="ot">&lt;-</span> rpart<span class="sc">::</span><span class="fu">prune</span>(not.meaningful.grad.year.<span class="fl">5.</span>model.preprune, <span class="at">cp =</span> cp_1se)</span>
<span id="cb95-17"><a href="#cb95-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-18"><a href="#cb95-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute the accuracy of the pruned tree</span></span>
<span id="cb95-19"><a href="#cb95-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-20"><a href="#cb95-20" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(not.meaningful.grad.year.<span class="fl">5.</span>model.postprune, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb95-21"><a href="#cb95-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-22"><a href="#cb95-22" aria-hidden="true" tabindex="-1"></a>accuracy_postprun <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.5</span>)</span>
<span id="cb95-23"><a href="#cb95-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-24"><a href="#cb95-24" aria-hidden="true" tabindex="-1"></a><span class="fu">percent</span>(accuracy_postprun, <span class="at">accuracy =</span> .<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "62.7%"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(not.meaningful.grad.year.<span class="fl">5.</span>model.postprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.5 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0, maxdepth = maxdepth, minsplit = minsplit, 
        minbucket = minbucket))

Variables actually used in tree construction:
[1] cte.achievement         Gender                  ps.grad.location       
[4] RaceEthnicity           SpecialEdStatus         total.cte.courses.taken

Root node error: 10317/26347 = 0.39158

n= 26347 

         CP nsplit rel error  xerror      xstd
1 0.0109043      0   1.00000 1.00000 0.0076793
2 0.0069788      3   0.96443 0.96472 0.0076278
3 0.0053310      6   0.94233 0.95784 0.0076170
4 0.0013570      8   0.93167 0.93961 0.0075872</code></pre>
</div>
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(not.meaningful.grad.year.<span class="fl">5.</span>model.postprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Key takeaways</strong></p>
<ul>
<li>Accuracy: 62.8% –&gt; 62.7%</li>
<li>Predictors: 6/17
<ul>
<li>Demographics: 3/4 - Gender, Race, Special Education</li>
<li>HS characteristics: 0/3</li>
<li>HS Accomplishments: 2/6 - CTE</li>
<li>Post-secondary: 1/4 - grad location</li>
</ul></li>
<li>Lowest xerror
<ul>
<li>Step: 4</li>
<li>xerror: 0.93961</li>
<li>cp: 0.0013570</li>
<li>Splits: 8</li>
</ul></li>
<li>Total splits: 8</li>
</ul>
<p>So, the accuracy of these are;</p>
<ul>
<li>Base model: 57.8%</li>
<li>Pre-pruned model: 62.8%</li>
<li>Post-pruned model: 62.7%</li>
</ul>
<p>The post-pruned model provides a simpler modelwhile also retaining the same accuracy. I will dive into that one below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot tree</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rpart.plot</span>(not.meaningful.grad.year.<span class="fl">5.</span>model.postprune, <span class="at">nn =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="main-takeaway-6" class="level3">
<h3 class="anchored" data-anchor-id="main-takeaway-6"><strong>Main takeaway</strong></h3>
<p>At five years after graduation, <strong>regional employment is anchored by postsecondary participation/completion in the region and CTE engagement</strong>, while barriers include SpecialEd status, lack of CTE involvement, and weaker subgroup outcomes by gender and race/ethnicity. Postsecondary ties to the region and CTE pathways serve as the clearest protectors against being disconnected from both work and education.</p>
</section>
<section id="key-findings-4" class="level3">
<h3 class="anchored" data-anchor-id="key-findings-4"><strong>Key Findings</strong></h3>
<ul>
<li><strong>Model accuracy:</strong> 62.7% (post-pruned model, 8 splits).</li>
<li><strong>Most important predictors:</strong> <em>Postsecondary location (regional PS)</em>, <em>CTE achievement</em>, <em>Total CTE courses taken</em>, <em>Gender</em>, <em>Race/Ethnicity</em>, and <em>SpecialEdStatus</em>.</li>
<li><strong>Overall pattern:</strong> <strong>Postsecondary engagement and CTE depth</strong> anchor graduates regionally, while <strong>disadvantage markers (SpecialEd, no CTE, subgroup gaps)</strong> increase disconnection risk.</li>
</ul>
</section>
<section id="interpretation-4" class="level3">
<h3 class="anchored" data-anchor-id="interpretation-4"><strong>Interpretation</strong></h3>
<ul>
<li><strong>Postsecondary location:</strong> Graduates who attended or graduated from a Southern Minnesota postsecondary institution were far more likely to hold meaningful regional employment.</li>
<li><strong>CTE achievement:</strong> CTE concentrators/completors and even participants with ≥1 CTE course were more likely to be employed regionally compared to peers with no CTE involvement.</li>
<li><strong>Race/Ethnicity:</strong> Asian, Pacific Islander, Hispanic, and White students without CTE depth were more likely to fall into the “not meaningful, not attending” group.</li>
<li><strong>Gender:</strong> Males, especially when not combined with CTE anchors, had higher rates of disconnection.</li>
<li><strong>SpecialEdStatus:</strong> Special education students continued to face greater disconnection risk at year 5, even with some CTE exposure.</li>
</ul>
</section>
<section id="decision-tree-interpretation-4" class="level3">
<h3 class="anchored" data-anchor-id="decision-tree-interpretation-4"><strong>Decision Tree Interpretation</strong></h3>
<ul>
<li><strong>Root split:</strong> Postsecondary location was decisive — regional PS attendance or graduation anchored students strongly to regional employment.</li>
<li><strong>CTE branch:</strong> Among those without regional PS ties, CTE concentrators/completors were far more likely to work regionally.</li>
<li><strong>Race/Ethnicity + Gender branches:</strong> Outcomes varied by subgroup, with males and certain racial/ethnic groups showing higher disconnection risk absent CTE anchors.</li>
<li><strong>SpecialEd branch:</strong> SpecialEd status further separated students toward the “not meaningful, not attending” group, even within CTE subgroups.</li>
</ul>
</section>
<section id="summary-4" class="level3">
<h3 class="anchored" data-anchor-id="summary-4"><strong>Summary</strong></h3>
<p>At five years, <strong>regional postsecondary experiences and CTE completion are the strongest anchors for meaningful employment in Southern Minnesota</strong>. Students without CTE involvement, those with SpecialEd status, and certain demographic subgroups face higher risk of disconnection. The combination of <strong>postsecondary ties + CTE depth</strong> creates a powerful pathway into stable regional employment.</p>
</section>
<section id="policypractice-implications-6" class="level3">
<h3 class="anchored" data-anchor-id="policypractice-implications-6"><strong>Policy/Practice Implications</strong></h3>
<ul>
<li><strong>Expand regional postsecondary opportunities and connections</strong>, as these institutions are the strongest anchors.</li>
<li><strong>Scale CTE concentrator and completer pathways</strong>, ensuring access for all students.</li>
<li><strong>Provide additional transition support for SpecialEd students</strong>, linking them with CTE and local employment.</li>
<li><strong>Address subgroup disparities (gender, race/ethnicity)</strong> by ensuring equitable access to regional PS and CTE programs, alongside mentorship and employer partnerships.</li>
</ul>
<p><br></p>
</section>
</section>
<section id="ten-years-after-high-school" class="level2">
<h2 class="anchored" data-anchor-id="ten-years-after-high-school">Ten years after high school</h2>
<p>First I’m going to filter out the data so only individuals that had meaningful employment in the region or do not have meaningful employment in Minnesota or the region and are not attending post-secondary are in the dataset. This time I’m going to leave in the post-secondary variables.</p>
<p>The table below shows that 65% of the individuals have meaningful employment in their high school region compared to 35% that do not have meaningful employment in Minnesota or their region and are not attending post-secondary.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>not.meaningful.grad.year<span class="fl">.10</span> <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>grad.year<span class="fl">.1</span>, <span class="sc">-</span>grad.year<span class="fl">.5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(grad.year<span class="fl">.10</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Meaningful emp region"</span>, <span class="st">"Not meaningful, not attending ps"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">grad.year.10 =</span> <span class="fu">as.factor</span>(grad.year<span class="fl">.10</span>))</span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-6"><a href="#cb101-6" aria-hidden="true" tabindex="-1"></a><span class="fu">comma</span>(<span class="fu">nrow</span>(not.meaningful.grad.year<span class="fl">.10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "21,307"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(<span class="at">data =</span> not.meaningful.grad.year<span class="fl">.10</span> <span class="sc">%&gt;%</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>            <span class="fu">group_by</span>(grad.year<span class="fl">.10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>            <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mutate</span>(<span class="at">pct =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a>            <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb103-7"><a href="#cb103-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>),</span>
<span id="cb103-8"><a href="#cb103-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">class =</span> <span class="st">"cell-border stripe"</span>, </span>
<span id="cb103-9"><a href="#cb103-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">filter =</span> <span class="st">"top"</span>, </span>
<span id="cb103-10"><a href="#cb103-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">rownames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb103-11"><a href="#cb103-11" aria-hidden="true" tabindex="-1"></a>          <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb103-12"><a href="#cb103-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">columnDefs =</span> <span class="fu">list</span>(<span class="fu">list</span>(<span class="at">className =</span> <span class="st">"dt-center"</span>, <span class="at">targets =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)))) <span class="sc">%&gt;%</span></span>
<span id="cb103-13"><a href="#cb103-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatCurrency</span>(<span class="dv">2</span>, <span class="st">""</span>, <span class="at">digits =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb103-14"><a href="#cb103-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatPercentage</span>(<span class="dv">3</span>, <span class="at">digits =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-f855e74c913ad08990ef" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-f855e74c913ad08990ef">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Meaningful emp region&quot;,&quot;Not meaningful, not attending ps&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"7394\" data-max=\"13913\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0.347022105411367\" data-max=\"0.652977894588633\" data-scale=\"15\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["Meaningful emp region","Not meaningful, not attending ps"],[13913,7394],[0.6529778945886329,0.3470221054113671]],"container":"<table class=\"cell-border stripe\">\n  <thead>\n    <tr>\n      <th>grad.year.10<\/th>\n      <th>n<\/th>\n      <th>pct<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"targets":2,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatPercentage(data, 1, 3, \",\", \".\", null);\n  }"},{"targets":1,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatCurrency(data, \"\", 0, 3, \",\", \".\", true, null);\n  }"},{"className":"dt-center","targets":[1,2]},{"name":"grad.year.10","targets":0},{"name":"n","targets":1},{"name":"pct","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":["options.columnDefs.0.render","options.columnDefs.1.render"],"jsHooks":[]}</script>
</div>
</div>
<p><br></p>
<section id="base-model-5" class="level3">
<h3 class="anchored" data-anchor-id="base-model-5">Base Model</h3>
<p>I know the base model is going to overfit and provide an overly complex tree due to having a cost penalty of 0. So I’m just going to print the complexity plot in order to see what the appropriate CP would be to minimize xerror.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>sample_ind <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">nrow</span>(not.meaningful.grad.year<span class="fl">.10</span>), <span class="fu">nrow</span>(not.meaningful.grad.year<span class="fl">.10</span>) <span class="sc">*</span>.<span class="dv">7</span>)</span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> not.meaningful.grad.year<span class="fl">.10</span>[sample_ind,]</span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> not.meaningful.grad.year<span class="fl">.10</span>[<span class="sc">-</span>sample_ind,]</span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-9"><a href="#cb104-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Base model</span></span>
<span id="cb104-10"><a href="#cb104-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-11"><a href="#cb104-11" aria-hidden="true" tabindex="-1"></a>not.meaningful.grad.year.<span class="fl">10.</span>model <span class="ot">&lt;-</span> <span class="fu">rpart</span>(grad.year<span class="fl">.10</span> <span class="sc">~</span> ., <span class="at">data =</span> train, <span class="at">method =</span> <span class="st">"class"</span>, <span class="at">control =</span> <span class="fu">rpart.control</span>(<span class="at">cp =</span> <span class="dv">0</span>))</span>
<span id="cb104-12"><a href="#cb104-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-13"><a href="#cb104-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Accuracy</span></span>
<span id="cb104-14"><a href="#cb104-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-15"><a href="#cb104-15" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(not.meaningful.grad.year.<span class="fl">10.</span>model, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb104-16"><a href="#cb104-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-17"><a href="#cb104-17" aria-hidden="true" tabindex="-1"></a>accuracy_base <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.10</span>)</span>
<span id="cb104-18"><a href="#cb104-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-19"><a href="#cb104-19" aria-hidden="true" tabindex="-1"></a><span class="fu">percent</span>(accuracy_base, <span class="at">accuracy =</span> .<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "59.0%"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(not.meaningful.grad.year.<span class="fl">10.</span>model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.10 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0))

Variables actually used in tree construction:
 [1] ACTCompositeScore         avg.unemp.rate           
 [3] avg.wages.pct.state       cte.achievement          
 [5] Dem_Desc                  economic.status          
 [7] Gender                    highest.cred.level       
 [9] MCA.M                     MCA.R                    
[11] MCA.S                     ps.grad                  
[13] ps.grad.InstitutionSector ps.grad.location         
[15] RaceEthnicity             SpecialEdStatus          
[17] total.cte.courses.taken  

Root node error: 5170/14914 = 0.34665

n= 14914 

           CP nsplit rel error  xerror     xstd
1  4.5132e-03      0   1.00000 1.00000 0.011242
2  2.9014e-03      6   0.97021 0.98046 0.011189
3  1.9342e-03      9   0.96151 0.97853 0.011183
4  1.6441e-03     11   0.95764 0.98259 0.011195
5  1.4507e-03     13   0.95435 0.98375 0.011198
6  1.3540e-03     15   0.95145 0.98607 0.011204
7  1.1605e-03     18   0.94739 0.98414 0.011199
8  9.6712e-04     19   0.94623 0.98240 0.011194
9  9.1876e-04     22   0.94333 0.98607 0.011204
10 9.0264e-04     33   0.93211 0.98859 0.011211
11 8.7041e-04     42   0.92302 0.98820 0.011210
12 7.7369e-04     46   0.91954 0.98801 0.011209
13 6.7698e-04     49   0.91721 0.99342 0.011224
14 6.4475e-04     67   0.90464 0.99188 0.011220
15 5.8027e-04     72   0.90116 0.99961 0.011241
16 5.3191e-04     87   0.89188 1.00658 0.011259
17 5.2501e-04    107   0.87911 1.00600 0.011257
18 5.1580e-04    130   0.86344 1.00716 0.011260
19 4.8356e-04    137   0.85977 1.01277 0.011275
20 4.5132e-04    155   0.85087 1.01741 0.011286
21 4.3520e-04    191   0.83114 1.01760 0.011287
22 4.2553e-04    195   0.82940 1.01760 0.011287
23 3.8685e-04    201   0.82669 1.02147 0.011297
24 3.2237e-04    297   0.78511 1.02882 0.011315
25 3.0948e-04    309   0.78124 1.03946 0.011341
26 2.9014e-04    360   0.76151 1.04178 0.011346
27 2.7079e-04    393   0.75164 1.04662 0.011357
28 2.6376e-04    399   0.74990 1.05319 0.011373
29 2.5790e-04    411   0.74662 1.05416 0.011375
30 2.4178e-04    436   0.73617 1.05725 0.011382
31 2.3211e-04    440   0.73520 1.06190 0.011392
32 2.2566e-04    452   0.73230 1.06190 0.011392
33 1.9342e-04    462   0.72921 1.07853 0.011429
34 1.5474e-04    546   0.71219 1.08298 0.011438
35 1.4067e-04    566   0.70890 1.09246 0.011458
36 1.2895e-04    577   0.70735 1.09981 0.011473
37 1.1605e-04    603   0.70348 1.10116 0.011476
38 9.6712e-05    608   0.70290 1.10986 0.011493
39 7.7369e-05    674   0.69652 1.11277 0.011498
40 6.4475e-05    684   0.69574 1.12224 0.011516
41 4.8356e-05    709   0.69400 1.12398 0.011519
42 2.7632e-05    724   0.69323 1.12766 0.011526
43 0.0000e+00    731   0.69304 1.12824 0.011527</code></pre>
</div>
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(not.meaningful.grad.year.<span class="fl">10.</span>model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Key takeaways</strong></p>
<ul>
<li>Accuracy: 59.0%</li>
<li>Predictors: 17/17
<ul>
<li>Demographics: 4/4</li>
<li>HS characteristics: 3/3</li>
<li>HS Accomplishments: 6/6</li>
<li>Post-secondary: 4/4</li>
</ul></li>
<li>Lowest xerror
<ul>
<li>Step: 3</li>
<li>xerror: 0.97853</li>
<li>cp: 1.9342e-03</li>
<li>Splits: 9</li>
</ul></li>
<li>Total splits: 731</li>
</ul>
<p><br></p>
</section>
<section id="pre-pruning-5" class="level3">
<h3 class="anchored" data-anchor-id="pre-pruning-5">Pre-pruning</h3>
<p>Next, we need to prune. We can either pre-prune or post-prune. We will start with pre-pruning and use each method - max depth, min depth, and min bucket. It’s recommended that I start with the following parameters;</p>
<ul>
<li>maxdepth: 5</li>
<li>minsplit: round(2% of nrow(train)).</li>
<li>minbucket: round(minsplit / 3).</li>
<li>cp = 0</li>
</ul>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>maxdepth <span class="ot">=</span> <span class="dv">5</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>minsplit <span class="ot">=</span> <span class="fu">round</span>(.<span class="dv">02</span><span class="sc">*</span><span class="fu">nrow</span>(train))</span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a>minbucket <span class="ot">=</span> <span class="fu">round</span>(minsplit <span class="sc">/</span> <span class="dv">3</span>)</span>
<span id="cb109-6"><a href="#cb109-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-7"><a href="#cb109-7" aria-hidden="true" tabindex="-1"></a>not.meaningful.grad.year.<span class="fl">10.</span>model.preprune <span class="ot">&lt;-</span> <span class="fu">rpart</span>(grad.year<span class="fl">.10</span> <span class="sc">~</span> ., <span class="at">data =</span> train, <span class="at">method =</span> <span class="st">"class"</span>, </span>
<span id="cb109-8"><a href="#cb109-8" aria-hidden="true" tabindex="-1"></a>                   <span class="at">control =</span> <span class="fu">rpart.control</span>(<span class="at">cp =</span> <span class="dv">0</span>, <span class="at">maxdepth =</span> maxdepth, <span class="at">minsplit =</span> minsplit, <span class="at">minbucket =</span> minbucket))</span>
<span id="cb109-9"><a href="#cb109-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-10"><a href="#cb109-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Accuracy</span></span>
<span id="cb109-11"><a href="#cb109-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-12"><a href="#cb109-12" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(not.meaningful.grad.year.<span class="fl">10.</span>model.preprune, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb109-13"><a href="#cb109-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-14"><a href="#cb109-14" aria-hidden="true" tabindex="-1"></a>accuracy_preprun <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.10</span>)</span>
<span id="cb109-15"><a href="#cb109-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-16"><a href="#cb109-16" aria-hidden="true" tabindex="-1"></a><span class="fu">percent</span>(accuracy_preprun, <span class="at">accuracy =</span> .<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "65.9%"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(not.meaningful.grad.year.<span class="fl">10.</span>model.preprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.10 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0, maxdepth = maxdepth, minsplit = minsplit, 
        minbucket = minbucket))

Variables actually used in tree construction:
[1] avg.wages.pct.state     economic.status         ps.grad.location       
[4] RaceEthnicity           total.cte.courses.taken

Root node error: 5170/14914 = 0.34665

n= 14914 

         CP nsplit rel error  xerror     xstd
1 0.0045132      0   1.00000 1.00000 0.011242
2 0.0000000      6   0.97021 0.98008 0.011188</code></pre>
</div>
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(not.meaningful.grad.year.<span class="fl">10.</span>model.preprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Key takeaways</strong></p>
<ul>
<li>Accuracy: 59.0% –&gt; 65.9%</li>
<li>Predictors: 5/17
<ul>
<li>Demographics: 2/4 - economic status and race</li>
<li>HS characteristics: 1/3 - wages</li>
<li>HS Accomplishments: 1/6 - CTE</li>
<li>Post-secondary: 1/4 - grad location</li>
</ul></li>
<li>Lowest xerror
<ul>
<li>Step: 2</li>
<li>xerror: 0.98008</li>
<li>cp: 0</li>
<li>Splits: 6</li>
</ul></li>
<li>Total splits: 6</li>
</ul>
<p><br></p>
</section>
<section id="post-pruning-5" class="level3">
<h3 class="anchored" data-anchor-id="post-pruning-5">Post-pruning</h3>
<p>The idea here is to allow the decision tree to grow fully and observe the CP value. There are two methods for identifying the CP code;</p>
<ol type="1">
<li>Use the cp value with the lowest xerror from the base model.</li>
<li>Use the cp value with the next lowest xerror that is within the standard error.</li>
</ol>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>cp_table <span class="ot">&lt;-</span> not.meaningful.grad.year.<span class="fl">10.</span>model.preprune<span class="sc">$</span>cptable</span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>min_xerror <span class="ot">&lt;-</span> <span class="fu">min</span>(cp_table[, <span class="st">"xerror"</span>])</span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a>min_xerror_se <span class="ot">&lt;-</span> cp_table[<span class="fu">which.min</span>(cp_table[,<span class="st">"xerror"</span>]), <span class="st">"xstd"</span>]</span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true" tabindex="-1"></a>threshold <span class="ot">&lt;-</span> min_xerror <span class="sc">+</span> min_xerror_se</span>
<span id="cb114-7"><a href="#cb114-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-8"><a href="#cb114-8" aria-hidden="true" tabindex="-1"></a>one_se_index <span class="ot">&lt;-</span> <span class="fu">which</span>(cp_table[, <span class="st">"xerror"</span>] <span class="sc">&lt;=</span> threshold)[<span class="dv">1</span>] </span>
<span id="cb114-9"><a href="#cb114-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-10"><a href="#cb114-10" aria-hidden="true" tabindex="-1"></a>cp_1se <span class="ot">&lt;-</span> cp_table[one_se_index, <span class="st">"CP"</span>]</span>
<span id="cb114-11"><a href="#cb114-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-12"><a href="#cb114-12" aria-hidden="true" tabindex="-1"></a>optimal_cp <span class="ot">&lt;-</span> not.meaningful.grad.year.<span class="fl">10.</span>model.preprune<span class="sc">$</span>cptable[<span class="fu">which.min</span>(not.meaningful.grad.year.<span class="fl">10.</span>model.preprune<span class="sc">$</span>cptable[, <span class="st">"xerror"</span>]), <span class="st">"CP"</span>]</span>
<span id="cb114-13"><a href="#cb114-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-14"><a href="#cb114-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-15"><a href="#cb114-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Prune the hr_base_model based on the optimal cp value</span></span>
<span id="cb114-16"><a href="#cb114-16" aria-hidden="true" tabindex="-1"></a>not.meaningful.grad.year.<span class="fl">10.</span>model.postprune <span class="ot">&lt;-</span> rpart<span class="sc">::</span><span class="fu">prune</span>(not.meaningful.grad.year.<span class="fl">10.</span>model.preprune, <span class="at">cp =</span> <span class="fl">0.0017764</span>)</span>
<span id="cb114-17"><a href="#cb114-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-18"><a href="#cb114-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute the accuracy of the pruned tree</span></span>
<span id="cb114-19"><a href="#cb114-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-20"><a href="#cb114-20" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(not.meaningful.grad.year.<span class="fl">10.</span>model.postprune, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb114-21"><a href="#cb114-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-22"><a href="#cb114-22" aria-hidden="true" tabindex="-1"></a>accuracy_postprun <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.10</span>)</span>
<span id="cb114-23"><a href="#cb114-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-24"><a href="#cb114-24" aria-hidden="true" tabindex="-1"></a><span class="fu">percent</span>(accuracy_postprun, <span class="at">accuracy =</span> .<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "65.9%"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(not.meaningful.grad.year.<span class="fl">10.</span>model.postprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.10 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0, maxdepth = maxdepth, minsplit = minsplit, 
        minbucket = minbucket))

Variables actually used in tree construction:
[1] avg.wages.pct.state     economic.status         ps.grad.location       
[4] RaceEthnicity           total.cte.courses.taken

Root node error: 5170/14914 = 0.34665

n= 14914 

         CP nsplit rel error  xerror     xstd
1 0.0045132      0   1.00000 1.00000 0.011242
2 0.0000000      6   0.97021 0.98008 0.011188</code></pre>
</div>
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(not.meaningful.grad.year.<span class="fl">10.</span>model.postprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Key takeaways</strong></p>
<ul>
<li>Accuracy: 65.9% –&gt; 65.9%</li>
<li>Predictors: 5/17
<ul>
<li>Demographics: 2/4 - economic status and race</li>
<li>HS characteristics: 1/3 - wages</li>
<li>HS Accomplishments: 1/6 - CTE</li>
<li>Post-secondary: 1/4 - grad location</li>
</ul></li>
<li>Lowest xerror
<ul>
<li>Step: 2</li>
<li>xerror: 0.98008</li>
<li>cp: 0</li>
<li>Splits: 6</li>
</ul></li>
<li>Total splits: 6</li>
</ul>
<p>So, the accuracy of these are clear;</p>
<ul>
<li>Base model: 59.0%</li>
<li>Pre-pruned model: 65.9%</li>
<li>Post-pruned model: 65.9%</li>
</ul>
<p>The post-pruned model is the same as the pre-pruned so I will use pre-pruned.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot tree</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rpart.plot</span>(not.meaningful.grad.year.<span class="fl">10.</span>model.preprune, <span class="at">nn =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="main-takeaway-7" class="level3">
<h3 class="anchored" data-anchor-id="main-takeaway-7"><strong>Main takeaway</strong></h3>
<p>At ten years after graduation, <strong>regional postsecondary completion, CTE engagement, and favorable wage environments</strong> are the strongest anchors for meaningful employment in Southern Minnesota. Economic disadvantage and weaker wage contexts raise the risk of being neither meaningfully employed nor in postsecondary, while racial/ethnic gaps remain visible.</p>
</section>
<section id="key-findings-5" class="level3">
<h3 class="anchored" data-anchor-id="key-findings-5"><strong>Key Findings</strong></h3>
<ul>
<li><strong>Model accuracy:</strong> 65.9% (pre-pruned model, 6 splits).</li>
<li><strong>Most important predictors:</strong> <em>Postsecondary graduation in the region</em>, <em>Total CTE courses taken</em>, <em>Economic status</em>, <em>Race/Ethnicity</em>, and <em>Local wage levels (avg.wages.pct.state)</em>.</li>
<li><strong>Overall pattern:</strong> Regional anchoring is sustained by <strong>local PS graduation and CTE depth</strong>, while <strong>low-income status, weaker wage environments, and subgroup disparities</strong> increase disconnection risk.</li>
</ul>
</section>
<section id="interpretation-5" class="level3">
<h3 class="anchored" data-anchor-id="interpretation-5"><strong>Interpretation</strong></h3>
<ul>
<li><strong>Postsecondary graduation in the region:</strong> The single strongest anchor for regional employment. Graduates of Southern MN institutions were far more likely to remain employed in the region.</li>
<li><strong>CTE course-taking:</strong> Students with ≥2 CTE courses were substantially more likely to hold meaningful regional employment compared to peers with limited or no CTE engagement.</li>
<li><strong>Economic status:</strong> Low-income graduates were at greater risk of disconnection, even when paired with regional PS or CTE pathways.</li>
<li><strong>Race/Ethnicity:</strong> American Indian, Hispanic, and some White graduates showed higher likelihood of disconnection in lower-wage environments, while Asian/PI and White graduates with stronger economic status retained more regional attachment.</li>
<li><strong>Local wages:</strong> Communities with wages ≥79% of the statewide average were more successful in anchoring graduates regionally.</li>
</ul>
</section>
<section id="decision-tree-interpretation-5" class="level3">
<h3 class="anchored" data-anchor-id="decision-tree-interpretation-5"><strong>Decision Tree Interpretation</strong></h3>
<ul>
<li><strong>Root split:</strong> Postsecondary graduation in Southern MN is the strongest determinant of regional employment.</li>
<li><strong>CTE branch:</strong> Among those without local PS ties, CTE depth (≥2 courses) played a decisive role in anchoring students to regional employment.</li>
<li><strong>Economic branch:</strong> Low-income status pushed students toward disconnection, even when they had CTE experience.</li>
<li><strong>Wage branch:</strong> Higher local wage environments buffered against disconnection, reinforcing retention among CTE-engaged graduates.</li>
<li><strong>Race/Ethnicity branch:</strong> Subgroup variation highlights structural disparities, with certain groups more vulnerable to disconnection without strong academic or economic anchors.</li>
</ul>
</section>
<section id="summary-5" class="level3">
<h3 class="anchored" data-anchor-id="summary-5"><strong>Summary</strong></h3>
<p>At year ten, <strong>regional postsecondary graduation, CTE engagement, and strong wage environments</strong> are the most consistent anchors for meaningful employment in Southern Minnesota. Barriers include <strong>economic disadvantage, weaker wage contexts, and persistent racial/ethnic gaps</strong>. While CTE depth provides a protective effect, these structural factors shape long-term disconnection risk.</p>
</section>
<section id="policypractice-implications-7" class="level3">
<h3 class="anchored" data-anchor-id="policypractice-implications-7"><strong>Policy/Practice Implications</strong></h3>
<ul>
<li><strong>Strengthen partnerships with regional postsecondary institutions</strong> to anchor graduates locally through degree completion.</li>
<li><strong>Expand CTE opportunities and depth (≥2 courses)</strong> as a long-term anchor for regional employment.</li>
<li><strong>Address income disparities</strong> by providing targeted supports for low-income students in both CTE and postsecondary pathways.</li>
<li><strong>Support wage competitiveness</strong> in regional industries to prevent graduates from leaving the labor force or seeking opportunities outside the region.</li>
<li><strong>Target interventions for vulnerable racial/ethnic groups</strong> to reduce disparities in long-term disconnection.</li>
</ul>
<p><br></p>
</section>
</section>
</section>
<section id="analysis---meaningful-employment-region-vs.-no-mn-employment-record-and-not-attending-post-secondary" class="level1">
<h1>Analysis - Meaningful employment region vs.&nbsp;No MN employment record and not attending post-secondary</h1>
<p><br></p>
<section id="synthesis-meaningful-employment-in-region-vs.-no-mn-employment-record-not-attending-postsecondary" class="level2">
<h2 class="anchored" data-anchor-id="synthesis-meaningful-employment-in-region-vs.-no-mn-employment-record-not-attending-postsecondary">Synthesis: Meaningful Employment in Region vs.&nbsp;No MN Employment Record, Not Attending Postsecondary</h2>
<section id="main-takeaway-8" class="level3">
<h3 class="anchored" data-anchor-id="main-takeaway-8"><strong>Main takeaway</strong></h3>
<p>Across one, five, and ten years after graduation, the CART models highlight <strong>regional postsecondary graduation, CTE engagement, and moderate academic preparation</strong> as the most consistent anchors for meaningful employment in Southern Minnesota. Barriers to regional attachment include <strong>weak academic scores, lack of CTE depth, no regional PS ties, and structural inequities</strong>. Over time, postsecondary pathways and CTE depth grow in importance, while low academic readiness continues to heighten long-term disconnection risk.</p>
<hr>
</section>
<section id="year-1-after-graduation-2" class="level3">
<h3 class="anchored" data-anchor-id="year-1-after-graduation-2"><strong>Year 1 after Graduation</strong></h3>
<ul>
<li><strong>Accuracy:</strong> 65.9% (post-pruned model).</li>
<li><strong>Anchors:</strong> ≥2 CTE courses, moderate MCA Math scores, absence of SpecialEd status, stronger local labor markets.</li>
<li><strong>Barriers:</strong> Lack of CTE depth, SpecialEd status, weak math/ACT performance.</li>
<li><strong>Interpretation:</strong> Early anchoring is overwhelmingly tied to <strong>CTE course depth</strong>, with even modest academic readiness reinforcing attachment to the regional workforce.</li>
</ul>
<hr>
</section>
<section id="year-5-after-graduation-2" class="level3">
<h3 class="anchored" data-anchor-id="year-5-after-graduation-2"><strong>Year 5 after Graduation</strong></h3>
<ul>
<li><strong>Accuracy:</strong> 67.1% (post-pruned model).</li>
<li><strong>Anchors:</strong> Regional PS attendance/graduation, ≥2 CTE courses (especially ≥5), sub-baccalaureate credentials (associate’s, some college), ACT ≥25.</li>
<li><strong>Barriers:</strong> Lack of PS ties, higher MCA Reading scores without CTE, absence of credential completion.</li>
<li><strong>Interpretation:</strong> By mid-career, <strong>regional PS pathways and CTE depth</strong> are the most decisive anchors. Academic high achievers without regional PS or CTE anchors are more likely to show no MN employment record.</li>
</ul>
<hr>
</section>
<section id="year-10-after-graduation-2" class="level3">
<h3 class="anchored" data-anchor-id="year-10-after-graduation-2"><strong>Year 10 after Graduation</strong></h3>
<ul>
<li><strong>Accuracy:</strong> 62.6% (post-pruned model).</li>
<li><strong>Anchors:</strong> Regional PS graduation, ≥2 CTE courses, moderate MCA Reading scores, ACT ≥23.</li>
<li><strong>Barriers:</strong> No PS graduation, lack of CTE engagement, ACT &lt;23, subgroup disparities.</li>
<li><strong>Interpretation:</strong> Long-term retention depends on <strong>regional PS graduation and CTE engagement</strong>, supported by moderate academic performance. Weak academic readiness combined with no PS/CTE ties predicts the highest disconnection risk.</li>
</ul>
<hr>
</section>
<section id="overall-summary-2" class="level3">
<h3 class="anchored" data-anchor-id="overall-summary-2"><strong>Overall Summary</strong></h3>
<p>The models trace a clear trajectory of anchors and barriers:</p>
<ul>
<li><strong>Year 1:</strong> <strong>CTE depth + academic readiness</strong> are critical for early anchoring.</li>
<li><strong>Year 5:</strong> <strong>Regional PS engagement + sub-baccalaureate credentials</strong> emerge as central anchors, with CTE depth still protective.</li>
<li><strong>Year 10:</strong> <strong>Regional PS graduation and sustained CTE involvement</strong> remain decisive for long-term retention, while weak academic scores and no PS ties predict disconnection.</li>
</ul>
<p>Taken together, the results underscore that <strong>regional postsecondary pathways and CTE depth form the backbone of long-term workforce attachment</strong>, while academic high achievers without these anchors and students with weak readiness face heightened risk of disconnection.</p>
<hr>
</section>
<section id="policypractice-implications-8" class="level3">
<h3 class="anchored" data-anchor-id="policypractice-implications-8"><strong>Policy/Practice Implications</strong></h3>
<ul>
<li><strong>Expand CTE opportunities with emphasis on depth (≥2–5 courses)</strong> to strengthen early and long-term anchoring.</li>
<li><strong>Strengthen partnerships with regional postsecondary institutions</strong>, ensuring more graduates complete credentials locally.</li>
<li><strong>Support sub-baccalaureate pathways</strong> (associate’s, certificates) as strong anchors to the regional workforce.</li>
<li><strong>Provide interventions for low academic scorers (ACT &lt;23, low MCA Math/Reading)</strong> to connect them to CTE and PS pathways that offset disconnection risk.</li>
<li><strong>Address racial/ethnic disparities</strong> in long-term workforce attachment by ensuring equitable access to CTE, PS, and local employment opportunities.</li>
</ul>
<p><br></p>
</section>
</section>
<section id="one-year-after-graduation-2" class="level2">
<h2 class="anchored" data-anchor-id="one-year-after-graduation-2">One year after graduation</h2>
<p>First I’m going to filter out the data so only individuals that had meaningful employment in the region or do not have a Minnesota employment record and are not attending post-secondary are in the dataset. In addition, I’m going to remove all the post-secondary variables from the model since those are variables that take place in the future.</p>
<p>The table below shows that 58% of the individuals have meaningful employment in their high school region compared to 42% that do not have a Minnesota employment record and are not attending post-secondary.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>no.mn.emp.grad.year<span class="fl">.1</span> <span class="ot">&lt;-</span> data.grad.year<span class="fl">.1</span> <span class="sc">%&gt;%</span></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>grad.year<span class="fl">.5</span>, <span class="sc">-</span>grad.year<span class="fl">.10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(grad.year<span class="fl">.1</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Meaningful emp region"</span>, <span class="st">"No MN emp record, not attending ps"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">grad.year.1 =</span> <span class="fu">as.factor</span>(grad.year<span class="fl">.1</span>))</span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-6"><a href="#cb120-6" aria-hidden="true" tabindex="-1"></a><span class="fu">comma</span>(<span class="fu">nrow</span>(no.mn.emp.grad.year<span class="fl">.1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "27,841"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(<span class="at">data =</span> no.mn.emp.grad.year<span class="fl">.1</span> <span class="sc">%&gt;%</span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a>            <span class="fu">group_by</span>(grad.year<span class="fl">.1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a>            <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mutate</span>(<span class="at">pct =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb122-6"><a href="#cb122-6" aria-hidden="true" tabindex="-1"></a>            <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb122-7"><a href="#cb122-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>),</span>
<span id="cb122-8"><a href="#cb122-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">class =</span> <span class="st">"cell-border stripe"</span>, </span>
<span id="cb122-9"><a href="#cb122-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">filter =</span> <span class="st">"top"</span>, </span>
<span id="cb122-10"><a href="#cb122-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">rownames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb122-11"><a href="#cb122-11" aria-hidden="true" tabindex="-1"></a>          <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb122-12"><a href="#cb122-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">columnDefs =</span> <span class="fu">list</span>(<span class="fu">list</span>(<span class="at">className =</span> <span class="st">"dt-center"</span>, <span class="at">targets =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)))) <span class="sc">%&gt;%</span></span>
<span id="cb122-13"><a href="#cb122-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatCurrency</span>(<span class="dv">2</span>, <span class="st">""</span>, <span class="at">digits =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb122-14"><a href="#cb122-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatPercentage</span>(<span class="dv">3</span>, <span class="at">digits =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-bb8f0fb608771c3b6f82" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-bb8f0fb608771c3b6f82">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Meaningful emp region&quot;,&quot;No MN emp record, not attending ps&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"11703\" data-max=\"16138\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0.420351280485614\" data-max=\"0.579648719514386\" data-scale=\"15\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["Meaningful emp region","No MN emp record, not attending ps"],[16138,11703],[0.5796487195143852,0.4203512804856148]],"container":"<table class=\"cell-border stripe\">\n  <thead>\n    <tr>\n      <th>grad.year.1<\/th>\n      <th>n<\/th>\n      <th>pct<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"targets":2,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatPercentage(data, 1, 3, \",\", \".\", null);\n  }"},{"targets":1,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatCurrency(data, \"\", 0, 3, \",\", \".\", true, null);\n  }"},{"className":"dt-center","targets":[1,2]},{"name":"grad.year.1","targets":0},{"name":"n","targets":1},{"name":"pct","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":["options.columnDefs.0.render","options.columnDefs.1.render"],"jsHooks":[]}</script>
</div>
</div>
<p><br></p>
<section id="base-model-6" class="level3">
<h3 class="anchored" data-anchor-id="base-model-6">Base Model</h3>
<p>I know the base model is going to overfit and provide an overly complex tree due to having a cost penalty of 0. So I’m just going to print the complexity plot in order to see what the appropriate CP would be to minimize xerror.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a>sample_ind <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">nrow</span>(no.mn.emp.grad.year<span class="fl">.1</span>), <span class="fu">nrow</span>(no.mn.emp.grad.year<span class="fl">.1</span>) <span class="sc">*</span>.<span class="dv">7</span>)</span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-5"><a href="#cb123-5" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> no.mn.emp.grad.year<span class="fl">.1</span>[sample_ind,]</span>
<span id="cb123-6"><a href="#cb123-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-7"><a href="#cb123-7" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> no.mn.emp.grad.year<span class="fl">.1</span>[<span class="sc">-</span>sample_ind,]</span>
<span id="cb123-8"><a href="#cb123-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-9"><a href="#cb123-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Base model</span></span>
<span id="cb123-10"><a href="#cb123-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-11"><a href="#cb123-11" aria-hidden="true" tabindex="-1"></a>no.mn.emp.grad.year.<span class="fl">1.</span>model <span class="ot">&lt;-</span> <span class="fu">rpart</span>(grad.year<span class="fl">.1</span> <span class="sc">~</span> ., <span class="at">data =</span> train, <span class="at">method =</span> <span class="st">"class"</span>, <span class="at">control =</span> <span class="fu">rpart.control</span>(<span class="at">cp =</span> <span class="dv">0</span>))</span>
<span id="cb123-12"><a href="#cb123-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-13"><a href="#cb123-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Accuracy</span></span>
<span id="cb123-14"><a href="#cb123-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-15"><a href="#cb123-15" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(no.mn.emp.grad.year.<span class="fl">1.</span>model, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb123-16"><a href="#cb123-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-17"><a href="#cb123-17" aria-hidden="true" tabindex="-1"></a>accuracy_base <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.1</span>)</span>
<span id="cb123-18"><a href="#cb123-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-19"><a href="#cb123-19" aria-hidden="true" tabindex="-1"></a><span class="fu">percent</span>(accuracy_base, <span class="at">accuracy =</span> .<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "61.9%"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(no.mn.emp.grad.year.<span class="fl">1.</span>model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.1 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0))

Variables actually used in tree construction:
 [1] ACTCompositeScore       avg.unemp.rate          avg.wages.pct.state    
 [4] cte.achievement         Dem_Desc                economic.status        
 [7] Gender                  MCA.M                   MCA.R                  
[10] MCA.S                   RaceEthnicity           SpecialEdStatus        
[13] total.cte.courses.taken

Root node error: 8238/19488 = 0.42272

n= 19488 

           CP nsplit rel error  xerror      xstd
1  1.0670e-01      0   1.00000 1.00000 0.0083711
2  2.4521e-02      1   0.89330 0.89330 0.0082152
3  1.0075e-02      2   0.86878 0.86878 0.0081688
4  7.7689e-03      3   0.85870 0.86210 0.0081555
5  4.1272e-03      4   0.85093 0.85543 0.0081419
6  2.5492e-03      8   0.82969 0.83248 0.0080927
7  1.3960e-03     10   0.82459 0.82981 0.0080868
8  1.3353e-03     14   0.81852 0.83236 0.0080925
9  1.2139e-03     18   0.81318 0.83345 0.0080949
10 1.1532e-03     21   0.80954 0.83151 0.0080906
11 1.0925e-03     23   0.80723 0.83054 0.0080884
12 1.0318e-03     25   0.80505 0.83115 0.0080898
13 9.1042e-04     27   0.80299 0.83151 0.0080906
14 8.4972e-04     35   0.79437 0.82981 0.0080868
15 7.8903e-04     38   0.79182 0.82739 0.0080813
16 7.6880e-04     40   0.79024 0.82629 0.0080788
17 7.2833e-04     43   0.78793 0.82641 0.0080791
18 6.8787e-04     50   0.78259 0.82629 0.0080788
19 6.6764e-04     54   0.77944 0.82763 0.0080819
20 6.0694e-04     56   0.77810 0.82872 0.0080843
21 5.2602e-04     63   0.77385 0.83115 0.0080898
22 4.8555e-04     66   0.77227 0.83734 0.0081034
23 4.5521e-04     81   0.76487 0.83855 0.0081061
24 4.2486e-04     85   0.76305 0.84147 0.0081124
25 4.0463e-04     96   0.75783 0.84292 0.0081155
26 3.8624e-04    106   0.75370 0.84329 0.0081163
27 3.6417e-04    142   0.73598 0.84402 0.0081179
28 3.4899e-04    184   0.72008 0.84729 0.0081249
29 3.4393e-04    195   0.71571 0.84766 0.0081256
30 3.3989e-04    205   0.71194 0.84766 0.0081256
31 3.3382e-04    212   0.70927 0.85008 0.0081308
32 3.2370e-04    233   0.70102 0.85008 0.0081308
33 3.1022e-04    245   0.69665 0.85033 0.0081313
34 3.0347e-04    268   0.68633 0.85348 0.0081379
35 2.9133e-04    298   0.67626 0.85251 0.0081358
36 2.8324e-04    303   0.67480 0.85324 0.0081373
37 2.4278e-04    313   0.67176 0.85749 0.0081461
38 2.1850e-04    384   0.65356 0.86380 0.0081589
39 2.1243e-04    402   0.64943 0.86696 0.0081652
40 2.0809e-04    416   0.64639 0.86708 0.0081655
41 2.0231e-04    423   0.64494 0.86769 0.0081667
42 1.9075e-04    444   0.64008 0.87546 0.0081818
43 1.8208e-04    451   0.63875 0.87570 0.0081823
44 1.6994e-04    519   0.62515 0.88347 0.0081971
45 1.6185e-04    538   0.62151 0.88456 0.0081991
46 1.5174e-04    598   0.61034 0.88565 0.0082011
47 1.4567e-04    606   0.60913 0.88735 0.0082043
48 1.3873e-04    612   0.60816 0.88772 0.0082050
49 1.3353e-04    624   0.60646 0.88772 0.0082050
50 1.2139e-04    655   0.60027 0.90083 0.0082286
51 1.0116e-04    783   0.58461 0.90216 0.0082309
52 9.7111e-05    791   0.58376 0.90738 0.0082400
53 9.1042e-05    809   0.58194 0.90726 0.0082398
54 8.6706e-05    818   0.58109 0.90896 0.0082427
55 8.0926e-05    842   0.57866 0.90957 0.0082437
56 7.2833e-05    875   0.57599 0.91054 0.0082454
57 7.0810e-05    880   0.57563 0.91066 0.0082456
58 6.0694e-05    892   0.57478 0.92037 0.0082617
59 4.0463e-05    949   0.57126 0.91964 0.0082605
60 3.0347e-05    961   0.57077 0.92547 0.0082699
61 2.0231e-05    975   0.57016 0.92802 0.0082740
62 1.3488e-05    981   0.57004 0.92826 0.0082744
63 0.0000e+00    990   0.56992 0.92826 0.0082744</code></pre>
</div>
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(no.mn.emp.grad.year.<span class="fl">1.</span>model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Key takeaways</strong></p>
<ul>
<li>Accuracy: 61.9%</li>
<li>Predictors: 13/13
<ul>
<li>Demographics: 4/4</li>
<li>HS characteristics: 3/3</li>
<li>HS Accomplishments: 6/6</li>
</ul></li>
<li>Lowest xerror
<ul>
<li>Step: 16</li>
<li>xerror: 0.82629</li>
<li>cp: 7.6880e-04</li>
<li>Splits: 40</li>
</ul></li>
<li>Total splits: 990</li>
</ul>
<p><br></p>
</section>
<section id="pre-pruning-6" class="level3">
<h3 class="anchored" data-anchor-id="pre-pruning-6">Pre-pruning</h3>
<p>Next, we need to prune. We can either pre-prune or post-prune. We will start with pre-pruning and use each method - max depth, min depth, and min bucket. It’s recommended that I start with the following parameters;</p>
<ul>
<li>maxdepth: 5</li>
<li>minsplit: round(2% of nrow(train)).</li>
<li>minbucket: round(minsplit / 3).</li>
<li>cp = 0</li>
</ul>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a>maxdepth <span class="ot">=</span> <span class="dv">5</span></span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a>minsplit <span class="ot">=</span> <span class="fu">round</span>(.<span class="dv">02</span><span class="sc">*</span><span class="fu">nrow</span>(train))</span>
<span id="cb128-4"><a href="#cb128-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-5"><a href="#cb128-5" aria-hidden="true" tabindex="-1"></a>minbucket <span class="ot">=</span> <span class="fu">round</span>(minsplit <span class="sc">/</span> <span class="dv">3</span>)</span>
<span id="cb128-6"><a href="#cb128-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-7"><a href="#cb128-7" aria-hidden="true" tabindex="-1"></a>no.mn.emp.grad.year.<span class="fl">1.</span>model.preprune <span class="ot">&lt;-</span> <span class="fu">rpart</span>(grad.year<span class="fl">.1</span> <span class="sc">~</span> ., <span class="at">data =</span> train, <span class="at">method =</span> <span class="st">"class"</span>, </span>
<span id="cb128-8"><a href="#cb128-8" aria-hidden="true" tabindex="-1"></a>                   <span class="at">control =</span> <span class="fu">rpart.control</span>(<span class="at">cp =</span> <span class="dv">0</span>, <span class="at">maxdepth =</span> maxdepth, <span class="at">minsplit =</span> minsplit, <span class="at">minbucket =</span> minbucket))</span>
<span id="cb128-9"><a href="#cb128-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-10"><a href="#cb128-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Accuracy</span></span>
<span id="cb128-11"><a href="#cb128-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-12"><a href="#cb128-12" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(no.mn.emp.grad.year.<span class="fl">1.</span>model.preprune, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb128-13"><a href="#cb128-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-14"><a href="#cb128-14" aria-hidden="true" tabindex="-1"></a>accuracy_preprun <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.1</span>)</span>
<span id="cb128-15"><a href="#cb128-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-16"><a href="#cb128-16" aria-hidden="true" tabindex="-1"></a><span class="fu">percent</span>(accuracy_preprun, <span class="at">accuracy =</span> .<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "66.3%"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(no.mn.emp.grad.year.<span class="fl">1.</span>model.preprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.1 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0, maxdepth = maxdepth, minsplit = minsplit, 
        minbucket = minbucket))

Variables actually used in tree construction:
[1] ACTCompositeScore       avg.unemp.rate          Dem_Desc               
[4] MCA.M                   MCA.R                   RaceEthnicity          
[7] SpecialEdStatus         total.cte.courses.taken

Root node error: 8238/19488 = 0.42272

n= 19488 

         CP nsplit rel error  xerror      xstd
1 0.1067007      0   1.00000 1.00000 0.0083711
2 0.0245205      1   0.89330 0.89330 0.0082152
3 0.0100753      2   0.86878 0.86878 0.0081688
4 0.0077689      3   0.85870 0.86222 0.0081557
5 0.0041272      4   0.85093 0.85106 0.0081328
6 0.0025492      8   0.82969 0.83163 0.0080908
7 0.0013960     10   0.82459 0.82836 0.0080835
8 0.0000000     13   0.81962 0.82921 0.0080854</code></pre>
</div>
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(no.mn.emp.grad.year.<span class="fl">1.</span>model.preprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Key takeaways</strong></p>
<ul>
<li>Accuracy: 61.9% –&gt; 66.3%</li>
<li>Predictors: 8/13
<ul>
<li>Demographics: 2/4 - Race, Special education</li>
<li>HS characteristics: 2/3 - unemployment, rural-ness</li>
<li>HS Accomplishments: 4/6 - ACT, MCA, CTE</li>
</ul></li>
<li>Lowest xerror
<ul>
<li>Step: 7</li>
<li>xerror: 0.82836</li>
<li>cp: 0.0013960</li>
<li>Splits: 10</li>
</ul></li>
<li>Total splits: 13</li>
</ul>
<p><br></p>
</section>
<section id="post-pruning-6" class="level3">
<h3 class="anchored" data-anchor-id="post-pruning-6">Post-pruning</h3>
<p>The idea here is to allow the decision tree to grow fully and observe the CP value. There are two methods for identifying the CP code;</p>
<ol type="1">
<li>Use the cp value with the lowest xerror from the base model.</li>
<li>Use the cp value with the next lowest xerror that is within the standard error.</li>
</ol>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>cp_table <span class="ot">&lt;-</span> no.mn.emp.grad.year.<span class="fl">1.</span>model.preprune<span class="sc">$</span>cptable</span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a>min_xerror <span class="ot">&lt;-</span> <span class="fu">min</span>(cp_table[, <span class="st">"xerror"</span>])</span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a>min_xerror_se <span class="ot">&lt;-</span> cp_table[<span class="fu">which.min</span>(cp_table[,<span class="st">"xerror"</span>]), <span class="st">"xstd"</span>]</span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-6"><a href="#cb133-6" aria-hidden="true" tabindex="-1"></a>threshold <span class="ot">&lt;-</span> min_xerror <span class="sc">+</span> min_xerror_se</span>
<span id="cb133-7"><a href="#cb133-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-8"><a href="#cb133-8" aria-hidden="true" tabindex="-1"></a>one_se_index <span class="ot">&lt;-</span> <span class="fu">which</span>(cp_table[, <span class="st">"xerror"</span>] <span class="sc">&lt;=</span> threshold)[<span class="dv">1</span>] </span>
<span id="cb133-9"><a href="#cb133-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-10"><a href="#cb133-10" aria-hidden="true" tabindex="-1"></a>cp_1se <span class="ot">&lt;-</span> cp_table[one_se_index, <span class="st">"CP"</span>]</span>
<span id="cb133-11"><a href="#cb133-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-12"><a href="#cb133-12" aria-hidden="true" tabindex="-1"></a>optimal_cp <span class="ot">&lt;-</span> no.mn.emp.grad.year.<span class="fl">1.</span>model.preprune<span class="sc">$</span>cptable[<span class="fu">which.min</span>(no.mn.emp.grad.year.<span class="fl">1.</span>model.preprune<span class="sc">$</span>cptable[, <span class="st">"xerror"</span>]), <span class="st">"CP"</span>]</span>
<span id="cb133-13"><a href="#cb133-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-14"><a href="#cb133-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-15"><a href="#cb133-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Prune the hr_base_model based on the optimal cp value</span></span>
<span id="cb133-16"><a href="#cb133-16" aria-hidden="true" tabindex="-1"></a>no.mn.emp.grad.year.<span class="fl">1.</span>model.postprune <span class="ot">&lt;-</span> rpart<span class="sc">::</span><span class="fu">prune</span>(no.mn.emp.grad.year.<span class="fl">1.</span>model.preprune, <span class="at">cp =</span> cp_1se)</span>
<span id="cb133-17"><a href="#cb133-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-18"><a href="#cb133-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute the accuracy of the pruned tree</span></span>
<span id="cb133-19"><a href="#cb133-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-20"><a href="#cb133-20" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(no.mn.emp.grad.year.<span class="fl">1.</span>model.postprune, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb133-21"><a href="#cb133-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-22"><a href="#cb133-22" aria-hidden="true" tabindex="-1"></a>accuracy_postprun <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.1</span>)</span>
<span id="cb133-23"><a href="#cb133-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-24"><a href="#cb133-24" aria-hidden="true" tabindex="-1"></a><span class="fu">percent</span>(accuracy_postprun, <span class="at">accuracy =</span> .<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "65.9%"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(no.mn.emp.grad.year.<span class="fl">1.</span>model.postprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.1 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0, maxdepth = maxdepth, minsplit = minsplit, 
        minbucket = minbucket))

Variables actually used in tree construction:
[1] ACTCompositeScore       avg.unemp.rate          MCA.M                  
[4] SpecialEdStatus         total.cte.courses.taken

Root node error: 8238/19488 = 0.42272

n= 19488 

         CP nsplit rel error  xerror      xstd
1 0.1067007      0   1.00000 1.00000 0.0083711
2 0.0245205      1   0.89330 0.89330 0.0082152
3 0.0100753      2   0.86878 0.86878 0.0081688
4 0.0077689      3   0.85870 0.86222 0.0081557
5 0.0041272      4   0.85093 0.85106 0.0081328
6 0.0025492      8   0.82969 0.83163 0.0080908</code></pre>
</div>
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(no.mn.emp.grad.year.<span class="fl">1.</span>model.postprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Key takeaways</strong></p>
<ul>
<li>Accuracy: 66.3% –&gt; 65.9%</li>
<li>Predictors: 5/13
<ul>
<li>Demographics: 1/4 - Special education</li>
<li>HS characteristics: 1/3 - unemployment,</li>
<li>HS Accomplishments: 3/6 - ACT, MCA, CTE</li>
</ul></li>
<li>Lowest xerror
<ul>
<li>Step: 6</li>
<li>xerror: 0.83163</li>
<li>cp: 0.0025492</li>
<li>Splits: 8</li>
</ul></li>
<li>Total splits: 8</li>
</ul>
<p>So, the accuracy of these are;</p>
<ul>
<li>Base model: 61.9%</li>
<li>Pre-pruned model: 66.3%</li>
<li>Post-pruned model: 65.9%</li>
</ul>
<p>The post-pruned model provides a simpler model while also giving relatively similar accuracy. I will dive into that one below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot tree</span></span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rpart.plot</span>(no.mn.emp.grad.year.<span class="fl">1.</span>model.postprune, <span class="at">nn =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="main-takeaway-9" class="level3">
<h3 class="anchored" data-anchor-id="main-takeaway-9"><strong>Main takeaway</strong></h3>
<p>At one year after graduation, <strong>CTE course-taking is the most decisive anchor for meaningful employment in the region</strong>, supported by stronger math performance and absence of SpecialEd status. In contrast, low academic performance, lack of CTE depth, and weaker local labor markets increase the likelihood of having no Minnesota employment record and not attending postsecondary.</p>
</section>
<section id="key-findings-6" class="level3">
<h3 class="anchored" data-anchor-id="key-findings-6"><strong>Key Findings</strong></h3>
<ul>
<li><strong>Model accuracy:</strong> 65.9% (post-pruned model, 8 splits).</li>
<li><strong>Most important predictors:</strong> <em>Total CTE courses taken</em>, <em>SpecialEdStatus</em>, <em>MCA Math scores</em>, <em>ACT Composite Score</em>, and <em>Local unemployment rate</em>.</li>
<li><strong>Overall pattern:</strong> Students with <strong>≥2 CTE courses, moderate academic scores, and no SpecialEd involvement</strong> were strongly anchored to meaningful regional employment.</li>
</ul>
</section>
<section id="interpretation-6" class="level3">
<h3 class="anchored" data-anchor-id="interpretation-6"><strong>Interpretation</strong></h3>
<ul>
<li><strong>CTE course-taking:</strong>
<ul>
<li>Root split: Students with ≥2 CTE courses were far more likely to be anchored regionally.</li>
<li>Additional depth (≥5 courses) paired with moderate MCA Math scores further strengthened regional attachment.</li>
</ul></li>
<li><strong>SpecialEdStatus:</strong>
<ul>
<li>Among students with CTE depth, SpecialEd status reduced the likelihood of regional employment and increased disconnection risk.</li>
</ul></li>
<li><strong>Academic achievement:</strong>
<ul>
<li>Higher MCA Math scores (≥2) combined with deeper CTE involvement predicted stronger regional employment.</li>
<li>ACT scores &lt;28, especially when combined with low CTE engagement, increased the risk of no employment record.</li>
</ul></li>
<li><strong>Economic context:</strong>
<ul>
<li>Students in areas with low unemployment (&lt;4.9%) were somewhat more likely to anchor regionally if they had some CTE engagement.</li>
</ul></li>
</ul>
</section>
<section id="decision-tree-interpretation-6" class="level3">
<h3 class="anchored" data-anchor-id="decision-tree-interpretation-6"><strong>Decision Tree Interpretation</strong></h3>
<ul>
<li><strong>Root split:</strong> CTE depth (≥2 courses) was the most decisive anchor for regional employment.</li>
<li><strong>SpecialEd branch:</strong> SpecialEd involvement weakened the anchoring effect of CTE depth.</li>
<li><strong>Academic branch:</strong> Moderate MCA Math performance and higher ACT scores aligned with regional employment; weaker scores increased disconnection.</li>
<li><strong>Economic branch:</strong> Local unemployment rate shaped outcomes among students with limited CTE engagement, with stronger local economies anchoring more students regionally.</li>
</ul>
</section>
<section id="summary-6" class="level3">
<h3 class="anchored" data-anchor-id="summary-6"><strong>Summary</strong></h3>
<p>At one year, <strong>CTE depth is the single most powerful anchor for meaningful employment in the region</strong>. Students with ≥2 CTE courses and moderate academic preparation are strongly retained in the regional workforce. <strong>SpecialEd involvement, lack of CTE, weak math skills, and lower ACT scores</strong> increase the risk of having no Minnesota employment record and not attending postsecondary.</p>
</section>
<section id="policypractice-implications-9" class="level3">
<h3 class="anchored" data-anchor-id="policypractice-implications-9"><strong>Policy/Practice Implications</strong></h3>
<ul>
<li><strong>Prioritize CTE course-taking depth (≥2 courses)</strong> to anchor graduates early into the regional workforce.</li>
<li><strong>Provide targeted supports for SpecialEd students</strong>, ensuring they can fully leverage CTE pathways.</li>
<li><strong>Bolster academic readiness in math</strong>, as even moderate MCA Math proficiency strengthens the anchoring effect of CTE.</li>
<li><strong>Support regions with weaker labor markets</strong>, as unemployment rates influence early workforce attachment.</li>
</ul>
<p><br></p>
</section>
</section>
<section id="five-years-after-graduation-1" class="level2">
<h2 class="anchored" data-anchor-id="five-years-after-graduation-1">Five years after graduation</h2>
<p>First I’m going to filter out the data so only individuals that had meaningful employment in the region or do not have a Minnesota employment record and are not attending post-secondary are in the dataset. In addition, I’m going to now include all the post-secondary variables.</p>
<p>The table below shows that 57% of the individuals have meaningful employment in their high school region compared to 43% that do not have a Minnesota employment record and are not attending post-secondary.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a>no.mn.emp.grad.year<span class="fl">.5</span> <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>grad.year<span class="fl">.1</span>, <span class="sc">-</span>grad.year<span class="fl">.10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(grad.year<span class="fl">.5</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Meaningful emp region"</span>, <span class="st">"No MN emp record, not attending ps"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb139-4"><a href="#cb139-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">grad.year.5 =</span> <span class="fu">as.factor</span>(grad.year<span class="fl">.5</span>))</span>
<span id="cb139-5"><a href="#cb139-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-6"><a href="#cb139-6" aria-hidden="true" tabindex="-1"></a><span class="fu">comma</span>(<span class="fu">nrow</span>(no.mn.emp.grad.year<span class="fl">.5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "39,891"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(<span class="at">data =</span> no.mn.emp.grad.year<span class="fl">.5</span> <span class="sc">%&gt;%</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>            <span class="fu">group_by</span>(grad.year<span class="fl">.5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>            <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb141-5"><a href="#cb141-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mutate</span>(<span class="at">pct =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb141-6"><a href="#cb141-6" aria-hidden="true" tabindex="-1"></a>            <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb141-7"><a href="#cb141-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>),</span>
<span id="cb141-8"><a href="#cb141-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">class =</span> <span class="st">"cell-border stripe"</span>, </span>
<span id="cb141-9"><a href="#cb141-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">filter =</span> <span class="st">"top"</span>, </span>
<span id="cb141-10"><a href="#cb141-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">rownames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb141-11"><a href="#cb141-11" aria-hidden="true" tabindex="-1"></a>          <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb141-12"><a href="#cb141-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">columnDefs =</span> <span class="fu">list</span>(<span class="fu">list</span>(<span class="at">className =</span> <span class="st">"dt-center"</span>, <span class="at">targets =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)))) <span class="sc">%&gt;%</span></span>
<span id="cb141-13"><a href="#cb141-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatCurrency</span>(<span class="dv">2</span>, <span class="st">""</span>, <span class="at">digits =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb141-14"><a href="#cb141-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatPercentage</span>(<span class="dv">3</span>, <span class="at">digits =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-0bd025826fd04c95e370" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-0bd025826fd04c95e370">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Meaningful emp region&quot;,&quot;No MN emp record, not attending ps&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"17091\" data-max=\"22800\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0.428442505828382\" data-max=\"0.571557494171618\" data-scale=\"15\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["Meaningful emp region","No MN emp record, not attending ps"],[22800,17091],[0.5715574941716176,0.4284425058283823]],"container":"<table class=\"cell-border stripe\">\n  <thead>\n    <tr>\n      <th>grad.year.5<\/th>\n      <th>n<\/th>\n      <th>pct<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"targets":2,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatPercentage(data, 1, 3, \",\", \".\", null);\n  }"},{"targets":1,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatCurrency(data, \"\", 0, 3, \",\", \".\", true, null);\n  }"},{"className":"dt-center","targets":[1,2]},{"name":"grad.year.5","targets":0},{"name":"n","targets":1},{"name":"pct","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":["options.columnDefs.0.render","options.columnDefs.1.render"],"jsHooks":[]}</script>
</div>
</div>
<p><br></p>
<section id="base-model-7" class="level3">
<h3 class="anchored" data-anchor-id="base-model-7">Base Model</h3>
<p>I know the base model is going to overfit and provide an overly complex tree due to having a cost penalty of 0. So I’m just going to print the complexity plot in order to see what the appropriate CP would be to minimize xerror.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true" tabindex="-1"></a>sample_ind <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">nrow</span>(no.mn.emp.grad.year<span class="fl">.5</span>), <span class="fu">nrow</span>(no.mn.emp.grad.year<span class="fl">.5</span>) <span class="sc">*</span>.<span class="dv">7</span>)</span>
<span id="cb142-4"><a href="#cb142-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-5"><a href="#cb142-5" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> no.mn.emp.grad.year<span class="fl">.5</span>[sample_ind,]</span>
<span id="cb142-6"><a href="#cb142-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-7"><a href="#cb142-7" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> no.mn.emp.grad.year<span class="fl">.5</span>[<span class="sc">-</span>sample_ind,]</span>
<span id="cb142-8"><a href="#cb142-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-9"><a href="#cb142-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Base model</span></span>
<span id="cb142-10"><a href="#cb142-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-11"><a href="#cb142-11" aria-hidden="true" tabindex="-1"></a>no.mn.emp.grad.year.<span class="fl">5.</span>model <span class="ot">&lt;-</span> <span class="fu">rpart</span>(grad.year<span class="fl">.5</span> <span class="sc">~</span> ., <span class="at">data =</span> train, <span class="at">method =</span> <span class="st">"class"</span>, <span class="at">control =</span> <span class="fu">rpart.control</span>(<span class="at">cp =</span> <span class="dv">0</span>))</span>
<span id="cb142-12"><a href="#cb142-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-13"><a href="#cb142-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Accuracy</span></span>
<span id="cb142-14"><a href="#cb142-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-15"><a href="#cb142-15" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(no.mn.emp.grad.year.<span class="fl">5.</span>model, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb142-16"><a href="#cb142-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-17"><a href="#cb142-17" aria-hidden="true" tabindex="-1"></a>accuracy_base <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.5</span>)</span>
<span id="cb142-18"><a href="#cb142-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-19"><a href="#cb142-19" aria-hidden="true" tabindex="-1"></a><span class="fu">percent</span>(accuracy_base, <span class="at">accuracy =</span> .<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "64.6%"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(no.mn.emp.grad.year.<span class="fl">5.</span>model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.5 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0))

Variables actually used in tree construction:
 [1] ACTCompositeScore         avg.unemp.rate           
 [3] avg.wages.pct.state       cte.achievement          
 [5] Dem_Desc                  economic.status          
 [7] Gender                    highest.cred.level       
 [9] MCA.M                     MCA.R                    
[11] MCA.S                     ps.grad                  
[13] ps.grad.InstitutionSector ps.grad.location         
[15] RaceEthnicity             SpecialEdStatus          
[17] total.cte.courses.taken  

Root node error: 12019/27923 = 0.43043

n= 27923 

           CP nsplit rel error  xerror      xstd
1  7.7835e-02      0   1.00000 1.00000 0.0068840
2  1.6349e-02      2   0.84433 0.84433 0.0066872
3  1.4810e-02      4   0.81163 0.80814 0.0066219
4  7.0721e-03      6   0.78201 0.79008 0.0065864
5  5.9073e-03      7   0.77494 0.78750 0.0065812
6  5.1585e-03      8   0.76903 0.77918 0.0065640
7  3.1617e-03      9   0.76387 0.77186 0.0065486
8  2.0384e-03     10   0.76071 0.76579 0.0065355
9  1.9552e-03     12   0.75664 0.76263 0.0065286
10 1.7888e-03     16   0.74881 0.75963 0.0065220
11 1.7472e-03     18   0.74524 0.75888 0.0065204
12 1.4144e-03     19   0.74349 0.75389 0.0065093
13 1.1371e-03     23   0.73783 0.75114 0.0065031
14 1.0816e-03     26   0.73442 0.74898 0.0064982
15 9.1522e-04     27   0.73334 0.74881 0.0064978
16 8.3202e-04     32   0.72851 0.75023 0.0065010
17 7.9042e-04     33   0.72768 0.74890 0.0064980
18 7.7655e-04     38   0.72369 0.74832 0.0064967
19 7.4881e-04     41   0.72136 0.74915 0.0064986
20 6.6561e-04     44   0.71911 0.74881 0.0064978
21 6.3788e-04     45   0.71845 0.74773 0.0064953
22 6.2401e-04     52   0.71379 0.74657 0.0064927
23 6.1015e-04     54   0.71254 0.74682 0.0064933
24 5.8241e-04     57   0.71071 0.74757 0.0064950
25 5.4081e-04     58   0.71013 0.74757 0.0064950
26 5.2694e-04     64   0.70688 0.74890 0.0064980
27 4.9921e-04     77   0.69673 0.74765 0.0064952
28 4.7148e-04     79   0.69573 0.74690 0.0064934
29 4.5761e-04     91   0.68949 0.74690 0.0064934
30 4.1601e-04    102   0.68350 0.74574 0.0064908
31 3.8827e-04    115   0.67809 0.74424 0.0064873
32 3.7441e-04    119   0.67643 0.74432 0.0064875
33 3.6054e-04    135   0.67044 0.74291 0.0064843
34 3.3281e-04    139   0.66894 0.74474 0.0064885
35 3.0507e-04    157   0.66295 0.74432 0.0064875
36 2.9121e-04    167   0.65946 0.74665 0.0064929
37 2.7734e-04    187   0.65363 0.74723 0.0064942
38 2.4960e-04    199   0.65030 0.74823 0.0064965
39 2.3296e-04    247   0.63799 0.75139 0.0065037
40 2.2880e-04    263   0.63400 0.75822 0.0065189
41 2.2187e-04    267   0.63308 0.75822 0.0065189
42 2.1632e-04    273   0.63133 0.75913 0.0065209
43 2.0800e-04    304   0.62193 0.76146 0.0065261
44 1.9414e-04    332   0.61586 0.76296 0.0065294
45 1.9018e-04    336   0.61503 0.76346 0.0065305
46 1.8720e-04    343   0.61369 0.76346 0.0065305
47 1.6640e-04    380   0.60546 0.77544 0.0065562
48 1.4560e-04    492   0.58549 0.78160 0.0065690
49 1.3867e-04    510   0.58266 0.78351 0.0065730
50 1.2480e-04    573   0.57209 0.78875 0.0065837
51 1.1648e-04    662   0.55936 0.79324 0.0065928
52 1.1094e-04    675   0.55753 0.79566 0.0065976
53 1.0697e-04    731   0.55021 0.79849 0.0066032
54 1.0400e-04    742   0.54888 0.79998 0.0066061
55 9.9842e-05    763   0.54655 0.79965 0.0066055
56 9.7069e-05    768   0.54605 0.79965 0.0066055
57 8.9602e-05    779   0.54489 0.79965 0.0066055
58 8.3202e-05    795   0.54331 0.81579 0.0066364
59 7.2801e-05    954   0.52933 0.81687 0.0066384
60 6.9335e-05    962   0.52875 0.82062 0.0066453
61 6.8074e-05    974   0.52791 0.82336 0.0066503
62 6.6561e-05    987   0.52683 0.82336 0.0066503
63 6.2401e-05    998   0.52608 0.82370 0.0066509
64 5.5468e-05   1022   0.52409 0.82669 0.0066563
65 4.9921e-05   1041   0.52284 0.82827 0.0066592
66 4.1601e-05   1051   0.52234 0.83518 0.0066714
67 3.5658e-05   1124   0.51901 0.83584 0.0066726
68 3.3281e-05   1134   0.51860 0.83709 0.0066748
69 2.7734e-05   1156   0.51785 0.84108 0.0066817
70 2.3772e-05   1191   0.51668 0.84158 0.0066825
71 2.0800e-05   1199   0.51643 0.84341 0.0066857
72 1.6640e-05   1211   0.51618 0.84358 0.0066859
73 1.5128e-05   1221   0.51602 0.84450 0.0066875
74 8.3202e-06   1232   0.51585 0.84616 0.0066903
75 0.0000e+00   1245   0.51568 0.84616 0.0066903</code></pre>
</div>
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(no.mn.emp.grad.year.<span class="fl">5.</span>model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Key takeaways</strong></p>
<ul>
<li>Accuracy: 64.6%</li>
<li>Predictors: 17/17
<ul>
<li>Demographics: 4/4</li>
<li>HS characteristics: 3/3</li>
<li>HS Accomplishments: 6/6</li>
<li>Post-secondary: 4/4</li>
</ul></li>
<li>Lowest xerror
<ul>
<li>Step: 33</li>
<li>xerror: 0.74291</li>
<li>cp: 3.6054e-04</li>
<li>Splits: 135</li>
</ul></li>
<li>Total splits: 1,245</li>
</ul>
<p><br></p>
</section>
<section id="pre-pruning-7" class="level3">
<h3 class="anchored" data-anchor-id="pre-pruning-7">Pre-pruning</h3>
<p>Next, we need to prune. We can either pre-prune or post-prune. We will start with pre-pruning and use each method - max depth, min depth, and min bucket. It’s recommended that I start with the following parameters;</p>
<ul>
<li>maxdepth: 5</li>
<li>minsplit: round(2% of nrow(train)).</li>
<li>minbucket: round(minsplit / 3).</li>
<li>cp = 0</li>
</ul>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>maxdepth <span class="ot">=</span> <span class="dv">6</span></span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a>minsplit <span class="ot">=</span> <span class="fu">round</span>(.<span class="dv">02</span><span class="sc">*</span><span class="fu">nrow</span>(train))</span>
<span id="cb147-4"><a href="#cb147-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-5"><a href="#cb147-5" aria-hidden="true" tabindex="-1"></a>minbucket <span class="ot">=</span> <span class="fu">round</span>(minsplit <span class="sc">/</span> <span class="dv">3</span>)</span>
<span id="cb147-6"><a href="#cb147-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-7"><a href="#cb147-7" aria-hidden="true" tabindex="-1"></a>no.mn.emp.grad.year.<span class="fl">5.</span>model.preprune <span class="ot">&lt;-</span> <span class="fu">rpart</span>(grad.year<span class="fl">.5</span> <span class="sc">~</span> ., <span class="at">data =</span> train, <span class="at">method =</span> <span class="st">"class"</span>, </span>
<span id="cb147-8"><a href="#cb147-8" aria-hidden="true" tabindex="-1"></a>                   <span class="at">control =</span> <span class="fu">rpart.control</span>(<span class="at">cp =</span> <span class="dv">0</span>, <span class="at">maxdepth =</span> maxdepth, <span class="at">minsplit =</span> minsplit, <span class="at">minbucket =</span> minbucket))</span>
<span id="cb147-9"><a href="#cb147-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-10"><a href="#cb147-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Accuracy</span></span>
<span id="cb147-11"><a href="#cb147-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-12"><a href="#cb147-12" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(no.mn.emp.grad.year.<span class="fl">5.</span>model.preprune, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb147-13"><a href="#cb147-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-14"><a href="#cb147-14" aria-hidden="true" tabindex="-1"></a>accuracy_preprun <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.5</span>)</span>
<span id="cb147-15"><a href="#cb147-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-16"><a href="#cb147-16" aria-hidden="true" tabindex="-1"></a><span class="fu">percent</span>(accuracy_preprun, <span class="at">accuracy =</span> .<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "67.6%"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(no.mn.emp.grad.year.<span class="fl">5.</span>model.preprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.5 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0, maxdepth = maxdepth, minsplit = minsplit, 
        minbucket = minbucket))

Variables actually used in tree construction:
[1] ACTCompositeScore         highest.cred.level       
[3] MCA.R                     MCA.S                    
[5] ps.grad.InstitutionSector ps.grad.location         
[7] RaceEthnicity             total.cte.courses.taken  

Root node error: 12019/27923 = 0.43043

n= 27923 

           CP nsplit rel error  xerror      xstd
1  0.07783509      0   1.00000 1.00000 0.0068840
2  0.01634911      2   0.84433 0.84433 0.0066872
3  0.01480988      4   0.81163 0.81355 0.0066321
4  0.00707214      6   0.78201 0.78626 0.0065786
5  0.00590731      7   0.77494 0.78559 0.0065773
6  0.00515850      8   0.76903 0.77860 0.0065628
7  0.00203844      9   0.76387 0.76970 0.0065440
8  0.00066561     11   0.75980 0.76562 0.0065352
9  0.00054081     12   0.75913 0.76720 0.0065386
10 0.00029121     14   0.75805 0.76812 0.0065406
11 0.00000000     16   0.75747 0.76679 0.0065377</code></pre>
</div>
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(no.mn.emp.grad.year.<span class="fl">5.</span>model.preprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Key takeaways</strong></p>
<ul>
<li>Accuracy: 64.6% –&gt; 67.6%</li>
<li>Predictors: 8/17
<ul>
<li>Demographics: 1/4 - Race &amp; Ethnicity</li>
<li>HS characteristics: 0/3</li>
<li>HS Accomplishments: 4/6 - ACT, MCA, CTE</li>
<li>Post-secondary: 3/4 - grad location, institution type, credential</li>
</ul></li>
<li>Lowest xerror
<ul>
<li>Step: 8</li>
<li>xerror: 0.76562</li>
<li>cp: 0.00066561</li>
<li>Splits: 11</li>
</ul></li>
<li>Total splits: 16</li>
</ul>
<p><br></p>
</section>
<section id="post-pruning-7" class="level3">
<h3 class="anchored" data-anchor-id="post-pruning-7">Post-pruning</h3>
<p>The idea here is to allow the decision tree to grow fully and observe the CP value. There are two methods for identifying the CP code;</p>
<ol type="1">
<li>Use the cp value with the lowest xerror from the base model.</li>
<li>Use the cp value with the next lowest xerror that is within the standard error.</li>
</ol>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a>cp_table <span class="ot">&lt;-</span> no.mn.emp.grad.year.<span class="fl">5.</span>model.preprune<span class="sc">$</span>cptable</span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-3"><a href="#cb152-3" aria-hidden="true" tabindex="-1"></a>min_xerror <span class="ot">&lt;-</span> <span class="fu">min</span>(cp_table[, <span class="st">"xerror"</span>])</span>
<span id="cb152-4"><a href="#cb152-4" aria-hidden="true" tabindex="-1"></a>min_xerror_se <span class="ot">&lt;-</span> cp_table[<span class="fu">which.min</span>(cp_table[,<span class="st">"xerror"</span>]), <span class="st">"xstd"</span>]</span>
<span id="cb152-5"><a href="#cb152-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-6"><a href="#cb152-6" aria-hidden="true" tabindex="-1"></a>threshold <span class="ot">&lt;-</span> min_xerror <span class="sc">+</span> min_xerror_se</span>
<span id="cb152-7"><a href="#cb152-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-8"><a href="#cb152-8" aria-hidden="true" tabindex="-1"></a>one_se_index <span class="ot">&lt;-</span> <span class="fu">which</span>(cp_table[, <span class="st">"xerror"</span>] <span class="sc">&lt;=</span> threshold)[<span class="dv">1</span>] </span>
<span id="cb152-9"><a href="#cb152-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-10"><a href="#cb152-10" aria-hidden="true" tabindex="-1"></a>cp_1se <span class="ot">&lt;-</span> cp_table[one_se_index, <span class="st">"CP"</span>]</span>
<span id="cb152-11"><a href="#cb152-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-12"><a href="#cb152-12" aria-hidden="true" tabindex="-1"></a>optimal_cp <span class="ot">&lt;-</span> no.mn.emp.grad.year.<span class="fl">5.</span>model.preprune<span class="sc">$</span>cptable[<span class="fu">which.min</span>(no.mn.emp.grad.year.<span class="fl">5.</span>model.preprune<span class="sc">$</span>cptable[, <span class="st">"xerror"</span>]), <span class="st">"CP"</span>]</span>
<span id="cb152-13"><a href="#cb152-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-14"><a href="#cb152-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-15"><a href="#cb152-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Prune the hr_base_model based on the optimal cp value</span></span>
<span id="cb152-16"><a href="#cb152-16" aria-hidden="true" tabindex="-1"></a>no.mn.emp.grad.year.<span class="fl">5.</span>model.postprune <span class="ot">&lt;-</span> rpart<span class="sc">::</span><span class="fu">prune</span>(no.mn.emp.grad.year.<span class="fl">5.</span>model.preprune, <span class="at">cp =</span> cp_1se)</span>
<span id="cb152-17"><a href="#cb152-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-18"><a href="#cb152-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute the accuracy of the pruned tree</span></span>
<span id="cb152-19"><a href="#cb152-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-20"><a href="#cb152-20" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(no.mn.emp.grad.year.<span class="fl">5.</span>model.postprune, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb152-21"><a href="#cb152-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-22"><a href="#cb152-22" aria-hidden="true" tabindex="-1"></a>accuracy_postprun <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.5</span>)</span>
<span id="cb152-23"><a href="#cb152-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-24"><a href="#cb152-24" aria-hidden="true" tabindex="-1"></a><span class="fu">percent</span>(accuracy_postprun, <span class="at">accuracy =</span> .<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "67.1%"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(no.mn.emp.grad.year.<span class="fl">5.</span>model.postprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.5 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0, maxdepth = maxdepth, minsplit = minsplit, 
        minbucket = minbucket))

Variables actually used in tree construction:
[1] ACTCompositeScore       highest.cred.level      MCA.R                  
[4] ps.grad.location        total.cte.courses.taken

Root node error: 12019/27923 = 0.43043

n= 27923 

         CP nsplit rel error  xerror      xstd
1 0.0778351      0   1.00000 1.00000 0.0068840
2 0.0163491      2   0.84433 0.84433 0.0066872
3 0.0148099      4   0.81163 0.81355 0.0066321
4 0.0070721      6   0.78201 0.78626 0.0065786
5 0.0059073      7   0.77494 0.78559 0.0065773
6 0.0051585      8   0.76903 0.77860 0.0065628
7 0.0020384      9   0.76387 0.76970 0.0065440</code></pre>
</div>
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(no.mn.emp.grad.year.<span class="fl">5.</span>model.postprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-40-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Key takeaways</strong></p>
<ul>
<li>Accuracy: 67.6% –&gt; 67.1%</li>
<li>Predictors: 5/17
<ul>
<li>Demographics: 0/4 - Race &amp; Ethnicity</li>
<li>HS characteristics: 0/3</li>
<li>HS Accomplishments: 3/6 - ACT, MCA, CTE</li>
<li>Post-secondary: 2/4 - grad location, credential</li>
</ul></li>
<li>Lowest xerror
<ul>
<li>Step: 7</li>
<li>xerror: 0.76970</li>
<li>cp: 0.0020384</li>
<li>Splits: 9</li>
</ul></li>
<li>Total splits: 9</li>
</ul>
<p>So, the accuracy of these are;</p>
<ul>
<li>Base model: 64.6%</li>
<li>Pre-pruned model: 67.6%</li>
<li>Post-pruned model: 67.1%</li>
</ul>
<p>The post-pruned model provides a simpler model without sacrificing much accuracy. I will go with post-pruned.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot tree</span></span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rpart.plot</span>(no.mn.emp.grad.year.<span class="fl">5.</span>model.postprune, <span class="at">nn =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="main-takeaway-10" class="level3">
<h3 class="anchored" data-anchor-id="main-takeaway-10"><strong>Main takeaway</strong></h3>
<p>At five years after graduation, <strong>regional postsecondary engagement, CTE depth, and sub-baccalaureate credentials</strong> serve as the strongest anchors for meaningful employment in Southern Minnesota. In contrast, weaker academic preparation and absence of postsecondary ties increase the likelihood of graduates having no Minnesota employment record and not attending postsecondary.</p>
</section>
<section id="key-findings-7" class="level3">
<h3 class="anchored" data-anchor-id="key-findings-7"><strong>Key Findings</strong></h3>
<ul>
<li><strong>Model accuracy:</strong> 67.1% (post-pruned model, 9 splits).</li>
<li><strong>Most important predictors:</strong> <em>Postsecondary location</em>, <em>Total CTE courses taken</em>, <em>Highest credential level</em>, <em>ACT Composite Score</em>, and <em>MCA Reading scores</em>.</li>
<li><strong>Overall pattern:</strong> Students anchored regionally by <strong>local postsecondary pathways and CTE engagement</strong>, while <strong>academic achievement (ACT, MCA) and 4-year pathways</strong> created greater outward mobility or disconnection.</li>
</ul>
</section>
<section id="interpretation-7" class="level3">
<h3 class="anchored" data-anchor-id="interpretation-7"><strong>Interpretation</strong></h3>
<ul>
<li><strong>Postsecondary location:</strong> Attending or graduating from a Southern Minnesota postsecondary institution was the strongest predictor of regional employment at year 5.</li>
<li><strong>CTE course-taking:</strong> Students with ≥2 CTE courses had much stronger probabilities of regional employment. Additional depth (≥5 courses) further reinforced anchoring.</li>
<li><strong>Highest credential level:</strong> Sub-baccalaureate credentials (associate’s degree, some college) were most closely tied to regional employment, while 4-year degrees tilted toward disconnection.</li>
<li><strong>Academic achievement:</strong>
<ul>
<li>ACT Composite scores ≥25 anchored students regionally when combined with CTE pathways.</li>
<li>High MCA Reading scores (≥4) tended to push students outward into statewide mobility, raising the risk of no MN employment record.</li>
</ul></li>
<li><strong>Interaction effects:</strong> CTE depth buffered weaker ACT performance, while lack of CTE combined with higher MCA Reading scores increased disconnection.</li>
</ul>
</section>
<section id="decision-tree-interpretation-7" class="level3">
<h3 class="anchored" data-anchor-id="decision-tree-interpretation-7"><strong>Decision Tree Interpretation</strong></h3>
<ul>
<li><strong>Root split:</strong> Postsecondary engagement in the region was the most decisive factor for anchoring.</li>
<li><strong>CTE branch:</strong> Depth of CTE course-taking strongly improved probabilities of regional employment.</li>
<li><strong>Credential branch:</strong> Associate’s and sub-baccalaureate credentials predicted regional anchoring, while higher credentials shifted students outward.</li>
<li><strong>Academic branch:</strong> ACT and MCA scores further shaped pathways, with higher academic achievers more often found in the no-record group unless balanced by CTE or sub-baccalaureate anchors.</li>
</ul>
</section>
<section id="summary-7" class="level3">
<h3 class="anchored" data-anchor-id="summary-7"><strong>Summary</strong></h3>
<p>At year 5, <strong>regional postsecondary engagement, CTE depth, and sub-baccalaureate credentials</strong> are the central anchors for meaningful employment in Southern Minnesota. Students without these anchors—especially those with strong academic profiles but no CTE depth—are more likely to lack Minnesota employment records and not attend postsecondary.</p>
</section>
<section id="policypractice-implications-10" class="level3">
<h3 class="anchored" data-anchor-id="policypractice-implications-10"><strong>Policy/Practice Implications</strong></h3>
<ul>
<li><strong>Expand CTE pathways and ensure access to ≥2 courses</strong>, as depth is highly predictive of regional retention.</li>
<li><strong>Strengthen connections with regional postsecondary institutions</strong> to secure workforce anchoring through local degree pathways.</li>
<li><strong>Promote sub-baccalaureate options (associate’s, certificates)</strong> as effective anchors for regional employment.</li>
<li><strong>Balance pathways for high academic achievers</strong> by creating attractive professional and academic opportunities in the region to reduce disconnection.</li>
</ul>
<p><br></p>
</section>
</section>
<section id="ten-years-after-graduation-1" class="level2">
<h2 class="anchored" data-anchor-id="ten-years-after-graduation-1">Ten years after graduation</h2>
<p>First I’m going to filter out the data so only individuals that had meaningful employment in the region or do not have a Minnesota employment record and are not attending post-secondary are in the dataset. In addition, I’m going to now include all the post-secondary variables.</p>
<p>The table below shows that 47% of the individuals have meaningful employment in their high school region compared to 53% that do not have a Minnesota employment record and are not attending post-secondary.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a>no.mn.emp.grad.year<span class="fl">.10</span> <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>grad.year<span class="fl">.1</span>, <span class="sc">-</span>grad.year<span class="fl">.5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb158-3"><a href="#cb158-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(grad.year<span class="fl">.10</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Meaningful emp region"</span>, <span class="st">"No MN emp record, not attending ps"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb158-4"><a href="#cb158-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">grad.year.10 =</span> <span class="fu">as.factor</span>(grad.year<span class="fl">.10</span>))</span>
<span id="cb158-5"><a href="#cb158-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-6"><a href="#cb158-6" aria-hidden="true" tabindex="-1"></a><span class="fu">comma</span>(<span class="fu">nrow</span>(no.mn.emp.grad.year<span class="fl">.10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "29,579"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(<span class="at">data =</span> no.mn.emp.grad.year<span class="fl">.10</span> <span class="sc">%&gt;%</span></span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true" tabindex="-1"></a>            <span class="fu">group_by</span>(grad.year<span class="fl">.10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb160-3"><a href="#cb160-3" aria-hidden="true" tabindex="-1"></a>            <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb160-4"><a href="#cb160-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb160-5"><a href="#cb160-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mutate</span>(<span class="at">pct =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb160-6"><a href="#cb160-6" aria-hidden="true" tabindex="-1"></a>            <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb160-7"><a href="#cb160-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>),</span>
<span id="cb160-8"><a href="#cb160-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">class =</span> <span class="st">"cell-border stripe"</span>, </span>
<span id="cb160-9"><a href="#cb160-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">filter =</span> <span class="st">"top"</span>, </span>
<span id="cb160-10"><a href="#cb160-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">rownames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb160-11"><a href="#cb160-11" aria-hidden="true" tabindex="-1"></a>          <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb160-12"><a href="#cb160-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">columnDefs =</span> <span class="fu">list</span>(<span class="fu">list</span>(<span class="at">className =</span> <span class="st">"dt-center"</span>, <span class="at">targets =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)))) <span class="sc">%&gt;%</span></span>
<span id="cb160-13"><a href="#cb160-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatCurrency</span>(<span class="dv">2</span>, <span class="st">""</span>, <span class="at">digits =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb160-14"><a href="#cb160-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatPercentage</span>(<span class="dv">3</span>, <span class="at">digits =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-daff43ea75616bf2b3e2" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-daff43ea75616bf2b3e2">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Meaningful emp region&quot;,&quot;No MN emp record, not attending ps&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"13913\" data-max=\"15666\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0.470367490449305\" data-max=\"0.529632509550695\" data-scale=\"15\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["Meaningful emp region","No MN emp record, not attending ps"],[13913,15666],[0.4703674904493053,0.5296325095506947]],"container":"<table class=\"cell-border stripe\">\n  <thead>\n    <tr>\n      <th>grad.year.10<\/th>\n      <th>n<\/th>\n      <th>pct<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"targets":2,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatPercentage(data, 1, 3, \",\", \".\", null);\n  }"},{"targets":1,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatCurrency(data, \"\", 0, 3, \",\", \".\", true, null);\n  }"},{"className":"dt-center","targets":[1,2]},{"name":"grad.year.10","targets":0},{"name":"n","targets":1},{"name":"pct","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":["options.columnDefs.0.render","options.columnDefs.1.render"],"jsHooks":[]}</script>
</div>
</div>
<p><br></p>
<section id="base-model-8" class="level3">
<h3 class="anchored" data-anchor-id="base-model-8">Base Model</h3>
<p>I know the base model is going to overfit and provide an overly complex tree due to having a cost penalty of 0. So I’m just going to print the complexity plot in order to see what the appropriate CP would be to minimize xerror.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true" tabindex="-1"></a>sample_ind <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">nrow</span>(no.mn.emp.grad.year<span class="fl">.10</span>), <span class="fu">nrow</span>(no.mn.emp.grad.year<span class="fl">.10</span>) <span class="sc">*</span>.<span class="dv">7</span>)</span>
<span id="cb161-4"><a href="#cb161-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-5"><a href="#cb161-5" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> no.mn.emp.grad.year<span class="fl">.10</span>[sample_ind,]</span>
<span id="cb161-6"><a href="#cb161-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-7"><a href="#cb161-7" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> no.mn.emp.grad.year<span class="fl">.10</span>[<span class="sc">-</span>sample_ind,]</span>
<span id="cb161-8"><a href="#cb161-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-9"><a href="#cb161-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Base model</span></span>
<span id="cb161-10"><a href="#cb161-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-11"><a href="#cb161-11" aria-hidden="true" tabindex="-1"></a>no.mn.emp.grad.year.<span class="fl">10.</span>model <span class="ot">&lt;-</span> <span class="fu">rpart</span>(grad.year<span class="fl">.10</span> <span class="sc">~</span> ., <span class="at">data =</span> train, <span class="at">method =</span> <span class="st">"class"</span>, <span class="at">control =</span> <span class="fu">rpart.control</span>(<span class="at">cp =</span> <span class="dv">0</span>))</span>
<span id="cb161-12"><a href="#cb161-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-13"><a href="#cb161-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Accuracy</span></span>
<span id="cb161-14"><a href="#cb161-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-15"><a href="#cb161-15" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(no.mn.emp.grad.year.<span class="fl">10.</span>model, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb161-16"><a href="#cb161-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-17"><a href="#cb161-17" aria-hidden="true" tabindex="-1"></a>accuracy_base <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.10</span>)</span>
<span id="cb161-18"><a href="#cb161-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-19"><a href="#cb161-19" aria-hidden="true" tabindex="-1"></a><span class="fu">percent</span>(accuracy_base, <span class="at">accuracy =</span> .<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "59.9%"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(no.mn.emp.grad.year.<span class="fl">10.</span>model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.10 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0))

Variables actually used in tree construction:
 [1] ACTCompositeScore         avg.unemp.rate           
 [3] avg.wages.pct.state       cte.achievement          
 [5] Dem_Desc                  economic.status          
 [7] Gender                    highest.cred.level       
 [9] MCA.M                     MCA.R                    
[11] MCA.S                     ps.grad                  
[13] ps.grad.InstitutionSector ps.grad.location         
[15] RaceEthnicity             SpecialEdStatus          
[17] total.cte.courses.taken  

Root node error: 9703/20705 = 0.46863

n= 20705 

           CP nsplit rel error  xerror      xstd
1  1.5480e-01      0   1.00000 1.00000 0.0074002
2  1.1955e-02      1   0.84520 0.84520 0.0072529
3  1.0100e-02      5   0.78543 0.79388 0.0071679
4  7.0081e-03      6   0.77533 0.78873 0.0071583
5  4.5347e-03      8   0.76131 0.77471 0.0071313
6  4.0194e-03      9   0.75678 0.77440 0.0071307
7  3.0918e-03     10   0.75276 0.76935 0.0071206
8  2.8857e-03     11   0.74967 0.76811 0.0071181
9  1.6490e-03     12   0.74678 0.76657 0.0071149
10 1.6146e-03     15   0.74183 0.76440 0.0071105
11 1.5459e-03     19   0.73524 0.76430 0.0071103
12 1.4429e-03     20   0.73369 0.76193 0.0071054
13 1.2367e-03     22   0.73080 0.75781 0.0070968
14 1.0993e-03     23   0.72957 0.75709 0.0070953
15 1.0306e-03     26   0.72627 0.75781 0.0070968
16 9.2755e-04     31   0.72112 0.75770 0.0070966
17 8.2449e-04     33   0.71926 0.75750 0.0070961
18 7.2143e-04     38   0.71514 0.75977 0.0071009
19 6.1837e-04     42   0.71225 0.75853 0.0070983
20 5.6683e-04     45   0.71040 0.75997 0.0071013
21 5.1530e-04     47   0.70927 0.75750 0.0070961
22 4.3801e-04     50   0.70772 0.75925 0.0070998
23 4.1224e-04     54   0.70597 0.76255 0.0071067
24 3.7789e-04     68   0.70009 0.76739 0.0071166
25 3.6071e-04     78   0.69546 0.76626 0.0071143
26 3.0918e-04    112   0.68061 0.76883 0.0071195
27 2.8342e-04    186   0.65310 0.76966 0.0071212
28 2.7483e-04    192   0.65114 0.77327 0.0071284
29 2.5765e-04    198   0.64949 0.77481 0.0071315
30 2.4735e-04    226   0.64114 0.77656 0.0071349
31 2.4048e-04    232   0.63960 0.77811 0.0071380
32 2.1643e-04    245   0.63630 0.78254 0.0071466
33 2.0612e-04    266   0.63032 0.78388 0.0071491
34 1.9140e-04    369   0.60672 0.78790 0.0071568
35 1.8551e-04    376   0.60538 0.79161 0.0071637
36 1.8322e-04    381   0.60445 0.79213 0.0071647
37 1.8036e-04    394   0.60177 0.79264 0.0071656
38 1.7177e-04    430   0.59466 0.79182 0.0071641
39 1.6490e-04    505   0.57786 0.79800 0.0071754
40 1.5459e-04    542   0.56951 0.79913 0.0071775
41 1.4429e-04    597   0.56034 0.80315 0.0071846
42 1.4171e-04    602   0.55962 0.80346 0.0071852
43 1.3741e-04    612   0.55818 0.80418 0.0071865
44 1.2883e-04    633   0.55488 0.80583 0.0071894
45 1.2367e-04    648   0.55169 0.80800 0.0071932
46 1.2024e-04    664   0.54942 0.80748 0.0071923
47 1.1892e-04    689   0.54591 0.80748 0.0071923
48 1.0306e-04    713   0.54272 0.82067 0.0072146
49 8.8338e-05    857   0.52571 0.82201 0.0072168
50 8.2449e-05    867   0.52458 0.82789 0.0072263
51 7.7296e-05    888   0.52221 0.82830 0.0072270
52 6.8707e-05    896   0.52159 0.83356 0.0072353
53 6.1837e-05    899   0.52139 0.83696 0.0072405
54 5.1530e-05    909   0.52077 0.84242 0.0072488
55 4.1224e-05    966   0.51767 0.84273 0.0072493
56 3.4354e-05    971   0.51747 0.84788 0.0072569
57 2.5765e-05    989   0.51685 0.84799 0.0072570
58 2.0612e-05   1001   0.51654 0.85108 0.0072615
59 1.7177e-05   1011   0.51634 0.85097 0.0072613
60 0.0000e+00   1017   0.51623 0.85149 0.0072621</code></pre>
</div>
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(no.mn.emp.grad.year.<span class="fl">10.</span>model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-43-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Key takeaways</strong></p>
<ul>
<li>Accuracy: 59.9%</li>
<li>Predictors: 17/17
<ul>
<li>Demographics: 4/4</li>
<li>HS characteristics: 3/3</li>
<li>HS Accomplishments: 6/6</li>
<li>Post-secondary: 4/4</li>
</ul></li>
<li>Lowest xerror
<ul>
<li>Step: 14</li>
<li>xerror: 0.75709</li>
<li>cp: 1.0993e-03</li>
<li>Splits: 23</li>
</ul></li>
<li>Total splits: 1,017</li>
</ul>
<p><br></p>
</section>
<section id="pre-pruning-8" class="level3">
<h3 class="anchored" data-anchor-id="pre-pruning-8">Pre-pruning</h3>
<p>Next, we need to prune. We can either pre-prune or post-prune. We will start with pre-pruning and use each method - max depth, min depth, and min bucket. It’s recommended that I start with the following parameters;</p>
<ul>
<li>maxdepth: 5</li>
<li>minsplit: round(2% of nrow(train)).</li>
<li>minbucket: round(minsplit / 3).</li>
<li>cp = 0</li>
</ul>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a>maxdepth <span class="ot">=</span> <span class="dv">5</span></span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-3"><a href="#cb166-3" aria-hidden="true" tabindex="-1"></a>minsplit <span class="ot">=</span> <span class="fu">round</span>(.<span class="dv">02</span><span class="sc">*</span><span class="fu">nrow</span>(train))</span>
<span id="cb166-4"><a href="#cb166-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-5"><a href="#cb166-5" aria-hidden="true" tabindex="-1"></a>minbucket <span class="ot">=</span> <span class="fu">round</span>(minsplit <span class="sc">/</span> <span class="dv">3</span>)</span>
<span id="cb166-6"><a href="#cb166-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-7"><a href="#cb166-7" aria-hidden="true" tabindex="-1"></a>no.mn.emp.grad.year.<span class="fl">10.</span>model.preprune <span class="ot">&lt;-</span> <span class="fu">rpart</span>(grad.year<span class="fl">.10</span> <span class="sc">~</span> ., <span class="at">data =</span> train, <span class="at">method =</span> <span class="st">"class"</span>, </span>
<span id="cb166-8"><a href="#cb166-8" aria-hidden="true" tabindex="-1"></a>                   <span class="at">control =</span> <span class="fu">rpart.control</span>(<span class="at">cp =</span> <span class="dv">0</span>, <span class="at">maxdepth =</span> maxdepth, <span class="at">minsplit =</span> minsplit, <span class="at">minbucket =</span> minbucket))</span>
<span id="cb166-9"><a href="#cb166-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-10"><a href="#cb166-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Accuracy</span></span>
<span id="cb166-11"><a href="#cb166-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-12"><a href="#cb166-12" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(no.mn.emp.grad.year.<span class="fl">10.</span>model.preprune, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb166-13"><a href="#cb166-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-14"><a href="#cb166-14" aria-hidden="true" tabindex="-1"></a>accuracy_preprun <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.10</span>)</span>
<span id="cb166-15"><a href="#cb166-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-16"><a href="#cb166-16" aria-hidden="true" tabindex="-1"></a><span class="fu">percent</span>(accuracy_preprun, <span class="at">accuracy =</span> .<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "63.3%"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(no.mn.emp.grad.year.<span class="fl">10.</span>model.preprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.10 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0, maxdepth = maxdepth, minsplit = minsplit, 
        minbucket = minbucket))

Variables actually used in tree construction:
[1] ACTCompositeScore       MCA.R                   ps.grad.location       
[4] RaceEthnicity           total.cte.courses.taken

Root node error: 9703/20705 = 0.46863

n= 20705 

         CP nsplit rel error  xerror      xstd
1 0.1547975      0   1.00000 1.00000 0.0074002
2 0.0119551      1   0.84520 0.84520 0.0072529
3 0.0101000      5   0.78543 0.79563 0.0071711
4 0.0040194      6   0.77533 0.79254 0.0071654
5 0.0000000      7   0.77131 0.78800 0.0071570</code></pre>
</div>
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(no.mn.emp.grad.year.<span class="fl">10.</span>model.preprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-44-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Key takeaways</strong></p>
<ul>
<li>Accuracy: 59.9% –&gt; 63.3%</li>
<li>Predictors: 5/17
<ul>
<li>Demographics: 1/4 - Race</li>
<li>HS characteristics: 0/3</li>
<li>HS Accomplishments: 3/6 - MCA, ACT, CTE</li>
<li>Post-secondary: 1/4 - grad location</li>
</ul></li>
<li>Lowest xerror
<ul>
<li>Step: 5</li>
<li>xerror: 0.78800</li>
<li>cp: 0</li>
<li>Splits: 7</li>
</ul></li>
<li>Total splits: 7</li>
</ul>
<p><br></p>
</section>
<section id="post-pruning-8" class="level3">
<h3 class="anchored" data-anchor-id="post-pruning-8">Post-pruning</h3>
<p>The idea here is to allow the decision tree to grow fully and observe the CP value. There are two methods for identifying the CP code;</p>
<ol type="1">
<li>Use the cp value with the lowest xerror from the base model.</li>
<li>Use the cp value with the next lowest xerror that is within the standard error.</li>
</ol>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a>cp_table <span class="ot">&lt;-</span> no.mn.emp.grad.year.<span class="fl">10.</span>model.preprune<span class="sc">$</span>cptable</span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-3"><a href="#cb171-3" aria-hidden="true" tabindex="-1"></a>min_xerror <span class="ot">&lt;-</span> <span class="fu">min</span>(cp_table[, <span class="st">"xerror"</span>])</span>
<span id="cb171-4"><a href="#cb171-4" aria-hidden="true" tabindex="-1"></a>min_xerror_se <span class="ot">&lt;-</span> cp_table[<span class="fu">which.min</span>(cp_table[,<span class="st">"xerror"</span>]), <span class="st">"xstd"</span>]</span>
<span id="cb171-5"><a href="#cb171-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-6"><a href="#cb171-6" aria-hidden="true" tabindex="-1"></a>threshold <span class="ot">&lt;-</span> min_xerror <span class="sc">+</span> min_xerror_se</span>
<span id="cb171-7"><a href="#cb171-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-8"><a href="#cb171-8" aria-hidden="true" tabindex="-1"></a>one_se_index <span class="ot">&lt;-</span> <span class="fu">which</span>(cp_table[, <span class="st">"xerror"</span>] <span class="sc">&lt;=</span> threshold)[<span class="dv">1</span>] </span>
<span id="cb171-9"><a href="#cb171-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-10"><a href="#cb171-10" aria-hidden="true" tabindex="-1"></a>cp_1se <span class="ot">&lt;-</span> cp_table[one_se_index, <span class="st">"CP"</span>]</span>
<span id="cb171-11"><a href="#cb171-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-12"><a href="#cb171-12" aria-hidden="true" tabindex="-1"></a>optimal_cp <span class="ot">&lt;-</span> no.mn.emp.grad.year.<span class="fl">10.</span>model.preprune<span class="sc">$</span>cptable[<span class="fu">which.min</span>(no.mn.emp.grad.year.<span class="fl">10.</span>model.preprune<span class="sc">$</span>cptable[, <span class="st">"xerror"</span>]), <span class="st">"CP"</span>]</span>
<span id="cb171-13"><a href="#cb171-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-14"><a href="#cb171-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-15"><a href="#cb171-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Prune the hr_base_model based on the optimal cp value</span></span>
<span id="cb171-16"><a href="#cb171-16" aria-hidden="true" tabindex="-1"></a>no.mn.emp.grad.year.<span class="fl">10.</span>model.postprune <span class="ot">&lt;-</span> rpart<span class="sc">::</span><span class="fu">prune</span>(no.mn.emp.grad.year.<span class="fl">10.</span>model.preprune, <span class="at">cp =</span> cp_1se)</span>
<span id="cb171-17"><a href="#cb171-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-18"><a href="#cb171-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute the accuracy of the pruned tree</span></span>
<span id="cb171-19"><a href="#cb171-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-20"><a href="#cb171-20" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(no.mn.emp.grad.year.<span class="fl">10.</span>model.postprune, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb171-21"><a href="#cb171-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-22"><a href="#cb171-22" aria-hidden="true" tabindex="-1"></a>accuracy_postprun <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.10</span>)</span>
<span id="cb171-23"><a href="#cb171-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-24"><a href="#cb171-24" aria-hidden="true" tabindex="-1"></a><span class="fu">percent</span>(accuracy_postprun, <span class="at">accuracy =</span> .<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "62.6%"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(no.mn.emp.grad.year.<span class="fl">10.</span>model.postprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.10 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0, maxdepth = maxdepth, minsplit = minsplit, 
        minbucket = minbucket))

Variables actually used in tree construction:
[1] ACTCompositeScore       MCA.R                   ps.grad.location       
[4] RaceEthnicity           total.cte.courses.taken

Root node error: 9703/20705 = 0.46863

n= 20705 

         CP nsplit rel error  xerror      xstd
1 0.1547975      0   1.00000 1.00000 0.0074002
2 0.0119551      1   0.84520 0.84520 0.0072529
3 0.0101000      5   0.78543 0.79563 0.0071711
4 0.0040194      6   0.77533 0.79254 0.0071654</code></pre>
</div>
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(no.mn.emp.grad.year.<span class="fl">10.</span>model.postprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-45-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Key takeaways</strong></p>
<ul>
<li>Accuracy: 63.3% –&gt; 62.6%</li>
<li>Predictors: 5/17
<ul>
<li>Demographics: 1/4 - Race</li>
<li>HS characteristics: 0/3</li>
<li>HS Accomplishments: 3/6 - MCA, ACT, CTE</li>
<li>Post-secondary: 1/4 - grad location</li>
</ul></li>
<li>Lowest xerror
<ul>
<li>Step: 4</li>
<li>xerror: 0.79254</li>
<li>cp: 0.0040194</li>
<li>Splits: 6</li>
</ul></li>
<li>Total splits: 6</li>
</ul>
<p>So, the accuracy of these are clear;</p>
<ul>
<li>Base model: 59.9%</li>
<li>Pre-pruned model: 63.3%</li>
<li>Post-pruned model: 62.6%</li>
</ul>
<p>The post-pruned model provides a simpler mode and doesn’t sacrifice accuracy too much. I’m going with the post-pruned.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot tree</span></span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rpart.plot</span>(no.mn.emp.grad.year.<span class="fl">10.</span>model.postprune, <span class="at">nn =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/unnamed-chunk-46-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="main-takeaway-11" class="level3">
<h3 class="anchored" data-anchor-id="main-takeaway-11"><strong>Main takeaway</strong></h3>
<p>At ten years after graduation, <strong>regional postsecondary graduation, CTE depth, and moderate academic performance</strong> remain the strongest anchors for meaningful employment in Southern Minnesota. In contrast, students without regional PS ties, limited CTE engagement, and weaker academic scores are most at risk of having no Minnesota employment record and not attending postsecondary.</p>
</section>
<section id="key-findings-8" class="level3">
<h3 class="anchored" data-anchor-id="key-findings-8"><strong>Key Findings</strong></h3>
<ul>
<li><strong>Model accuracy:</strong> 62.6% (post-pruned model, 6 splits).</li>
<li><strong>Most important predictors:</strong> <em>Postsecondary location</em>, <em>CTE course-taking depth</em>, <em>MCA Reading scores</em>, <em>ACT Composite Score</em>, and <em>Race/Ethnicity</em>.</li>
<li><strong>Overall pattern:</strong> Long-term anchoring is shaped by <strong>regional PS credentials and CTE engagement</strong>, while disconnection risk increases for those with weak academic readiness and no local PS ties.</li>
</ul>
</section>
<section id="interpretation-8" class="level3">
<h3 class="anchored" data-anchor-id="interpretation-8"><strong>Interpretation</strong></h3>
<ul>
<li><strong>Postsecondary location:</strong> Graduates of Southern Minnesota institutions were far more likely to remain employed regionally, while those without PS graduation faced higher rates of disconnection.</li>
<li><strong>CTE depth:</strong> Students with ≥2 CTE courses were more likely to anchor regionally, especially when combined with moderate academic performance.</li>
<li><strong>Academic achievement:</strong>
<ul>
<li>High MCA Reading scores (≥4) combined with CTE engagement increased anchoring.</li>
<li>Very low ACT scores (&lt;23) predicted disconnection, particularly for students without strong PS or CTE anchors.</li>
</ul></li>
<li><strong>Race/Ethnicity:</strong> Hispanic and White students with stronger MCA Reading preparation showed better regional anchoring; subgroup disparities persisted otherwise.</li>
</ul>
</section>
<section id="decision-tree-interpretation-8" class="level3">
<h3 class="anchored" data-anchor-id="decision-tree-interpretation-8"><strong>Decision Tree Interpretation</strong></h3>
<ul>
<li><strong>Root split:</strong> Postsecondary location was the strongest determinant. Those without regional PS graduation were far more likely to have no employment record.</li>
<li><strong>CTE branch:</strong> Among students without strong PS ties, CTE depth (≥2 courses) offered a significant protective anchor against disconnection.</li>
<li><strong>Academic branch:</strong> Higher MCA Reading scores and moderate ACT scores supported regional anchoring, while very low ACT scores pushed outcomes toward no record.</li>
<li><strong>Race/Ethnicity branch:</strong> Some subgroups (Hispanic, White) paired with stronger reading preparation anchored regionally, while others remained more vulnerable to disconnection.</li>
</ul>
</section>
<section id="summary-8" class="level3">
<h3 class="anchored" data-anchor-id="summary-8"><strong>Summary</strong></h3>
<p>At ten years, <strong>regional postsecondary graduation and sustained CTE involvement are the strongest long-term anchors for meaningful regional employment</strong>. Students with weak PS ties, limited CTE, and low academic readiness remain most at risk of being disconnected from Minnesota’s workforce and higher education. Persistent racial disparities and academic achievement gaps shape who benefits from these anchors.</p>
</section>
<section id="policypractice-implications-11" class="level3">
<h3 class="anchored" data-anchor-id="policypractice-implications-11"><strong>Policy/Practice Implications</strong></h3>
<ul>
<li><strong>Deepen partnerships with regional PS institutions</strong> to retain more graduates in the regional workforce.</li>
<li><strong>Expand opportunities for CTE course depth (≥2 courses)</strong> as a long-term protective factor against disconnection.</li>
<li><strong>Intervene early for students with low ACT scores</strong>, providing supports that connect them to CTE and local PS opportunities.</li>
<li><strong>Address racial/ethnic disparities in regional workforce attachment</strong>, ensuring equitable access to CTE, PS, and local job pipelines.</li>
<li><strong>Sustain programs that integrate academic readiness with CTE pathways</strong>, reinforcing the protective effect of moderate academic performance.</li>
</ul>
<p><br></p>
</section>
</section>
</section>
<section id="grand-synthesis-predictive-models-of-meaningful-employment-in-southern-minnesota" class="level1">
<h1>Grand Synthesis: Predictive Models of Meaningful Employment in Southern Minnesota</h1>
<section id="main-takeaway-12" class="level3">
<h3 class="anchored" data-anchor-id="main-takeaway-12"><strong>Main takeaway</strong></h3>
<p>Across all three binary comparisons and all time horizons (1, 5, and 10 years after graduation), the CART models consistently highlight a <strong>dual pipeline</strong> shaping workforce outcomes in Southern Minnesota:</p>
<ol type="1">
<li><strong>Anchors to Regional Employment:</strong>
<ul>
<li><strong>CTE engagement and depth (≥2–5 courses, concentrator/completor status).</strong></li>
<li><strong>Sub-baccalaureate pathways</strong> (2-year credentials, certificates, some college).</li>
<li><strong>Regional postsecondary attendance and graduation.</strong></li>
<li><strong>Favorable local economic conditions</strong> (competitive wages, lower unemployment).</li>
</ul></li>
<li><strong>Pathways to Statewide Mobility or Disconnection:</strong>
<ul>
<li><strong>Bachelor’s degree attainment and high academic achievement</strong> (ACT ≥25–28, MCA Reading ≥4) consistently predict outward mobility into statewide labor markets.</li>
<li><strong>Weak academic readiness</strong> (low ACT, low MCA scores) and <strong>lack of CTE engagement</strong> predict disconnection (no record, not attending PS).</li>
<li><strong>Structural disadvantages</strong> (low-income, SpecialEd status, some racial/ethnic groups) persistently raise the risk of disconnection across all timeframes.</li>
</ul></li>
</ol>
<p>The synthesis underscores that <strong>CTE and regional postsecondary pathways are the backbone of workforce retention</strong>, while higher academic achievement and 4-year credentials lead to broader mobility. Disadvantaged groups remain at elevated risk of disconnection without targeted supports.</p>
<hr>
</section>
<section id="year-1-after-graduation-3" class="level3">
<h3 class="anchored" data-anchor-id="year-1-after-graduation-3"><strong>Year 1 after Graduation</strong></h3>
<ul>
<li><strong>Anchors:</strong> Early anchoring comes primarily from <strong>CTE engagement, math proficiency, and local labor market strength.</strong></li>
<li><strong>Barriers:</strong> SpecialEd involvement, weak academic readiness, and lack of CTE drive early disconnection or statewide mobility.</li>
<li><strong>Interpretation:</strong> At this stage, <strong>exposure to CTE and basic academic preparation</strong> are critical to prevent graduates from being disconnected from work or education.</li>
</ul>
<hr>
</section>
<section id="year-5-after-graduation-3" class="level3">
<h3 class="anchored" data-anchor-id="year-5-after-graduation-3"><strong>Year 5 after Graduation</strong></h3>
<ul>
<li><strong>Anchors:</strong> <strong>Regional postsecondary engagement, CTE depth, and sub-baccalaureate completion</strong> are most decisive.</li>
<li><strong>Barriers:</strong> 4-year/Bachelor’s attainment predicts mobility out of the region; SpecialEd, gender, and racial disparities continue to shape risks of disconnection.</li>
<li><strong>Interpretation:</strong> Mid-career, <strong>institutional pathways (regional PS, CTE credentials)</strong> dominate as anchors, while higher academic achievement channels students outward.</li>
</ul>
<hr>
</section>
<section id="year-10-after-graduation-3" class="level3">
<h3 class="anchored" data-anchor-id="year-10-after-graduation-3"><strong>Year 10 after Graduation</strong></h3>
<ul>
<li><strong>Anchors:</strong> Long-term anchoring depends on <strong>regional postsecondary graduation, sustained CTE involvement, and competitive wage environments.</strong></li>
<li><strong>Barriers:</strong> Weak academic scores, lack of PS/CTE ties, and subgroup inequities push graduates toward disconnection or employment outside the region.</li>
<li><strong>Interpretation:</strong> At this stage, outcomes stabilize: <strong>CTE and regional PS pipelines anchor students</strong>, while <strong>4-year pathways and weak local wages reinforce outward movement or disconnection.</strong></li>
</ul>
<hr>
</section>
<section id="overall-summary-3" class="level3">
<h3 class="anchored" data-anchor-id="overall-summary-3"><strong>Overall Summary</strong></h3>
<p>The CART analyses converge on three central insights:</p>
<ol type="1">
<li><strong>CTE engagement is the most consistent predictor of regional employment.</strong> Even minimal exposure is protective, while concentrator/completor status provides the strongest anchor.</li>
<li><strong>Regional postsecondary pathways matter profoundly.</strong> Attendance and completion in Southern Minnesota institutions substantially increase the odds of regional employment at 5 and 10 years.</li>
<li><strong>Mobility vs.&nbsp;disconnection split.</strong>
<ul>
<li><strong>Mobility:</strong> High achievers and 4-year graduates are more likely to find meaningful employment statewide.</li>
<li><strong>Disconnection:</strong> Students with weak academic readiness, limited CTE, and structural disadvantages face higher risks of no employment record or PS engagement.</li>
</ul></li>
</ol>
<p>This duality reflects a <strong>regional workforce pipeline rooted in CTE and 2-year credentials</strong>, contrasted with a <strong>mobility pipeline driven by academic achievement and 4-year degrees.</strong></p>
<hr>
</section>
<section id="policypractice-implications-12" class="level3">
<h3 class="anchored" data-anchor-id="policypractice-implications-12"><strong>Policy/Practice Implications</strong></h3>
<ul>
<li><strong>Expand and deepen CTE opportunities</strong>, ensuring more students complete concentrator/completor pathways and take multiple courses (≥2–5).</li>
<li><strong>Strengthen regional postsecondary connections</strong>, positioning 2-year institutions as central anchors for workforce retention.</li>
<li><strong>Elevate sub-baccalaureate pathways</strong> as critical contributors to regional workforce strength.</li>
<li><strong>Design retention strategies for 4-year graduates and high academic achievers</strong>, offering internships, research, and professional opportunities tied to local industries.</li>
<li><strong>Target supports for vulnerable groups</strong> (low-income, SpecialEd, racial/ethnic subgroups) to reduce disconnection.</li>
<li><strong>Maintain competitive local wages and employment opportunities</strong> to counter outward mobility and anchor graduates long-term.</li>
</ul>
<p>In short, the models reaffirm that <strong>Southern Minnesota’s workforce is sustained by CTE and 2-year credentials</strong>, but retaining academically strong and 4-year graduates will require intentional strategies. Meanwhile, <strong>addressing equity gaps and economic competitiveness is essential</strong> to prevent long-term disconnection.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>